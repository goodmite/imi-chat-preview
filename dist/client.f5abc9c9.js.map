{"version":3,"sources":["environment.ts","ajax.ts","bot-details.ts","typings/send-api.ts","utility.ts","response-components/text-reply.ts","response-components/session-expiry.ts","response-components/quick-reply.ts","response-components/carousel-reply.ts","response-components/audio-reply.ts","response-components/image-reply.ts","response-components/feedback.ts","response-components/video-reply.ts","dom.ts","send-api.ts","../node_modules/regenerator-runtime/runtime.js","main.ts","../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/is-in-browser/dist/module.js","../node_modules/tiny-warning/dist/tiny-warning.esm.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/jss/dist/jss.esm.js","../node_modules/jss-plugin-rule-value-function/dist/jss-plugin-rule-value-function.esm.js","../node_modules/jss-plugin-rule-value-observable/node_modules/symbol-observable/es/ponyfill.js","../node_modules/jss-plugin-rule-value-observable/node_modules/symbol-observable/es/index.js","../node_modules/jss-plugin-rule-value-observable/dist/jss-plugin-rule-value-observable.esm.js","../node_modules/jss-plugin-template/dist/jss-plugin-template.esm.js","../node_modules/jss-plugin-global/dist/jss-plugin-global.esm.js","../node_modules/jss-plugin-extend/dist/jss-plugin-extend.esm.js","../node_modules/jss-plugin-nested/dist/jss-plugin-nested.esm.js","../node_modules/jss-plugin-compose/dist/jss-plugin-compose.esm.js","../node_modules/hyphenate-style-name/index.js","../node_modules/jss-plugin-camel-case/dist/jss-plugin-camel-case.esm.js","../node_modules/jss-plugin-default-unit/dist/jss-plugin-default-unit.esm.js","../node_modules/jss-plugin-expand/dist/jss-plugin-expand.esm.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/css-vendor/dist/css-vendor.esm.js","../node_modules/jss-plugin-vendor-prefixer/dist/jss-plugin-vendor-prefixer.esm.js","../node_modules/jss-plugin-props-sort/dist/jss-plugin-props-sort.esm.js","../node_modules/jss-preset-default/dist/jss-preset-default.esm.js","rammas.style.js","client.ts","../node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_typeof","Symbol","iterator","obj","constructor","isBrowser","window","document","nodeType","isProduction","warning","condition","message","text","console","warn","Error","x","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","Constructor","protoProps","staticProps","_inheritsLoose","subClass","superClass","create","__proto__","_assertThisInitialized","self","ReferenceError","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","plainObjectConstrurctor","cloneStyle","style","Array","isArray","map","newStyle","name","createRule","decl","options","jss","declCopy","rule","plugins","onCreateRule","join","value","by","result","toCssValue","ignoreImportant","cssValue","indentStr","str","indent","index","toCss","selector","_options","_options$indent","fallbacks","fallback","prop","_prop","_value","_prop2","_value2","allowEmpty","escapeRegex","nativeEscape","CSS","escape","replace","BaseStyleRule","type","isProcessed","renderer","renderable","sheet","Renderer","_proto","undefined","force","newValue","process","onChangeValue","isEmpty","isDefined","remove","removeProperty","setProperty","attached","StyleRule","_BaseStyleRule","_this","selectorText","id","scoped","generateId","_proto2","applyTo","json","toJSON","toString","link","opts","set","hasChanged","setSelector","replaceRule","get","pluginStyleRule","parent","defaultToStringOptions","children","atRegExp","ConditionalRule","styles","at","query","rules","atMatch","match","RuleList","add","getRule","addRule","onProcessRule","keyRegExp","pluginConditionalRule","test","defaultToStringOptions$1","nameRegExp","KeyframesRule","frames","nameMatch","keyRegExp$1","refRegExp","findReferencedKeyframe","val","keyframes","replaceRef","refKeyframe","plugin","onProcessStyle","KeyframeRule","_len","args","_key","concat","pluginKeyframeRule","FontFaceRule","pluginFontFaceRule","ViewportRule","pluginViewportRule","SimpleRule","keysMap","pluginSimpleRule","defaultUpdateOptions","forceUpdateOptions","raw","counter","classes","ruleOptions","_this$options","register","splice","unregister","plugins$$1","slice","forEach","update","data","updateOne","_this$options2","styleRule","onUpdate","nextValue","prevValue","_nextValue","_prevValue","css","StyleSheet","deployed","queue","attach","deploy","detach","push","insertRule","addRules","added","deleteRule","_this$rules","PluginsRegistry","internal","external","registry","onProcessSheet","processedValue","use","newPlugin","reduce","SheetsRegistry","reset","_temp","_ref","sheets","globalThis","Math","Function","ns","moduleId","maxRules","createGenerateId","ruleCounter","jssId","prefix","classNamePrefix","String","minify","memoize","fn","getPropertyValue","cssRule","attributeStyleMap","err","delete","getHead","querySelector","findHigherSheet","insertionPoint","findHighestSheet","findCommentNode","head","childNodes","node","nodeValue","trim","findPrevNode","element","parentNode","nextSibling","comment","insertStyle","nextNode","insertBefore","insertionPointElement","appendChild","getNonce","getAttribute","_insertRule","container","maxIndex","cssRules","c","_c","appendRule","createStyle","el","createElement","textContent","DomRenderer","hasInsertedRules","media","meta","setAttribute","nonce","Boolean","removeChild","insertRules","nativeParent","latestNativeParent","parentStyleSheet","ruleStr","nativeRule","getRules","instanceCounter","Jss","version","isInBrowser","setup","createStyleSheet","removeStyleSheet","createRule$$1","getDynamicStyles","to","extracted","SheetsManager","WeakMap","entry","has","refs","manage","unmanage","hasCSSTOMSupport","now","Date","fnValuesNs","fnRuleNs","functionPlugin","fnValues","fnRule","symbolObservablePonyfill","root","observable","global","module","isObservable","$$observable","observablePlugin","updateOptions","style$","subscribe","_loop","next","_ret","semiWithNl","parse","cssText","split","colonIndex","substr","templatePlugin","atPrefix","GlobalContainerRule","GlobalPrefixedRule","separatorRegExp","addScope","scope","parts","handleNestedGlobalContainerRule","handlePrefixedGlobalRule","jssGlobal","isObject","valueNs","mergeExtend","extendType","extend","refRule","originalStyle","mergeRest","jssExtend","parentRegExp","jssNested","getReplaceRef","replaceParentRefs","nestedProp","parentProp","parentSelectors","nestedSelectors","j","nested","getOptions","prevOptions","nestingLevel","isNested","isNestedConditional","registerClass","className","isSetted","jssCompose","composes","uppercasePattern","msPattern","cache","toHyphenLower","toLowerCase","hyphenateStyleName","hName","convertCase","converted","camelCase","hyphenatedProp","px","ms","percent","defaultUnits","border","margin","padding","height","width","bottom","left","top","right","motion","outline","perspective","size","grid","addCamelCasedVersion","regExp","toUpperCase","newObj","units","iterate","innerProp","_innerProp","defaultUnit","camelCasedOptions","propArray","flex","transform","transition","propArrayInObj","position","propObj","background","attachment","color","image","repeat","property","duration","timingFunction","delay","animation","iterationCount","direction","fillMode","playState","y","blur","spread","inset","customPropObj","radius","font","variant","weight","stretch","family","lineHeight","grow","basis","wrap","flow","shrink","align","items","content","templateColumns","templateRows","templateAreas","template","autoColumns","autoRows","autoFlow","row","column","rowStart","rowEnd","columnStart","columnEnd","area","gap","rowGap","columnGap","mapValuesByProp","item","objectToArray","processArray","scheme","isFallback","isInArray","customPropsToStyle","baseProp","customProps","propName","_styleDetector","appendedValue","styleDetector","jssExpand","_arrayWithoutHoles","arr","arr2","_iterableToArray","iter","from","_nonIterableSpread","TypeError","_toConsumableArray","js","vendor","browser","isTouch","documentElement","jsCssMap","Moz","O","Webkit","_document$createEleme","testProp","supportedKeyframes","appearence","noPrefill","supportedProperty","colorAdjust","toUpper","camelize","pascalize","mask","longhand","textOrientation","writingMode","userSelect","breakPropsOld","jsProp","_jsProp","inlineLogicalOld","newProp","unprefixed","prefixed","pascalized","scrollSnap","substring","overscrollBehavior","propMap","order","flex2012","propMap$1","propKeys","prefixCss","p","flex2009","multiple","propertyDetectors","filter","a","computed","getComputedStyle","key$1","isNaN","cache$1","transitionProperties","transPropsRegExp","el$1","prefixTransitionCallback","p1","p2","prefixedValue","supportedValue","parseInt","cacheKey","jssVendorPrefixer","atRule","prefixStyle","changeProp","supportedProp","changeValue","supportedValue$$1","jssPropsSort","sort","prop0","prop1","createAndAppendStyles","body","classList","themeClass","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","stack","overlay","createErrorOverlay","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","deps","cached","some","cb"],"mappings":"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,MAAM,QAAQ,GAAG,gEAAjB;;AAEA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,MAApB,EAA4B,CAAC,EAA7B,EAAiC;AAC7B,IAAA,IAAI,IAAI,QAAQ,CAAC,MAAT,CAAgB,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,QAAQ,CAAC,MAApC,CAAhB,CAAR;AACH;;AAED,SAAO,IAAP;AACH;;AC/FD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"client.f5abc9c9.js","sourceRoot":"..\\src","sourcesContent":["export const environment = {\r\n        bot_access_token: null,\r\n        bot_unique_name: \"weatherytesting\",\r\n        enterprise_unique_name: \"ayeshreddy.k\",//\"anirudh.t\",//\r\n        root: \"dev.\",\r\n        consumer: {\r\n            uid: Date.now().toString()\r\n        },\r\n        room: {\r\n            id: null\r\n        },\r\n        logo: \"\"\r\n    }\r\n;\r\n","import {IGetReq, IHeaderData, IPostReq} from \"./typings/http\";\r\n\r\nexport function makeGetReq<T>(reqObj: IGetReq): Promise<T> {\r\n    const xmlHttp = new XMLHttpRequest();\r\n    xmlHttp.open(\"GET\", reqObj.url, true); // true for asynchronous\r\n    setHeaders(xmlHttp, reqObj.headerData);\r\n    xmlHttp.send(null);\r\n    return new Promise((resolve, reject) => {\r\n        xmlHttp.onreadystatechange = function () {\r\n            if (xmlHttp.readyState == 4 && xmlHttp.status == 200)\r\n                resolve(JSON.parse(xmlHttp.responseText));\r\n        }\r\n    })\r\n}\r\n\r\nexport function makePostReq<T>(reqObj: IPostReq): Promise<T> {\r\n\r\n    const xmlHttp = new XMLHttpRequest();\r\n    xmlHttp.open(\"POST\", reqObj.url, true); // true for asynchronous\r\n    setHeaders(xmlHttp, reqObj.headerData);\r\n    xmlHttp.send(JSON.stringify(reqObj.body));\r\n    return new Promise((resolve, reject) => {\r\n        xmlHttp.onreadystatechange = function () {\r\n            if (xmlHttp.readyState == 4 && xmlHttp.status == 200)\r\n                resolve(JSON.parse(xmlHttp.responseText));\r\n        }\r\n    })\r\n}\r\nexport function makePutReq<T>(reqObj: IPostReq): Promise<T> {\r\n\r\n    const xmlHttp = new XMLHttpRequest();\r\n    xmlHttp.open(\"PUT\", reqObj.url, true); // true for asynchronous\r\n    setHeaders(xmlHttp, reqObj.headerData);\r\n    xmlHttp.send(JSON.stringify(reqObj.body));\r\n    return new Promise((resolve, reject) => {\r\n        xmlHttp.onreadystatechange = function () {\r\n            if (xmlHttp.readyState == 4 && xmlHttp.status == 200)\r\n                resolve(JSON.parse(xmlHttp.responseText));\r\n        }\r\n    })\r\n}\r\n\r\n\r\nfunction setHeaders(xmlHttp: XMLHttpRequest, headerData: IHeaderData) {\r\n    if(!headerData){\r\n        return;\r\n    }\r\n    headerData = {\r\n        ...headerData,\r\n        'content-type': 'application/json'\r\n    }\r\n    Object.keys(headerData).forEach((key) => {\r\n        const val = headerData[key];\r\n        if (val) {\r\n            xmlHttp.setRequestHeader(key, val);\r\n        }\r\n    })\r\n}\r\n","import {environment} from \"./environment\";\r\nimport {makeGetReq} from \"./ajax\";\r\n\r\nexport function getBotDetails<T>(): Promise<T> {\r\n    const env = environment;\r\n    const url = `https://${env.root}imibot.ai/api/v1/bot/preview/?bot_unique_name=${env.bot_unique_name}&enterprise_unique_name=${env.enterprise_unique_name}`;\r\n    return makeGetReq<T>({url: url});\r\n    // return {\r\n    //     \"_id\": \"5d91e4b72d72be004bbb1e6c\",\r\n    //     \"active_version_id\": 1032,\r\n    //     \"advanced_data_protection\": false,\r\n    //     \"agent_handover_setting\": {},\r\n    //     \"allow_agent_handover\": false,\r\n    //     \"allow_anonymization\": false,\r\n    //     \"allow_curation\": true,\r\n    //     \"allow_feedback\": false,\r\n    //     \"avatars\": [],\r\n    //     \"blanket_consent\": false,\r\n    //     \"bot_access_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6NTY1LCJyb2xlIjoiYm90In0.3y1POni2vj4II8u0hUjpFMVfInIm5ItrSba4mXoDmSo\",\r\n    //     \"bot_disabled_settings\": {\r\n    //         \"bot_disabled\": false\r\n    //     },\r\n    //     \"bot_metadata\": {},\r\n    //     \"bot_type\": \"chatbot\",\r\n    //     \"bot_unique_name\": \"dewa_gitex_en\",\r\n    //     \"child_bots\": [],\r\n    //     \"consent_categories\": [\r\n    //         \"data_retention\",\r\n    //         \"data_anonymization\"\r\n    //     ],\r\n    //     \"consent_message\": \"\",\r\n    //     \"created_at\": \"2019-09-30T11:19:18.930000\",\r\n    //     \"created_by\": 165,\r\n    //     \"curation_settings\": {},\r\n    //     \"data_persistence_period\": 30,\r\n    //     \"description\": \"Wisdom Virtual Assistant\",\r\n    //     \"enterprise_id\": 99,\r\n    //     \"enterprise_logo\": \"https://upload.wikimedia.org/wikipedia/en/0/0d/DEWA_logo.png\",\r\n    //     \"enterprise_name\": \"DEWA\",\r\n    //     \"error_message\": \"\",\r\n    //     \"first_message\": \"Hi, I am Wisdom, the executive virtual assistance from DEWA. For any inquiry, please type your question.\",\r\n    //     \"heading\": \"\",\r\n    //     \"id\": 565,\r\n    //     \"integrations\": {\r\n    //         \"fulfillment_provider_details\": {\r\n    //             \"imiconnect\": {\r\n    //                 \"appId\": \"\",\r\n    //                 \"appSecret\": \"\",\r\n    //                 \"enabled\": false,\r\n    //                 \"endpoint\": \"\",\r\n    //                 \"send_via_connect\": \"\",\r\n    //                 \"serviceKey\": \"\",\r\n    //                 \"streamName\": \"\"\r\n    //             }\r\n    //         }\r\n    //     },\r\n    //     \"is_manager\": false,\r\n    //     \"logo\": \"https://upload.wikimedia.org/wikipedia/en/0/0d/DEWA_logo.png\",\r\n    //     \"name\": \"DEWA GITEX\",\r\n    //     \"parent_bots\": [],\r\n    //     \"room_close_callback\": false,\r\n    //     \"room_persistence_time\": 240,\r\n    //     \"updated_at\": \"2019-10-03T09:57:20.415000\",\r\n    //     \"updated_by\": 165\r\n    // }\r\n}\r\n","export interface ISendApiReq {\r\n    \"consumer\": {\r\n        \"uid\": string\r\n    },\r\n    \"type\": \"human\" | \"bot\",\r\n    \"msg\": string,\r\n    \"platform\": \"web\",\r\n    \"is_test\": false\r\n}\r\n\r\nexport interface ISendApiResp {\r\n    \"TimeStamp\"?: 1567167604976,\r\n    \"bot_message_id\"?: 750126,\r\n    \"bot_msg\"?: \"\",\r\n    \"extra_params\"?: {},\r\n    \"extras\"?: {},\r\n    \"generated_msg\"?: IGeneratedMessageItem[],\r\n    \"messageStore\"?: {\r\n        \"agent_handover_by_rules\": true,\r\n        \"corpus_id\": 183,\r\n        \"n_sections\": [\r\n            {\r\n                \"first_question\": \"What can you do?\",\r\n                \"score\": 0,\r\n                \"section_id\": \"help\"\r\n            },\r\n            {\r\n                \"first_question\": \"Talk to an agent\",\r\n                \"score\": 0,\r\n                \"section_id\": \"agent\"\r\n            },\r\n            {\r\n                \"first_question\": \"hi\",\r\n                \"score\": 0,\r\n                \"section_id\": \"3\"\r\n            }\r\n        ],\r\n        \"partial_match_sections\"?: [],\r\n        \"response_type\": \"\",\r\n        \"sendtoagent\": true,\r\n        \"thresholding_scores\": {\r\n            \"n_results\": 3,\r\n            \"threshold_diff_score\": 0.05,\r\n            \"threshold_min_score\": 0.3\r\n        },\r\n        \"top_match_section\": {\r\n            \"first_question\": \"Fallback Message\",\r\n            \"score\": 0,\r\n            \"section_id\": \"fallback\"\r\n        }\r\n    },\r\n    \"partial_match\": false,\r\n    \"platform\": \"web\",\r\n    \"progressive\": false,\r\n    \"response_flag\": true,\r\n    \"room\"?: {\r\n        \"_id\": \"5d6914615f6218003a58df90\",\r\n        \"agent_handover\": false,\r\n        \"agent_handover_rules_count\": {\r\n            \"consecutive_count\": 0,\r\n            \"fallback_count\": 0,\r\n            \"last_triggered\": \"\",\r\n            \"partial_match_count\": 0\r\n        },\r\n        \"allow_anonymization\": false,\r\n        \"bot_disabled\": false,\r\n        \"bot_id\": 579,\r\n        \"callback\": false,\r\n        \"channels\": [\r\n            \"web\"\r\n        ],\r\n        \"consent_permissions\": [],\r\n        \"consumer_id\": 51598,\r\n        \"created_at\": 1567167585592,\r\n        \"cross_retention_period\": false,\r\n        \"data_store\": {},\r\n        \"df_state\": {},\r\n        \"downvoted_message_count\": 0,\r\n        \"error_message_count\": 0,\r\n        \"feedback_count\": {\r\n            \"downvote\": 0,\r\n            \"upvote\": 0\r\n        },\r\n        \"id\": 178123,\r\n        \"imichat_agent\": {},\r\n        \"imiconnect_conversation_id\": \"\",\r\n        \"is_anonymized\": false,\r\n        \"is_test\": true,\r\n        \"last_message_time\": \"2019-08-30T12:20:04.972483\",\r\n        \"last_updated_job_id\": \"5d6914745d2301cf1b2f3e22\",\r\n        \"manager_bot_room_id\": 0,\r\n        \"message_count\": {\r\n            \"agent\": 0,\r\n            \"bot\": 3,\r\n            \"total\": 5,\r\n            \"user\": 2\r\n        },\r\n        \"room_state_closed\": false,\r\n        \"selected_avatar\": {},\r\n        \"sendtoagent_count\": 1,\r\n        \"session_id\": \"\",\r\n        \"total_message_count\": 5,\r\n        \"updated_at\": 1567167604972,\r\n        \"upvoted_message_count\": 0\r\n    },\r\n    \"section_matched\": [\r\n        {\r\n            \"first_question\": \"Fallback Message\",\r\n            \"score\": 0,\r\n            \"section_id\": \"fallback\"\r\n        }\r\n    ],\r\n    \"sendtoagent\": true,\r\n    \"thresholding_scores\": {\r\n        \"n_results\": 3,\r\n        \"threshold_diff_score\": 0.05,\r\n        \"threshold_min_score\": 0.3\r\n    },\r\n    \"transaction_id\": \"27095eaec4624e63bab672d9e9002771\"\r\n}\r\n\r\n/*from bot project*/\r\n\r\n\r\nexport interface ISendApiRequestPayload {\r\n    'bot_id': string;\r\n    'consumer': {\r\n        '_id'?: string,\r\n        'botId': string,\r\n        'consentAcknowledged': boolean,\r\n        'consentPermissions': any[],\r\n        'consumerDataStore': object,\r\n        'created_at': string,\r\n        'email': string,\r\n        'extra_params': string,\r\n        'facebookId': string,\r\n        'lineId': string,\r\n        'name': string,\r\n        'phone': string,\r\n        'skypeId': string,\r\n        'uid': string,\r\n        'updated_at': string\r\n    };\r\n\r\n    'type': string;\r\n    'msg': string;\r\n    'platform': string;\r\n}\r\n\r\nexport interface IGeneratedMessageItem {\r\n    'text'?: string;\r\n    bot_message_id?: number;\r\n    'media'?: any;\r\n    // {\r\n    //   'buttons': [\r\n    //     {\r\n    //       'title': 'URL Button',\r\n    //       'type': 'web_url', //title\r\n    //       'url': 'https://www.messenger.com/'/*TODO: we are not getting payload*/\r\n    //     }\r\n    //     ],\r\n    //   'title': 'this is sample text for image ,it is optional', //use this\r\n    //   'type': EBotMessageMediaType//\"image\",//use this\r\n    //   'url': 'https://wallpaperbrowse.com/media/images/soap-bubble-1958650_960_720.jpg'//use this\r\n    //   'video_url': string\r\n    //   'audio_url': string\r\n    //   'image_url': string\r\n    // }[],\r\n\r\n    quick_reply?: {\r\n        'quick_replies': [\r\n            {\r\n                'content_type': 'text',\r\n                'payload': 'Play Game',\r\n                'title': 'Play Game'\r\n            }],\r\n        'text': 'Do you want to play game or validate coupon?<br>Select any'\r\n    };\r\n\r\n}\r\n\r\nexport interface ISendApiResponsePayload {\r\n    'TimeStamp': 1533902788.0;\r\n    'bot_msg': string;\r\n    isLast: boolean,\r\n    bot_message_id: number;\r\n    'generated_msg': IGeneratedMessageItem[];\r\n    'messageStore': { 'endflow': true, 'templateKey': 'A1', response_language: string };\r\n    'room': {\r\n        'agent_handover': false,\r\n        'allow_anonymization': false,\r\n        'bot_id': number// 1,\r\n        'consent_permissions': any[],\r\n        'consumer_id': number, // 43,\r\n        'cross_retention_period': false,\r\n        'data_store': {},\r\n        'df_state': {\r\n            'answer': 'hi', 'question': 'hi'\r\n        },\r\n        'id': number,\r\n        'imichat_agent': {},\r\n        'is_anonymized': false,\r\n        'last_updated_job_id': '5b6d7fc4736453000587246a',\r\n        'manager_bot_room_id': 0,\r\n        'resource_uri': '/api/v1/room/64/',\r\n        'room_state_closed': false,\r\n        'selected_avatar': any\r\n    };\r\n    'sendtoagent': false;\r\n    'templateKey': 'A1';\r\n    'transaction_id': '79f2707b0d2c419198febf0ccaaa4b99';\r\n    // 'generated_msg': [{\r\n    //     'text': string\r\n    //   }],\r\n    // 'room': {\r\n    //   '_id': string,\r\n    //   'agentHandOver': false,\r\n    //   'botId': number,\r\n    //   'consentAcknowledged': true,\r\n    //   'consumerId': {\r\n    //     '_id': string,\r\n    //     'botId': string,\r\n    //     'consentAcknowledged': true,\r\n    //     'consentPermissions': {\r\n    //         'permission': string,\r\n    //         'status': string\r\n    //       }[],\r\n    //     'consumerDataStore': {},\r\n    //     'created_at': string,\r\n    //     'email': string,\r\n    //     'extra_params': string,\r\n    //     'facebookId': string,\r\n    //     'lineId': string,\r\n    //     'name': string,\r\n    //     'phone': string,\r\n    //     'skypeId': string,\r\n    //     'uid': string,\r\n    //     'updated_at': string\r\n    //   },\r\n    //   'created_at': string,\r\n    //   'managerBotRoomId': null,\r\n    //   'room_state_closed': false,\r\n    //   'bot': {\r\n    //     'roomId': 1,\r\n    //     'imageUrl': string,\r\n    //     'name': string\r\n    //   },\r\n    //   'updated_at': string\r\n    // },\r\n    // 'transaction_id': string\r\n}\r\n\r\nexport enum EChatFrame {\r\n    WELCOME_BOX = 'WELCOME_BOX',\r\n    CHAT_LIST = 'CHAT_LIST',\r\n    CHAT_BOX = 'CHAT_BOX',\r\n}\r\n\r\nexport enum EBotMessageMediaType {\r\n    image = 'image',\r\n    text = 'text',\r\n    quickReply = 'quickReply',\r\n    bot_thinking = 'bot_thinking'\r\n}\r\n\r\nexport enum ESourceType {\r\n    bot = \"bot\",\r\n    human = \"human\",\r\n}\r\n\r\nexport interface IMessageData extends IGeneratedMessageItem {\r\n    /*custom fields*/\r\n    SESSION_EXPIRY?: true\r\n    sourceType?: ESourceType; // TODO: \"timePeriod\" ||\"human\", gives error, see why\r\n    time?: number;\r\n    messageMediaType?: EBotMessageMediaType;\r\n    bot_message_id?: number;\r\n    feedback?: any;\r\n    isLast?: boolean;\r\n    response_language?: string;\r\n    video?: {url:string},\r\n    audio?: {url:string},\r\n    image?: {url:string},\r\n    media?: {\r\n        audio_url: string,\r\n        image_url: string,\r\n        video_url: string,\r\n        length: null\r\n    }\r\n}\r\n","import {$chatBody} from \"./dom\";\r\n\r\nexport function getTimeInHHMM(timeMS) {\r\n    const time = timeMS ? new Date(timeMS) : new Date();\r\n    var hours = time.getHours();\r\n    var minutes = time.getMinutes();\r\n    var ampm = hours >= 12 ? 'PM' : 'AM';\r\n    hours = hours % 12;\r\n    hours = hours ? hours : 12; // the hour '0' should be '12'\r\n    minutes = minutes < 10 ? '0'+minutes : minutes;\r\n    var strTime = hours + ':' + minutes + ' ' + ampm;\r\n    return strTime;\r\n}\r\n\r\nexport function getTimeIn24HrFormat(timeMS) {\r\n    const time = timeMS ? new Date(timeMS) : new Date();\r\n    return time.getHours() + \":\" + time.getMinutes();\r\n}\r\n\r\nexport function getQueryStringValue(key) {\r\n    return decodeURIComponent(window.location.search.replace(new RegExp(\"^(?:.*[&\\\\?]\" + encodeURIComponent(key).replace(/[\\.\\+\\*]/g, \"\\\\$&\") + \"(?:\\\\=([^&]*))?)?.*$\", \"i\"), \"$1\"));\r\n}\r\n\r\nexport function updateQueryStringParameter(uri, key, value) {\r\n    let re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\r\n    let separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\r\n    if (uri.match(re)) {\r\n        return uri.replace(re, '$1' + key + \"=\" + value + '$2');\r\n    } else {\r\n        return uri + separator + key + \"=\" + value;\r\n    }\r\n}\r\n\r\nexport function encodeUrlForDomParser(url) {\r\n    url = url.split(\"&\").join(\"&amp;\");\r\n    return url;\r\n}\r\n\r\nexport function scrollBodyToBottom() {\r\n    $chatBody.scrollTop = $chatBody.scrollHeight\r\n}\r\n\r\nexport function convertStringToDom(str: string) {\r\n\r\n    const el = document.createElement('template');\r\n    // const el = document.createElement('DIV');\r\n    el.innerHTML = str;\r\n    let x = el.content.children;\r\n    return x;\r\n}\r\n\r\nexport function removeInActiveFeedbackPanel($chatbody: HTMLElement) {\r\n\r\n    const askFeedbackPanels = $chatBody.getElementsByClassName('msg-bubble-options-panel');\r\n    Array.from(askFeedbackPanels).forEach((panel: HTMLElement) => {\r\n        const isActive = panel && panel.querySelector('.feedback.active');\r\n        if (!isActive) {\r\n            panel && panel.parentElement.removeChild(panel);\r\n        }\r\n    })\r\n}\r\n","import {ESourceType} from \"../typings/send-api\";\r\nimport {convertStringToDom} from \"../utility\";\r\n\r\nexport class TextReply {\r\n    constructor(message){}\r\n\r\n    getTemplate(text, source?: ESourceType) {\r\n        const htmlStr = `\r\n                <div class=\"message-wrapper ${source === ESourceType.human ? 'message-wrapper-human' : ''}\">\r\n                    <div class=\"content\">${text}</div>\r\n                </div>\r\n            `;\r\n        return htmlStr;\r\n    }\r\n\r\n    getElement(text, source?: ESourceType) {\r\n\r\n        const str = this.getTemplate(text.text, source);\r\n        return convertStringToDom(str);\r\n    }\r\n}\r\n","import {ESourceType} from \"../typings/send-api\";\r\nimport {convertStringToDom} from \"../utility\";\r\n\r\nexport class SessionExpiry {\r\n    constructor(message){}\r\n\r\n    getTemplate(text, source?: ESourceType) {\r\n        const htmlStr = `\r\n                <div class=\"session-expiry-message\" xmlns=\"http://www.w3.org/1999/xhtml\">\r\n                    <div class=\"div\" style=\"width: 70%; display: flex; align-items: center;\" >\r\n                        <hr style=\"border: 1px solid #80808030; flex-grow: 1; \"/>\r\n                        <div style=\"padding: 0 10px\">Session expired</div>\r\n                        <hr style=\"border: 1px solid #80808030; flex-grow: 1;\"/>\r\n                        \r\n                    </div>\r\n                </div>\r\n            `;\r\n        return htmlStr;\r\n    }\r\n\r\n    getElement(text, source?: ESourceType) {\r\n        const str = this.getTemplate(text, source);\r\n        return convertStringToDom(str);\r\n    }\r\n}","import {ESourceType} from \"../typings/send-api\";\r\nimport {convertStringToDom} from \"../utility\";\r\n\r\nexport class QuickReply {\r\n    constructor(message) {\r\n    }\r\n    getElement(quick_reply, source?: ESourceType) {\r\n        const str = this.getTemplate(quick_reply, source);\r\n        return convertStringToDom(str);\r\n    }\r\n\r\n    getTemplate(quick_reply, source?: ESourceType) {\r\n        const htmlStr = `\r\n                <div class=\"message-wrapper ${source === ESourceType.human ? 'message-wrapper-human' : ''}\">\r\n                    <div class=\"content\">${quick_reply.text}</div>\r\n                </div>\r\n                <div class=\"message-wrapper-quick-reply\">\r\n                    ${this.createQuickReplyButtons(quick_reply)}\r\n                </div>\r\n            `;\r\n        return htmlStr;\r\n    }\r\n\r\n    createQuickReplyButtons(quick_reply) {\r\n        let str = \"\";\r\n        quick_reply.quick_replies.forEach((quick_reply) => {\r\n            str = str + `<button data-payload=\"${quick_reply.payload}\">${quick_reply.title}</button>`\r\n        });\r\n\r\n        return str;\r\n    }\r\n}","import {ESourceType} from \"../typings/send-api\";\r\nimport {convertStringToDom} from \"../utility\";\r\n\r\nexport class CarouselReply {\r\n    media;\r\n    constructor(message){\r\n        this.media = message;\r\n    }\r\n\r\n    getElement(text, source?: ESourceType) {\r\n        const str = this.getTemplate(text, source);\r\n        let x = convertStringToDom(str);\r\n        return x;\r\n    }\r\n\r\n    getTemplate(text, source?: ESourceType) {\r\n        const carousalStr = this.createCarousalStr(this.media);\r\n        let controlStr = `<div class=\"fa fa-angle-left control control-left\"></div>\r\n                   <div class=\"fa fa-angle-right control control-right\"></div>`;\r\n        if(this.media.length <= 2){\r\n            controlStr = \"\";\r\n        }\r\n        return `\r\n               <div class=\"carousal-container hide-left-control\" data-step=\"0\">\r\n                   <div class=\"carousal-container-inner\">\r\n                        ${carousalStr}\r\n                   </div>\r\n                    ${controlStr}\r\n                </div>\r\n            `;\r\n    }\r\n\r\n    createCarousalStr(media) {\r\n        let str = \"\";\r\n        media.forEach((mediaItem) => {\r\n            str = str + this.createCarousalItems(mediaItem);\r\n        });\r\n        return str;\r\n    }\r\n\r\n    createCarousalItems(mediaItem: any) {\r\n        let url = mediaItem.url.split(\"&\").join(\"&amp;\");\r\n        return `\r\n    <div class=\"item\">\r\n            <div class=\"bot-carousal-item shadow-theme\">\r\n                <div class=\"banner\" style=\"background-image: url(${url})\"></div>\r\n                <ul style=\"list-style: none\">\r\n                    <li class=\"title\" style=\"text-align: center\">\r\n                        ${mediaItem.title}\r\n                    </li>\r\n                    ${this.createCarousalButtons(mediaItem.buttons)}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    `\r\n    }\r\n\r\n    createCarousalButtons(buttons) {\r\n        let str = \"\";\r\n        buttons.forEach((button) => {\r\n            str = str + `\r\n            <li class=\"action\" data-payload=\"${button.payload}\" data-type=\"${button.type}\">${button.title}</li>\r\n        `;\r\n        });\r\n        return str;\r\n    }\r\n}\r\n","import {ESourceType} from \"../typings/send-api\";\r\nimport {convertStringToDom, encodeUrlForDomParser} from \"../utility\";\r\n\r\nexport class AudioReply {\r\n    constructor(message){}\r\n\r\n    getTemplate(url, source?: ESourceType) {\r\n        url = encodeUrlForDomParser(url);\r\n        const htmlStr = `\r\n                <div class=\"message-wrapper  message-wrapper-bot\" style=\"width: 100%; animation-fill-mode: none\">\r\n                    <audio controls=\"controls\" style=\"max-width: 233px\">\r\n                          <source src=\"${encodeUrlForDomParser(url)}\"/>\r\n                        Your browser does not support the audio element.\r\n                    </audio>\r\n                </div>\r\n            `;\r\n        return htmlStr;\r\n    }\r\n\r\n    getElement(text, source?: ESourceType) {\r\n        const str = this.getTemplate(text, source);\r\n        return convertStringToDom(str);\r\n    }\r\n}\r\n","import {ESourceType} from \"../typings/send-api\";\r\nimport {convertStringToDom, encodeUrlForDomParser} from \"../utility\";\r\n\r\nexport class ImageReply {\r\n    constructor(message){}\r\n\r\n    getTemplate(url) {\r\n        url = encodeUrlForDomParser(url);\r\n        const htmlStr = `\r\n                <div class=\"message-wrapper message-wrapper-bot msg-shadow\" style=\"max-width: 357px; border-radius: 8px; overflow: hidden\">\r\n                    <img \r\n                    style=\"width: 100%\" \r\n                    class=\"msg-img click-to-zoom\" src=\"${url}\" alt=\"\"/>\r\n                </div>\r\n            `;\r\n        return htmlStr;\r\n    }\r\n    getElement(text, source?: ESourceType) {\r\n        const str = this.getTemplate(text);\r\n        return convertStringToDom(str);\r\n    }\r\n}\r\n","import {environment} from \"../environment\";\r\nimport {ESourceType} from \"../typings/send-api\";\r\nimport {convertStringToDom} from \"../utility\";\r\n\r\nexport class Feedback {\r\n    constructor() {\r\n        console.log('feedback');\r\n    }\r\n\r\n    getElement(obj, source?: ESourceType) {\r\n\r\n        const str = this.getTemplate(obj);\r\n        return convertStringToDom(str);\r\n    }\r\n\r\n    getTemplate({txnId, bot_message_id, humanClass, isLast, feedbackSTr, likeActive, disLikeActive, time, str, randomNumber, hideFeedback}) {\r\n\r\n        const askFeedbackClass = (likeActive || disLikeActive) ? '' : 'ask-feedback';\r\n        let feedbackHtml = `\r\n        <div class=\"msg-bubble-options-panel ${askFeedbackClass}\" ${feedbackSTr}>\r\n                    <div class=\"feedback  ${likeActive}\" data-feedback-value=\"1\" title=\"Helpful\">\r\n                         <i class=\"fa fa-thumbs-up feedback-like\" data-feedback-value=\"1\"></i>\r\n                         <span class=\"feedback-like ask-label\" data-feedback-value=\"1\">Upvote</span>\r\n                         <span class=\"feedback-like final-label\" data-feedback-value=\"1\">Upvoted</span>\r\n                    </div>\r\n                    <div class=\"feedback ${disLikeActive}\" title=\"Not helpful\" data-feedback-value=\"0\">\r\n                        <i class=\"fa fa-thumbs-down feedback-dislike\" data-feedback-value=\"0\"></i>\r\n                        <span class=\"feedback-like ask-label\" data-feedback-value=\"0\">Downvote</span>\r\n                        <span class=\"feedback-dislike final-label\" data-feedback-value=\"0\">Downvoted</span>\r\n                    </div>\r\n                </div>\r\n        `;\r\n\r\n        if (hideFeedback) {\r\n            feedbackHtml = ``;\r\n        }\r\n\r\n        return `<div xmlns=\"http://www.w3.org/1999/xhtml\" data-txn=\"${txnId}\"  data-bot_message_id=\"${bot_message_id}\"\r\n             class=\"msg-bubble ${humanClass}\" style=\"position:relative;\">\r\n            \r\n             <div class=\"msg-bot-logo\">\r\n                    <img \r\n                    src=\"${humanClass ? 'https://www.dewa.gov.ae/images/user.png' : environment.logo}\"\r\n                    onerror=\"this.src='https://imibot-production.s3-eu-west-1.amazonaws.com/integrations/v2/default-fallback-image.png'\"\r\n                     style=\"height: 100%; width: 100%\" />\r\n                </div>       \r\n                <div class=\"message-container\" data-id=\"${randomNumber}\">\r\n                    <div \">\r\n                    ${isLast ? feedbackHtml : ''}\r\n                    <div class=\"time\" style=\"font-size: 9px\">${time}</div>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>`;\r\n    }\r\n}\r\n","import {ESourceType} from \"../typings/send-api\";\r\nimport {convertStringToDom} from \"../utility\";\r\nimport {Reply} from \"./reply\";\r\n\r\nexport class VideoReply {\r\n\r\n    getTemplate(url) {\r\n        const htmlStr = `\r\n                <div class=\"message-wrapper  message-wrapper-bot msg-video\" style=\"animation-fill-mode: none!important;\">\r\n                     <video muted=\"muted\"  class=\"msg-video\" controls=\"true\" playsinline=\"playsinline\" >\r\n                            <source src=\"${url}\"/>\r\n                                Your browser does not support HTML5 video.\r\n                       </video>           \r\n                </div>\r\n            `;\r\n        return htmlStr;\r\n    }\r\n\r\n    getElement(url) {\r\n        const str = this.getTemplate(url);\r\n        return convertStringToDom(str);\r\n    }\r\n}\r\n","import {ESourceType, IMessageData, ISendApiResp, ISendApiResponsePayload} from \"./typings/send-api\";\r\nimport {\r\n    encodeUrlForDomParser,\r\n    getTimeIn24HrFormat,\r\n    getTimeInHHMM,\r\n    removeInActiveFeedbackPanel,\r\n    scrollBodyToBottom\r\n} from \"./utility\";\r\nimport {IBotDetailsApiResp} from \"./typings/bot-detaills-api\";\r\nimport {environment} from \"./environment\";\r\nimport {TextReply} from \"./response-components/text-reply\";\r\nimport {SessionExpiry} from \"./response-components/session-expiry\";\r\nimport {QuickReply} from \"./response-components/quick-reply\";\r\nimport {CarouselReply} from \"./response-components/carousel-reply\";\r\nimport {AudioReply} from \"./response-components/audio-reply\";\r\nimport {ImageReply} from \"./response-components/image-reply\";\r\nimport {Feedback} from \"./response-components/feedback\";\r\nimport {VideoReply} from \"./response-components/video-reply\";\r\n\r\nexport let $chatInput;\r\nexport let $chatInputIcon;\r\nexport let $botIntro;\r\nexport let $chatBody;\r\nexport let $chatFooter;\r\nexport let $loader;\r\nexport let $envOptions;\r\nexport let $botTitle;\r\nexport let $botDescription;\r\nexport let $botLogo;\r\nexport let $phoneModel;\r\nexport let $langSelect;\r\nexport let $langSubmit;\r\nexport let $chatContainer;\r\nexport let $knowMoreContainer;\r\nexport let $knowMoreClose;\r\nexport let $knowMoreOverlay;\r\nexport const botResponses: ISendApiResp[] = [];\r\n\r\nexport const themeOptions;\r\n\r\nexport function domInit(dom) {\r\n    $chatContainer = document.querySelector('.imi-preview-grid-container');\r\n    // $chatInput = document.getElementById('chat-input') as HTMLInputElement;\r\n    $chatInput = dom.$chatInput;\r\n    $chatInputIcon = document.getElementById('chat-input-icon') as HTMLInputElement;\r\n    $botIntro = document.getElementById('botIntro');\r\n    $chatBody = document.getElementById('body');\r\n    $chatFooter = document.getElementsByClassName('footer')[0];\r\n    $loader = document.getElementsByClassName('loader')[0];\r\n    $envOptions = document.getElementById('env-options');\r\n    $botTitle = document.getElementById('bot-title');\r\n    $botDescription = document.getElementById('bot-description');\r\n    $botLogo = document.getElementById('bot-logo') as HTMLImageElement;\r\n    $phoneModel = document.getElementById('phone-modal');\r\n    $langSelect = document.getElementById('lang-select') as HTMLSelectElement;\r\n    $langSubmit = document.getElementById('lang-submit');\r\n\r\n    $knowMoreContainer = document.getElementsByClassName('chat-know-more-overlay')[0];\r\n    $knowMoreClose = document.getElementsByClassName('close-chat-img-overlay')[0];\r\n    $knowMoreOverlay = document.getElementsByClassName('chat-img-overlay')[0];\r\n}\r\n\r\nexport function setOptions(intro: IBotDetailsApiResp) {\r\n\r\n    if ($botLogo) {\r\n        $botLogo.src = intro.logo;//intro.logo;\r\n    }\r\n    if ($botTitle) {\r\n        $botTitle.textContent = intro.name;\r\n    }\r\n\r\n    if ($botDescription) {\r\n        $botDescription.textContent = intro.description;\r\n    }\r\n}\r\n\r\nexport function AppendMessageInChatBody(messages: IMessageData[], botResponse?: ISendApiResponsePayload, hideFeedback?) {\r\n\r\n    // if (botResponse) {\r\n    //     if (environment.room && environment.room.id && botResponse.room.id !== environment.room.id) {\r\n    //         AppendMessageInChatBody(<any>[{SESSION_EXPIRY: true}], null, true);\r\n    //         console.log(`previous room : ${environment.room.id}. new room ${botResponse.room.id}`);\r\n    //     }\r\n    //     console.log(environment.room, botResponse.room);\r\n    //     environment.room = JSON.parse(JSON.stringify(botResponse.room));\r\n    // }\r\n\r\n    const txnId = botResponse && botResponse.transaction_id || 'human';\r\n    const bot_message_id = botResponse && botResponse.bot_message_id || 'human';\r\n    let str = \"\";\r\n    let wrapper;\r\n    const replies = [];\r\n    let randomNumber;\r\n    let frag = document.createDocumentFragment();\r\n    let videoStr = \"\";\r\n    if (messages[0].SESSION_EXPIRY) {\r\n\r\n        if (document.getElementsByClassName('msg-bubble').length > 0) {\r\n            const reply = new SessionExpiry(messages[0]);\r\n            // str = str + reply.getTemplate(messages[0]);\r\n            const el = reply.getElement(messages[0]);\r\n            replies.push(el);\r\n        } else {\r\n            return;\r\n        }\r\n    } else {\r\n        if (messages.length === 1 && (<any>messages[0]).sourceType === \"session_expired\") {\r\n            return;\r\n        }\r\n        messages.forEach((message) => {\r\n            if (message.text) {\r\n                // str = str + getBotMessageTemplateForText(message.text, message.sourceType);\r\n                const reply = new TextReply(message);\r\n                // str = str + textReply.getTemplate(message.text, message.sourceType);\r\n                const el = reply.getElement(message);\r\n                replies.push(el);\r\n            }\r\n            if (message.SESSION_EXPIRY) {\r\n                const reply = new SessionExpiry(messages[0]);\r\n                // str = str + reply.getTemplate(messages[0]);\r\n                const el = reply.getElement(messages[0]);\r\n                replies.push(el);\r\n                // str = str + getBotMessageTemplateForSessionExpiry(message.text, message.sourceType);\r\n            }\r\n            if (message.quick_reply) {\r\n                const reply = new QuickReply(messages[0]);\r\n\r\n                // str = str + reply.getTemplate(message.quick_reply, message.sourceType);\r\n                const el = reply.getElement(message.quick_reply, message.sourceType);\r\n                replies.push(el);\r\n                // str = str + getBotMessageTemplateForQuickReply(message.quick_reply, message.sourceType);\r\n            }\r\n            if (message.media || message.image || message.audio || message.video) {\r\n\r\n                let url = \"\";\r\n                let type = \"\";\r\n                if (message.media) {\r\n                    if (Object.keys(message.media)[0].startsWith('audio')) {\r\n                        type = 'audio'\r\n                    }\r\n                    if (Object.keys(message.media)[0].startsWith('video')) {\r\n                        type = 'audio'\r\n                    }\r\n                    if (Object.keys(message.media)[0].startsWith('image')) {\r\n                        type = 'image'\r\n                    }\r\n                    url = message.media.audio_url || message.media.video_url || message.media.image_url;\r\n\r\n                    if (message.media.length) {\r\n                        // str = str + getBotMessageTemplateForCarousal(message.media);\r\n                        const reply = new CarouselReply(message.media);\r\n                        // str = str + reply.getTemplate(message.quick_reply, message.sourceType);\r\n                        const el = reply.getElement(message);\r\n                        replies.push(el);\r\n                    }\r\n                } else {\r\n                    if (Object.keys(message)[0].startsWith('audio')) {\r\n                        type = 'audio'\r\n                    }\r\n                    if (Object.keys(message)[0].startsWith('video')) {\r\n                        type = 'video'\r\n                    }\r\n                    if (Object.keys(message)[0].startsWith('image')) {\r\n                        type = 'image'\r\n                    }\r\n                    url = message[type].url;\r\n                }\r\n                if (type === \"audio\") {\r\n                    // str = str + getBotMessageTemplateForAudio(url);\r\n                    const reply = new AudioReply(message);\r\n                    // str = str + reply.getTemplate(url);\r\n                    const el = reply.getElement(url);\r\n                    replies.push(el);\r\n                }\r\n                if (type === \"video\") {\r\n                    const reply = new VideoReply();\r\n                    const el = reply.getElement(url);\r\n                    replies.push(el);\r\n                    // str = str + getBotMessageTemplateForVideo(url);\r\n                    // url = encodeUrlForDomParser(url);\r\n                    //     videoStr = videoStr + `<video muted=\"muted\"  class=\"msg-video\" controls=\"true\" playsinline=\"playsinline\">\r\n                    // <source src=\"${url}\"/>\r\n                    //     Your browser does not support HTML5 video.\r\n                    // </video>`;\r\n                }\r\n                if (type === \"image\") {\r\n                    // str = str + getBotMessageTemplateForImage(url);\r\n                    const reply = new ImageReply(message);\r\n                    // str = str + reply.getTemplate(url);\r\n                    const el = reply.getElement(url);\r\n                    replies.push(el);\r\n                }\r\n            }\r\n        });\r\n\r\n        let humanClass = messages[0].sourceType === ESourceType.human ? 'msg-bubble-human' : '';\r\n        let time = themeOptions.time24HrFormat? getTimeIn24HrFormat(messages[0].time): getTimeInHHMM(messages[0].time);\r\n\r\n        let feedbackSTr = \"\";\r\n        const messageWithFeedback = (messages.find((message) => message.feedback != null));\r\n        let likeActive;\r\n        let disLikeActive;\r\n        if (messageWithFeedback) {\r\n            const feedback = messageWithFeedback.feedback\r\n            likeActive = (feedback === \"1\" || feedback === \"POSITIVE\") ? 'active' : '';\r\n            disLikeActive = (feedback === \"0\" || feedback === \"NEGATIVE\") ? 'active' : '';\r\n            feedbackSTr = `data-feedback=\"${feedback}\"`;\r\n        }\r\n\r\n        const feedback = new Feedback();\r\n        randomNumber = Date.now() + Math.floor(Math.random() * 100000000);\r\n        const isLast = true;\r\n        // str =  feedback.getTemplate({txnId, bot_message_id, humanClass, isLast, feedbackSTr, likeActive, disLikeActive, time, str, randomNumber });\r\n        wrapper = feedback.getElement({\r\n            txnId,\r\n            bot_message_id,\r\n            humanClass,\r\n            isLast,\r\n            feedbackSTr,\r\n            likeActive,\r\n            disLikeActive,\r\n            time,\r\n            str,\r\n            randomNumber,\r\n            hideFeedback\r\n        })[0];\r\n    }\r\n\r\n\r\n    // const el = getElementsFromHtmlStr(str) as HTMLElement;\r\n    const el = document.createElement('template');\r\n    // const el = document.createElement('DIV');\r\n    el.innerHTML = str;\r\n    const carousal = el.content.querySelector('.carousal-container') as HTMLElement;\r\n\r\n    replies.forEach((children: HTMLElement[]) => {\r\n        Array.from(children).forEach((child) => {\r\n            frag.appendChild(child);\r\n        })\r\n    });\r\n    let location;\r\n    location = wrapper.querySelector(`[data-id=\"${randomNumber}\"]`) as HTMLElement;\r\n    // location.appendChild(frag);\r\n    location.insertBefore(frag, location.firstElementChild);\r\n    // frag.appendChild(el.content);\r\n    // const askFeedback = $chatBody.querySelector('.msg-bubble-options-panel');\r\n    // const isActive = askFeedback && askFeedback.querySelector('.feedback.active');\r\n    // if (!isActive) {\r\n    //     askFeedback && askFeedback.parentElement.removeChild(askFeedback);\r\n    // }\r\n    removeInActiveFeedbackPanel($chatBody);\r\n    $chatBody.appendChild(wrapper);\r\n\r\n\r\n    if (carousal) {\r\n        let carousalWidth = $chatBody.offsetWidth as any - 60;\r\n        let dataItemToShow = '1';\r\n        if (carousalWidth > 0 && carousalWidth < 225) {\r\n            dataItemToShow = '1';\r\n        } else {\r\n            if (carousalWidth > 0 && carousalWidth < 450) {\r\n                dataItemToShow = '2';\r\n            } else if (carousalWidth >= 450 && carousalWidth < 675) {\r\n                carousalWidth = 450;\r\n                dataItemToShow = '2';\r\n            } else if (carousalWidth >= 675) {\r\n                carousalWidth = 675;\r\n                dataItemToShow = '3';\r\n            }\r\n        }\r\n        carousal.setAttribute('data-itemToShow', dataItemToShow);\r\n\r\n        let carousalItemCount = carousal.getElementsByClassName('item').length;\r\n        if (carousalItemCount <= Number(dataItemToShow)) {\r\n            carousal.classList.add('no-controls');\r\n        }\r\n        carousal.style.width = carousalWidth + 'px';\r\n        carousal.style.opacity = '1';\r\n    }\r\n    // let msgVid = document.getElementsByClassName('msg-video');\r\n    // if (videoStr) {\r\n    //     const lastMsgVid = msgVid[msgVid.length - 1];\r\n    //     lastMsgVid.innerHTML = videoStr;\r\n    // }\r\n    // resetChatInput();\r\n    scrollBodyToBottom();\r\n}\r\n\r\n\r\n// function getBotMessageTemplateForVideo(url: string) {\r\n//     const htmlStr = `\r\n//                 <div class=\"message-wrapper  message-wrapper-bot msg-video\">\r\n//                      <video muted=\"muted\"  class=\"msg-video\" controls=\"true\" playsinline=\"playsinline\">\r\n//                             <source src=\"${url}\"/>\r\n//                                 Your browser does not support HTML5 video.\r\n//                        </video>\r\n//                 </div>\r\n//             `;\r\n//     return htmlStr;\r\n// }\r\n","import {makePostReq, makePutReq} from \"./ajax\";\r\nimport {environment} from \"./environment\";\r\nimport {IHeaderData} from \"./typings/http\";\r\nimport {EBotMessageMediaType, ESourceType, IGeneratedMessageItem, IMessageData, ISendApiResp} from \"./typings/send-api\";\r\n\r\nexport const socketKey = createRandomString(15);\r\n\r\nexport function sendMessageToBot(bot_access_token: string, enterprise_unique_name: string, humanMessage: string, sourceType: ESourceType, payload?:string): Promise<ISendApiResp> {\r\n    const url = `https://${environment.root}imibot.ai/api/v1/webhook/web/`;\r\n    const body = {\r\n        \"consumer\": {\r\n            ...(environment.consumer || {}),\r\n            \"extra_params\": {\r\n                \"socket_key\": socketKey\r\n            }\r\n        },\r\n        \"type\": sourceType || ESourceType.human,\r\n        \"msg\": payload || humanMessage,\r\n        \"platform\": \"web\",\r\n        \"is_test\": false\r\n    };\r\n\r\n    const headerData: IHeaderData = {\r\n        // enterprise_unique_name: enterprise_unique_name,\r\n        \"bot-access-token\": bot_access_token\r\n    };\r\n    return makePostReq<ISendApiResp>({url, body, headerData})\r\n}\r\n\r\n\r\nexport function sendFeedback(body: { \"bot_message_id\": number, \"feedback\": string, \"consumer_id\": number }): Promise<ISendApiResp> {\r\n\r\n    const url = `https://${environment.root}imibot.ai/api/v1/message/feedback/`;//https://dev.imibot.ai/api/v1/message/feedback/\r\n\r\n    const headerData: IHeaderData = {\r\n        // enterprise_unique_name: enterprise_unique_name,\r\n        \"bot-access-token\": environment.bot_access_token\r\n    };\r\n    return makePutReq<ISendApiResp>({url, body, headerData});\r\n}\r\n\r\n\r\nexport function serializeGeneratedMessagesToPreviewMessages(generatedMessage: IGeneratedMessageItem[], bot_message_id?: number, response_language?): IMessageData[] {\r\n\r\n    return generatedMessage.map((message: IGeneratedMessageItem, index) => {\r\n        const isLast = index === generatedMessage.length - 1;\r\n        let messageData: IMessageData = {\r\n            ...message,\r\n            bot_message_id,\r\n            time: Date.now(),\r\n            messageMediaType: null,\r\n            sourceType: ESourceType.bot,\r\n            isLast,\r\n            response_language\r\n        };\r\n\r\n        try {\r\n            if (Object.keys(message)[0] === 'media') {\r\n                messageData = {\r\n                    ...messageData,\r\n                    messageMediaType: message.media[0] && message.media[0].type,\r\n                    // text: EBotMessageMediaType.image, // this is for preview of last message in chat room list,\r\n                };\r\n            } else if (Object.keys(message)[0] === 'quick_reply') {\r\n                messageData = {\r\n                    ...messageData,\r\n                    messageMediaType: EBotMessageMediaType.quickReply, //\r\n                    // text: (<any>message).quick_reply.text || EBotMessageMediaType.quickReply, // this is for preview of last message in chat room list\r\n                };\r\n            } else {\r\n                /*if message type = text*/\r\n                messageData = {\r\n                    ...messageData,\r\n                    messageMediaType: EBotMessageMediaType.text,\r\n                };\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n        return messageData;\r\n\r\n\r\n    });\r\n}\r\n\r\nfunction createRandomString(length: number = 10) {\r\n    let text = '';\r\n    const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\n    for (let i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return text;\r\n}\r\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import {\r\n    $chatBody, $chatContainer,\r\n    $chatFooter,\r\n    $chatInput,\r\n    $chatInputIcon,\r\n    $envOptions, $knowMoreClose, $knowMoreContainer, $knowMoreOverlay,\r\n    $langSelect,\r\n    $langSubmit,\r\n    $loader,\r\n    $phoneModel,\r\n    AppendMessageInChatBody, botResponses,\r\n    domInit, themeOptions,\r\n    setOptions\r\n} from \"./dom\";\r\nimport {getBotDetails} from \"./bot-details\";\r\nimport {IBotDetailsApiResp} from \"./typings/bot-detaills-api\";\r\nimport 'regenerator-runtime/runtime'\r\nimport {sendFeedback, sendMessageToBot, serializeGeneratedMessagesToPreviewMessages} from \"./send-api\";\r\nimport {environment} from \"./environment\";\r\nimport {ESourceType, ISendApiResp, ISendApiResponsePayload} from \"./typings/send-api\";\r\nimport {getQueryStringValue, updateQueryStringParameter} from \"./utility\";\r\n\r\nlet isModelShown = false;\r\n\r\nexport enum modes {\r\n    responsive = \"responsive\",\r\n    full_screen = \"full_screen\",\r\n}\r\n\r\nexport function initClientEvents() {\r\n\r\n    try {\r\n\r\n        $knowMoreOverlay && $knowMoreOverlay.addEventListener('click', ($event) => {\r\n            // $knowMoreOverlay.style.display = 'none';\r\n            $knowMoreOverlay.style.opacity = 0;\r\n            $knowMoreClose.style.display = 'none';\r\n            setTimeout(() => {\r\n                $knowMoreOverlay.style.display = 'none';\r\n            }, 500);\r\n        });\r\n        $knowMoreClose && $knowMoreClose.addEventListener('click', ($event) => {\r\n            // $knowMoreOverlay.style.display = 'none';\r\n            $knowMoreOverlay.style.opacity = 0;\r\n            $knowMoreClose.style.display = 'none';\r\n            setTimeout(() => {\r\n                $knowMoreOverlay.style.display = 'none';\r\n            }, 500);\r\n        });\r\n        $envOptions && $envOptions.addEventListener('click', ($event) => {\r\n            $knowMoreOverlay.style.display = 'block';\r\n            $knowMoreOverlay.style.opacity = 1;\r\n            $knowMoreClose.style.display = 'block';\r\n        });\r\n        $knowMoreContainer && $knowMoreContainer.addEventListener('click', ($event) => {\r\n            $event.stopPropagation();\r\n        });\r\n        $chatInput.addEventListener('keypress', ($event) => {\r\n            debugger;\r\n            if ($event.key === 'Enter') {\r\n                let humanMessage = $chatInput.value;\r\n                if (!humanMessage || !humanMessage.trim()) {\r\n                    return;\r\n                }\r\n                $chatInput.value = \"\";\r\n                humanMessageHandler(humanMessage);\r\n            }\r\n        });\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n\r\n    try {\r\n        $chatInputIcon.addEventListener('click', () => {\r\n            let humanMessage = $chatInput.value;\r\n            if (!humanMessage || !humanMessage.trim()) {\r\n                return;\r\n            }\r\n            $chatInput.value = \"\";\r\n            humanMessageHandler(humanMessage);\r\n        });\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n}\r\n\r\nasync function initApp(imiPreview: ImiPreview) {\r\n    console.log('imi-chat-preview init');\r\n    initEvents(imiPreview);\r\n}\r\n\r\nclass ImiPreview {\r\n    _cb;\r\n    _feedbackCB;\r\n\r\n    viewInit(selector, fullBody = true, phoneCasing = true, isRtl) {\r\n        let mainParent = document.querySelector(selector) as HTMLElement;\r\n        mainParent.innerHTML = mainBodyTemplate(fullBody, phoneCasing, isRtl);\r\n    }\r\n\r\n    initAdditionalDom(dom) {\r\n        domInit(dom);\r\n\r\n        initApp(this);\r\n    }\r\n\r\n    setSendHumanMessageCallback(cb) {\r\n        this._cb = cb;\r\n    }\r\n\r\n    setSendFeedback(cb) {\r\n        this._feedbackCB = cb;\r\n    }\r\n\r\n    setOptions(botDetails: { description: string, logo: string, title: string }, theme: {\r\n        brandColor: string, feedbackEnabled: boolean, showOptionsEllipsis: boolean, time24HrFormat: boolean\r\n    }) {\r\n        if ($envOptions) {\r\n                // $envOptions.style.display = \"block\"\r\n            // if (theme.showOptionsEllipsis === true) {\r\n            //     $envOptions.style.display = \"block\"\r\n            // } else {\r\n            //     $envOptions.style.display = \"none\"\r\n            // }\r\n        }\r\n        themeOptions = theme;\r\n        setOptions(botDetails);\r\n        initEnvironment(botDetails);\r\n\r\n        if (theme.feedbackEnabled) {\r\n            $chatBody.classList.remove('feedbackDisabled');\r\n        } else {\r\n            $chatBody.classList.add('feedbackDisabled');\r\n        }\r\n        this.setTheme(theme);\r\n    }\r\n\r\n    setTheme(theme: { brandColor: string }) {\r\n        let root = document.documentElement;\r\n        root.style.setProperty('--color-brand', theme.brandColor || 'red');\r\n    }\r\n\r\n    appendMessageInChatBody(generated_msg, sendApiResp: ISendApiResponsePayload, hideFeedback) {\r\n\r\n        AppendMessageInChatBody(generated_msg, sendApiResp, hideFeedback);\r\n    }\r\n\r\n    removeAllChatMessages() {\r\n        $chatBody.innerHTML = \"\";\r\n    }\r\n}\r\n\r\n(<any>window).ImiPreview = ImiPreview;\r\n\r\n\r\nfunction removeModal() {\r\n    $phoneModel.classList.add('d-none');\r\n    $phoneModel.classList.remove('d-flex');\r\n    $chatBody.classList.remove('bg-opaque');\r\n    $chatFooter.classList.remove('opacity-0');\r\n}\r\n\r\n\r\nfunction initEvents(imiPreview: ImiPreview) {\r\n\r\n    try{\r\n        document.getElementById('close-modal1').addEventListener('click', ($event) => {\r\n            removeModal();\r\n        });\r\n    }catch (e) {\r\n        console.log(e);\r\n    }\r\n\r\n\r\n    console.log($chatBody);\r\n    $chatBody.addEventListener('click', ($event) => {\r\n        const target = $event.target as HTMLElement;\r\n\r\n        if (target.classList.contains('feedback-like') || target.classList.contains('feedback-dislike')) {\r\n\r\n            const $feedbackWrapper = findParentWithClass(target, 'msg-bubble-options-panel');\r\n            $feedbackWrapper.classList.remove('ask-feedback');\r\n            const oldFeedback = $feedbackWrapper.getAttribute('data-feedback');\r\n            if (oldFeedback != null) {\r\n                return;\r\n            }\r\n            const $messageBubble = findParentWithClass(target, 'msg-bubble');\r\n            const feedback = target.getAttribute('data-feedback-value');\r\n            const txn = $messageBubble.getAttribute('data-txn');\r\n            const bot_message_id = $messageBubble.getAttribute('data-bot_message_id');\r\n            $feedbackWrapper.setAttribute('data-feedback', feedback);\r\n            target.parentElement.classList.add('active');\r\n            imiPreview._feedbackCB({txn, bot_message_id}, Number(feedback));\r\n        }\r\n\r\n        if (target.hasAttribute('data-payload')) {\r\n            debugger;\r\n            imiPreview._cb(target.textContent, target.getAttribute('data-payload'));\r\n            return;\r\n        }\r\n\r\n        try {\r\n            removeModal();\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n\r\n        try {\r\n            let img = $event.target as HTMLImageElement;\r\n            if (img.classList.contains('click-to-zoom')) {\r\n                /*zoom the div  */\r\n                // Get the modal\r\n                const modal = document.getElementById(\"myModal\");\r\n\r\n// Get the image and insert it inside the modal - use its \"alt\" text as a caption\r\n                const modalImg = document.getElementById(\"img01\") as HTMLImageElement;\r\n                const captionText = document.getElementById(\"caption\");\r\n                // img.onclick = function(){\r\n                modal.style.display = \"block\";\r\n                modalImg.src = img.src;\r\n                // captionText.innerHTML = this.alt;\r\n                // }\r\n\r\n// Get the <span> element that closes the modal\r\n                const span = document.getElementsByClassName(\"close\")[0] as HTMLElement;\r\n\r\n// When the user clicks on <span> (x), close the modal\r\n                span.onclick = function () {\r\n                    modal.style.display = \"none\";\r\n                }\r\n            }\r\n\r\n            if (img.classList) {\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n\r\n        try {\r\n            if (target.classList.contains('control')) {\r\n                const itemInView = 2;\r\n                const $carasalContainer = findParentWithClass(target, 'carousal-container') as HTMLElement;\r\n                const shouldMoveRight = target.classList.contains('control-right');\r\n                const $carasalInner = $carasalContainer.querySelector('.carousal-container-inner') as HTMLElement;\r\n                const $carasalItemLength = ($carasalContainer.querySelectorAll('.item')).length;\r\n                let dataStep = Number($carasalContainer.getAttribute('data-step'));\r\n                $carasalContainer.classList.remove('hide-left-control');\r\n                $carasalContainer.classList.remove('hide-right-control');\r\n                if ((dataStep < $carasalItemLength - itemInView) && shouldMoveRight) {\r\n                    dataStep++;\r\n                    if (dataStep === ($carasalItemLength - itemInView)) {\r\n                        setTimeout(() => {\r\n                            $carasalContainer.classList.add('hide-right-control');\r\n                        }, 350);\r\n                    }\r\n                } else if ((dataStep > 0) && !shouldMoveRight) {\r\n                    dataStep--;\r\n                    if (dataStep === 0) {\r\n                        setTimeout(() => {\r\n                            $carasalContainer.classList.add('hide-left-control');\r\n                        }, 350);\r\n                    }\r\n                } else {\r\n                    return;\r\n                }\r\n\r\n                $carasalContainer.setAttribute('data-step', dataStep.toString());\r\n                const carasalContainerWidth = $carasalContainer.offsetWidth;\r\n                const itemWidth = ($carasalInner.querySelector('.item') as HTMLElement).offsetWidth;\r\n                const base = (itemWidth * 100) / carasalContainerWidth;\r\n                $carasalInner.style.transform = `translateX(${-1 * base * dataStep}%)`;\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n\r\n\r\n    });\r\n    try {\r\n        $langSubmit.addEventListener('click', ($event) => {\r\n            const lang = $langSelect.value;\r\n            if (lang) {\r\n                let splits = environment.bot_unique_name.split(\"_\");\r\n                splits.pop();\r\n                environment.bot_unique_name = splits.join(\"_\") + '_' + lang;\r\n                let newUrl = updateQueryStringParameter(location.href, \"lang\", lang);\r\n                newUrl = updateQueryStringParameter(newUrl, \"lang\", lang);\r\n                location.href = newUrl;\r\n                initEnvironment();\r\n            }\r\n        });\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n\r\n    try {\r\n        const langOption = document.getElementsByClassName('lang-option')[0];\r\n        langOption.addEventListener('click', function (event) {\r\n            const target = event.target as HTMLElement;\r\n            let lang;\r\n            if (target.classList.contains('lang-option-ar')) {\r\n                lang = 'ar';\r\n            }else {\r\n                lang = 'en';\r\n            }\r\n\r\n            const newUrl = updateQueryStringParameter(location.href, 'lang', lang);\r\n            location.href = newUrl;\r\n        });\r\n    } catch (e) {\r\n\r\n    }\r\n\r\n\r\n    try {\r\n        $envOptions.addEventListener('click', () => {\r\n            let $phoneView = document.getElementsByClassName('chat-body')[0];\r\n            let $langPanel = $phoneModel.querySelector('.lang-panel') as HTMLElement;\r\n            if (!isModelShown) {\r\n                $phoneView.classList.add('bg-opaque');\r\n                $phoneModel.classList.add('d-flex');\r\n                $phoneModel.classList.remove('d-none');\r\n                $chatFooter.classList.add('opacity-0');\r\n                $langPanel.classList.add('d-flex');\r\n            } else {\r\n                $phoneView.classList.remove('bg-opaque');\r\n                $phoneModel.classList.remove('d-flex');\r\n                $phoneModel.classList.add('d-none');\r\n                $chatFooter.classList.remove('opacity-0');\r\n                $langPanel.classList.remove('d-flex');\r\n            }\r\n            isModelShown = !isModelShown\r\n        });\r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n\r\n\r\n}\r\n\r\n    export async function humanMessageHandler(humanMessage: string, sourceType?, payload?: string) {\r\n    // alert();\r\n    AppendMessageInChatBody([{\r\n        sourceType: sourceType || ESourceType.human,\r\n        text: humanMessage,\r\n        time: Date.now()\r\n    }]);\r\n\r\n    const botResponse = await sendMessageToBot(environment.bot_access_token, environment.enterprise_unique_name, humanMessage,null, payload);\r\n    // if (environment.room && environment.room.id && botResponse.room.id !== environment.room.id) {\r\n    //     AppendMessageInChatBody(<any>[{SESSION_EXPIRY: true}], null);\r\n    //     console.log(`previous room : ${environment.room}. new room ${botResponse.room.id}`);\r\n    // }\r\n    // console.log(environment.room, botResponse.room);\r\n    // environment.room = botResponse.room;\r\n    botResponses.push(botResponse);\r\n\r\n    let messageData: any[] = serializeGeneratedMessagesToPreviewMessages(botResponse.generated_msg);\r\n    messageData.forEach((message) => {\r\n        AppendMessageInChatBody([message], botResponse);\r\n    });\r\n\r\n}\r\n\r\nfunction getBotResponseByTxnId(txn) {\r\n    return botResponses.find(res => res.transaction_id === txn)\r\n}\r\n\r\nexport async function sendFeedbackHandler(resp: { txn: string, bot_message_id: string }, feedback: number) {\r\n    let parsedFeedback;\r\n    if (feedback === 0) {\r\n        parsedFeedback = 'NEGATIVE'\r\n    } else if (feedback === 1) {\r\n        parsedFeedback = 'POSITIVE'\r\n    }\r\n    const res = getBotResponseByTxnId(resp.txn);\r\n    try {\r\n        await sendFeedback({\r\n            consumer_id: res.room.consumer_id,\r\n            feedback: parsedFeedback,\r\n            bot_message_id: res.bot_message_id\r\n        });\r\n    } catch (e) {\r\n        /*todo: remove like from view*/\r\n    }\r\n}\r\n\r\nexport function initEnvironment(botDetails: any = {}) {\r\n    // const lang = getQueryStringValue('lang');\r\n    const lang = getQueryStringValue('language') || getQueryStringValue('lang') || botDetails.language || 'en';\r\n\r\n    if (lang === 'ar' || lang === 'rtl') {\r\n\r\n        $chatContainer && $chatContainer.classList.add('lang-rtl');\r\n        if ($chatInput) {\r\n            $chatInput.setAttribute(\"dir\", \"rtl\");\r\n            $chatInput.placeholder = \"كيف حالك\";\r\n        }\r\n    } else {\r\n        $chatContainer && $chatContainer.classList.remove('lang-rtl');\r\n        if ($chatInput) {\r\n            $chatInput.setAttribute(\"dir\", \"ltr\");\r\n            $chatInput.placeholder = \"Ask Wisdom\";\r\n        }\r\n    }\r\n\r\n    environment.bot_access_token = botDetails.bot_access_token;\r\n    environment.logo = botDetails.logo;\r\n    const root = getQueryStringValue('root');\r\n    if (root) {\r\n        if (root === '.') {\r\n            environment.root = \"\";\r\n        } else {\r\n            environment.root = root + '.';\r\n        }\r\n\r\n    }\r\n    const enterprise_unique_name = botDetails.enterprise_unique_name || getQueryStringValue('enterprise_unique_name');\r\n    if (enterprise_unique_name) {\r\n        environment.enterprise_unique_name = enterprise_unique_name;\r\n    }\r\n    const bot_unique_name = botDetails.bot_unique_name || getQueryStringValue('bot_unique_name');\r\n    if (bot_unique_name) {\r\n        environment.bot_unique_name = bot_unique_name;\r\n    }\r\n\r\n}\r\n\r\nfunction findParentWithClass($child, className) {\r\n    while ($child) {\r\n        if ($child.classList.contains(className)) {\r\n            return $child;\r\n        }\r\n        $child = $child.parentElement;\r\n    }\r\n}\r\n\r\n// initApp().then(_ => console.log('app init success'));\r\n// setTimeout(() => {\r\n//\r\n// }, 2000);\r\n\r\n\r\nfunction mainBodyTemplate(fullBody, phoneCasing, isRtl) {\r\n    let str = \"\";\r\n    if (fullBody) {\r\n        // phoneCasing = false;\r\n        str = phoneCasing ? getPhoneCoverTemplate(isRtl) : getFullBodyExceptPhoneCover(isRtl);\r\n    } else {\r\n        str = `\r\n    <!-- The Modal -->\r\n            <div id=\"myModal\" class=\"modal2\">\r\n                <span class=\"close\">&times;</span>\r\n                <img class=\"modal-content\" id=\"img01\">\r\n                <div id=\"caption\"></div>\r\n            </div>\r\n\r\n                <div class=\"imi-preview-grid-container\">\r\n\r\n                       \r\n                        <!--chat body starts-->\r\n                        <div class=\"chat-body\" id=\"body\"\r\n                             style=\"padding: 8px 12px; display: flex; flex-direction: column; z-index: 0\">\r\n\r\n                        </div>\r\n                        \r\n                    </div>\r\n    \r\n    \r\n    `\r\n    }\r\n\r\n    return str;\r\n}\r\n\r\nfunction getModelTemplate() {\r\n    return `\r\n        <div id=\"myModal\" class=\"modal2\">\r\n                <span class=\"close\">&times;</span>\r\n                <img class=\"modal-content\" id=\"img01\">\r\n                <div id=\"caption\"></div>\r\n            </div>\r\n    `;\r\n}\r\n\r\n//\r\nfunction getFullBodyExceptPhoneCover(isRtl) {\r\n\r\n    return `\r\n        <div class=\"imi-preview-grid-container\">\r\n                        <div class=\"header\" style=\"z-index: 1\">\r\n                            <div class=\"bot-intro\" id=\"botIntro\" dir=\"${isRtl?'rtl':'ltr'}\">\r\n                                <span class=\"bot-logo\">\r\n                                    <img id=\"bot-logo\"\r\n                                    onerror=\"this.src='https://imibot-production.s3-eu-west-1.amazonaws.com/integrations/v2/default-fallback-image.png'\" \r\n                                    src=\"https://whizkey.ae/wisdom/static/media/rammas.42381205.gif\"\r\n                                         alt=\"\">\r\n                                </span>\r\n                                <div class=\"bot-details\">\r\n                                    <div id=\"bot-title\" ></div>\r\n                                    <div id=\"bot-description\">hello</div>\r\n                                </div>\r\n                                <div class=\"lang-option\">\r\n                                    <a class=\"lang-option-ar underline-animate\">اتصل بنا </a>\r\n                                    <a class=\"lang-option-en underline-animate\">English</a>\r\n                                 </div>\r\n<!--                                <div class=\"options\"  id=\"env-options\">-->\r\n<!--                                    <i class=\"fa fa-ellipsis-v\"></i>-->\r\n<!--                                </div>-->\r\n                            </div>\r\n                        </div>\r\n                        <!--chat body starts-->\r\n                        <div class=\"chat-body\" id=\"body\"\r\n                             style=\"display: flex; flex-direction: column; z-index: 0\">\r\n\r\n                        </div>\r\n                        <!--chat body ends-->\r\n                        <div class=\"footer\">\r\n                            <input placeholder=\"Type a message\" id=\"chat-input\" dir=\"ltr\" autocomplete=\"off\" autofocus\r\n                                   type=\"text\">\r\n                            <span class=\"icon\" id=\"chat-input-icon\">\r\n                                <span class=\"fa fa-send\"></span>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n      <!--know more starts-->\r\n        <div class=\"chat-img-overlay\" id=\"chat-img-overlay\" style=\"display: none\">\r\n          <span class=\"fa fa-times close-chat-img-overlay\"></span>\r\n          <div class=\"chat-know-more-overlay\">\r\n            <header class=\"chat-know-more-overlay-header\">\r\n              <div class=\"description-top\" style=\"text-align: center\">This bot was built using</div>\r\n              <div><img src=\"https://staging.imibot.ai/static/assets/img/IMI_logo.png\" alt=\"\"></div>\r\n              <strong class=\"description-bottom\">The enterprise bot building platform to automate conversations</strong>\r\n            </header>\r\n    \r\n            <div class=\"chat-know-more-overlay-item\">\r\n              <img src=\"https://staging.imibot.ai/static/assets/img/chat/bot.svg\" alt=\"\">\r\n              <div>Contextualise bot interactions with artificial intelligence</div>\r\n            </div>\r\n            <div class=\"chat-know-more-overlay-item\">\r\n              <img src=\"https://staging.imibot.ai/static/assets/img/chat/group-5.svg\" alt=\"\">\r\n              <div>Provide seamless omnichannel experience</div>\r\n            </div>\r\n            <div class=\"chat-know-more-overlay-item\">\r\n              <img src=\"https://staging.imibot.ai/static/assets/img/chat/browser.svg\" alt=\"\">\r\n              <div>Orchestrate individual bots using a controller</div>\r\n            </div>\r\n            <div class=\"chat-know-more-overlay-item\">\r\n              <img src=\"https://staging.imibot.ai/static/assets/img/chat/group-2.svg\" alt=\"\">\r\n              <div>Integrate various services within your flow to help user</div>\r\n            </div>\r\n    \r\n            <a href=\"https://imimobile.com/products/ai-automation\" target=\"_blank\">\r\n            <button  class=\"imi-button-primary\" style=\"width: 100px;background: #00abd3; border: none; color: white\" mat-flat-button color=\"primary\"> Know more</button></a>\r\n    \r\n          </div>\r\n        </div>\r\n    `\r\n}\r\n\r\n\r\nfunction getPhoneCoverTemplate(isRtl) {\r\n    return `\r\n    <div class=\"page1\">\r\n    <div class=\"page__content\">\r\n        <div class=\"phone\">\r\n            <div class=\"phone__body\">\r\n                <div class=\"phone__view\">\r\n                    <div id=\"phone-modal\" class=\"modal1\" style=\"\">\r\n                        <i class=\"fa fa-times\" id=\"close-modal1\"></i>\r\n                        <div class=\"lang-panel\">\r\n                            <h1>Select language</h1>\r\n                            <div>\r\n                                <select id=\"lang-select\">\r\n                                    <option value=\"en\">English</option>\r\n                                    <option value=\"ar\" style=\"direction: rtl;\">اتصل بنا</option>\r\n                                </select>\r\n                            </div>\r\n                            <button class=\"imi-button-primary\" id=\"lang-submit\">Submit</button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"imi-preview-grid-container\">\r\n\r\n                        <div class=\"header\" dir=\"${isRtl?'rtl':'ltr'}\" style=\"z-index: 1\">\r\n                            <div class=\"basel-bg\"></div>\r\n                            <div class=\"bot-intro\" id=\"botIntro\">\r\n                                <span class=\"bot-logo\">\r\n                                    <img id=\"bot-logo\"\r\n                                    onerror=\"this.src='https://imibot-production.s3-eu-west-1.amazonaws.com/integrations/v2/default-fallback-image.png'\" \r\n                                       alt=\"\">\r\n                                </span>\r\n                                <div class=\"bot-details\" style=\"margin-left: ${isRtl?'42px':'-42px'}\">\r\n                                    <div id=\"bot-title\" style=\"text-align: center\" ></div>\r\n                                </div>\r\n                               \r\n                                <div class=\"options\" id=\"env-options\">\r\n                                    <i class=\"fa fa-ellipsis-v\"></i>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <!--chat body starts-->\r\n                        <div class=\"chat-body\" id=\"body\"\r\n                             style=\"padding: 8px 12px; display: flex; flex-direction: column; z-index: 0\">\r\n\r\n                        </div>\r\n                        <!--chat body ends-->\r\n                        <div class=\"footer\">\r\n                            <input placeholder=\"Type a message\" id=\"chat-input\" dir=\"ltr\" autocomplete=\"off\" autofocus\r\n                                   type=\"text\">\r\n                            <span class=\"icon\" id=\"chat-input-icon\">\r\n                                <span class=\"fa fa-send\"></span>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"phone__notch\">\r\n                    <div class=\"phone__speaker\"></div>\r\n                    <div class=\"phone__camera\"></div>\r\n                </div>\r\n            </div>\r\n            <div class=\"phone__btn\">\r\n                <button class=\"phone__btn--power\"></button>\r\n                <div class=\"phone__btn--volume\">\r\n                    <button class=\"phone__btn--volume-up\"></button>\r\n                    <button class=\"phone__btn--volume-down\"></button>\r\n                </div>\r\n                <button class=\"phone__btn--mute\"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n    `;\r\n}\r\n\r\n\r\nfunction getHeaderTemplate() {\r\n    return `\r\n    <div class=\"header\" style=\"z-index: 1\">\r\n                            <div class=\"basel-bg\"></div>\r\n                            <div class=\"bot-intro\" id=\"botIntro\">\r\n                                <span class=\"bot-logo\">\r\n                                    <img id=\"bot-logo\" src=\"https://whizkey.ae/wisdom/static/media/rammas.42381205.gif\"\r\n                                         alt=\"\">\r\n                                </span>\r\n                                <div class=\"bot-details\">\r\n                                    <div id=\"bot-title\" ></div>\r\n                                </div>\r\n                                <div class=\"options\" id=\"env-options\">\r\n                                    <i class=\"fa fa-ellipsis-v\"></i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n    `;\r\n}\r\n\r\nfunction getFooterTemplate() {\r\n    return `\r\n    <div class=\"footer\">\r\n                            <input placeholder=\"Type a message\" id=\"chat-input\" dir=\"ltr\" autocomplete=\"off\" autofocus\r\n                                   type=\"text\">\r\n                            <span class=\"icon\" id=\"chat-input-icon\">\r\n                                <span class=\"fa fa-send\"></span>\r\n                            </span>\r\n                        </div>`\r\n}\r\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexport var isBrowser = (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\" && (typeof document === \"undefined\" ? \"undefined\" : _typeof(document)) === 'object' && document.nodeType === 9;\n\nexport default isBrowser;\n","var isProduction = process.env.NODE_ENV === 'production';\nfunction warning(condition, message) {\n  if (!isProduction) {\n    if (condition) {\n      return;\n    }\n\n    var text = \"Warning: \" + message;\n\n    if (typeof console !== 'undefined') {\n      console.warn(text);\n    }\n\n    try {\n      throw Error(text);\n    } catch (x) {}\n  }\n}\n\nexport default warning;\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import _extends from '@babel/runtime/helpers/esm/extends';\nimport isInBrowser from 'is-in-browser';\nimport warning from 'tiny-warning';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\nvar plainObjectConstrurctor = {}.constructor;\nfunction cloneStyle(style) {\n  if (style == null || typeof style !== 'object') return style;\n  if (Array.isArray(style)) return style.map(cloneStyle);\n  if (style.constructor !== plainObjectConstrurctor) return style;\n  var newStyle = {};\n\n  for (var name in style) {\n    newStyle[name] = cloneStyle(style[name]);\n  }\n\n  return newStyle;\n}\n\n/**\n * Create a rule instance.\n */\n\nfunction createRule(name, decl, options) {\n  if (name === void 0) {\n    name = 'unnamed';\n  }\n\n  var jss = options.jss;\n  var declCopy = cloneStyle(decl);\n  var rule = jss.plugins.onCreateRule(name, declCopy, options);\n  if (rule) return rule; // It is an at-rule and it has no instance.\n\n  if (name[0] === '@') {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Unknown rule \" + name) : void 0;\n  }\n\n  return null;\n}\n\nvar join = function join(value, by) {\n  var result = '';\n\n  for (var i = 0; i < value.length; i++) {\n    // Remove !important from the value, it will be readded later.\n    if (value[i] === '!important') break;\n    if (result) result += by;\n    result += value[i];\n  }\n\n  return result;\n};\n/**\n * Converts array values to string.\n *\n * `margin: [['5px', '10px']]` > `margin: 5px 10px;`\n * `border: ['1px', '2px']` > `border: 1px, 2px;`\n * `margin: [['5px', '10px'], '!important']` > `margin: 5px 10px !important;`\n * `color: ['red', !important]` > `color: red !important;`\n */\n\n\nfunction toCssValue(value, ignoreImportant) {\n  if (ignoreImportant === void 0) {\n    ignoreImportant = false;\n  }\n\n  if (!Array.isArray(value)) return value;\n  var cssValue = ''; // Support space separated values via `[['5px', '10px']]`.\n\n  if (Array.isArray(value[0])) {\n    for (var i = 0; i < value.length; i++) {\n      if (value[i] === '!important') break;\n      if (cssValue) cssValue += ', ';\n      cssValue += join(value[i], ' ');\n    }\n  } else cssValue = join(value, ', '); // Add !important, because it was ignored.\n\n\n  if (!ignoreImportant && value[value.length - 1] === '!important') {\n    cssValue += ' !important';\n  }\n\n  return cssValue;\n}\n\n/**\n * Indent a string.\n * http://jsperf.com/array-join-vs-for\n */\nfunction indentStr(str, indent) {\n  var result = '';\n\n  for (var index = 0; index < indent; index++) {\n    result += '  ';\n  }\n\n  return result + str;\n}\n/**\n * Converts a Rule to CSS string.\n */\n\n\nfunction toCss(selector, style, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var result = '';\n  if (!style) return result;\n  var _options = options,\n      _options$indent = _options.indent,\n      indent = _options$indent === void 0 ? 0 : _options$indent;\n  var fallbacks = style.fallbacks;\n  if (selector) indent++; // Apply fallbacks first.\n\n  if (fallbacks) {\n    // Array syntax {fallbacks: [{prop: value}]}\n    if (Array.isArray(fallbacks)) {\n      for (var index = 0; index < fallbacks.length; index++) {\n        var fallback = fallbacks[index];\n\n        for (var prop in fallback) {\n          var value = fallback[prop];\n\n          if (value != null) {\n            if (result) result += '\\n';\n            result += \"\" + indentStr(prop + \": \" + toCssValue(value) + \";\", indent);\n          }\n        }\n      }\n    } else {\n      // Object syntax {fallbacks: {prop: value}}\n      for (var _prop in fallbacks) {\n        var _value = fallbacks[_prop];\n\n        if (_value != null) {\n          if (result) result += '\\n';\n          result += \"\" + indentStr(_prop + \": \" + toCssValue(_value) + \";\", indent);\n        }\n      }\n    }\n  }\n\n  for (var _prop2 in style) {\n    var _value2 = style[_prop2];\n\n    if (_value2 != null && _prop2 !== 'fallbacks') {\n      if (result) result += '\\n';\n      result += \"\" + indentStr(_prop2 + \": \" + toCssValue(_value2) + \";\", indent);\n    }\n  } // Allow empty style in this case, because properties will be added dynamically.\n\n\n  if (!result && !options.allowEmpty) return result; // When rule is being stringified before selector was defined.\n\n  if (!selector) return result;\n  indent--;\n  if (result) result = \"\\n\" + result + \"\\n\";\n  return indentStr(selector + \" {\" + result, indent) + indentStr('}', indent);\n}\n\nvar escapeRegex = /([[\\].#*$><+~=|^:(),\"'`\\s])/g;\nvar nativeEscape = typeof CSS !== 'undefined' && CSS.escape;\nvar escape = (function (str) {\n  return nativeEscape ? nativeEscape(str) : str.replace(escapeRegex, '\\\\$1');\n});\n\nvar BaseStyleRule =\n/*#__PURE__*/\nfunction () {\n  function BaseStyleRule(key, style, options) {\n    this.type = 'style';\n    this.key = void 0;\n    this.isProcessed = false;\n    this.style = void 0;\n    this.renderer = void 0;\n    this.renderable = void 0;\n    this.options = void 0;\n    var sheet = options.sheet,\n        Renderer = options.Renderer;\n    this.key = key;\n    this.options = options;\n    this.style = style;\n    if (sheet) this.renderer = sheet.renderer;else if (Renderer) this.renderer = new Renderer();\n  }\n  /**\n   * Get or set a style property.\n   */\n\n\n  var _proto = BaseStyleRule.prototype;\n\n  _proto.prop = function prop(name, value, options) {\n    // It's a getter.\n    if (value === undefined) return this.style[name]; // Don't do anything if the value has not changed.\n\n    var force = options ? options.force : false;\n    if (!force && this.style[name] === value) return this;\n    var newValue = value;\n\n    if (!options || options.process !== false) {\n      newValue = this.options.jss.plugins.onChangeValue(value, name, this);\n    }\n\n    var isEmpty = newValue == null || newValue === false;\n    var isDefined = name in this.style; // Value is empty and wasn't defined before.\n\n    if (isEmpty && !isDefined && !force) return this; // We are going to remove this value.\n\n    var remove = isEmpty && isDefined;\n    if (remove) delete this.style[name];else this.style[name] = newValue; // Renderable is defined if StyleSheet option `link` is true.\n\n    if (this.renderable && this.renderer) {\n      if (remove) this.renderer.removeProperty(this.renderable, name);else this.renderer.setProperty(this.renderable, name, newValue);\n      return this;\n    }\n\n    var sheet = this.options.sheet;\n\n    if (sheet && sheet.attached) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, '[JSS] Rule is not linked. Missing sheet option \"link: true\".') : void 0;\n    }\n\n    return this;\n  };\n\n  return BaseStyleRule;\n}();\nvar StyleRule =\n/*#__PURE__*/\nfunction (_BaseStyleRule) {\n  _inheritsLoose(StyleRule, _BaseStyleRule);\n\n  function StyleRule(key, style, options) {\n    var _this;\n\n    _this = _BaseStyleRule.call(this, key, style, options) || this;\n    _this.selectorText = void 0;\n    _this.id = void 0;\n    _this.renderable = void 0;\n    var selector = options.selector,\n        scoped = options.scoped,\n        sheet = options.sheet,\n        generateId = options.generateId;\n\n    if (selector) {\n      _this.selectorText = selector;\n    } else if (scoped !== false) {\n      _this.id = generateId(_assertThisInitialized(_assertThisInitialized(_this)), sheet);\n      _this.selectorText = \".\" + escape(_this.id);\n    }\n\n    return _this;\n  }\n  /**\n   * Set selector string.\n   * Attention: use this with caution. Most browsers didn't implement\n   * selectorText setter, so this may result in rerendering of entire Style Sheet.\n   */\n\n\n  var _proto2 = StyleRule.prototype;\n\n  /**\n   * Apply rule to an element inline.\n   */\n  _proto2.applyTo = function applyTo(renderable) {\n    var renderer = this.renderer;\n\n    if (renderer) {\n      var json = this.toJSON();\n\n      for (var prop in json) {\n        renderer.setProperty(renderable, prop, json[prop]);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Returns JSON representation of the rule.\n   * Fallbacks are not supported.\n   * Useful for inline styles.\n   */\n  ;\n\n  _proto2.toJSON = function toJSON() {\n    var json = {};\n\n    for (var prop in this.style) {\n      var value = this.style[prop];\n      if (typeof value !== 'object') json[prop] = value;else if (Array.isArray(value)) json[prop] = toCssValue(value);\n    }\n\n    return json;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto2.toString = function toString(options) {\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n    var opts = link ? _extends({}, options, {\n      allowEmpty: true\n    }) : options;\n    return toCss(this.selectorText, this.style, opts);\n  };\n\n  _createClass(StyleRule, [{\n    key: \"selector\",\n    set: function set(selector) {\n      if (selector === this.selectorText) return;\n      this.selectorText = selector;\n      var renderer = this.renderer,\n          renderable = this.renderable;\n      if (!renderable || !renderer) return;\n      var hasChanged = renderer.setSelector(renderable, selector); // If selector setter is not implemented, rerender the rule.\n\n      if (!hasChanged) {\n        renderer.replaceRule(renderable, this);\n      }\n    }\n    /**\n     * Get selector string.\n     */\n    ,\n    get: function get() {\n      return this.selectorText;\n    }\n  }]);\n\n  return StyleRule;\n}(BaseStyleRule);\nvar pluginStyleRule = {\n  onCreateRule: function onCreateRule(name, style, options) {\n    if (name[0] === '@' || options.parent && options.parent.type === 'keyframes') {\n      return null;\n    }\n\n    return new StyleRule(name, style, options);\n  }\n};\n\nvar defaultToStringOptions = {\n  indent: 1,\n  children: true\n};\nvar atRegExp = /@([\\w-]+)/;\n/**\n * Conditional rule for @media, @supports\n */\n\nvar ConditionalRule =\n/*#__PURE__*/\nfunction () {\n  function ConditionalRule(key, styles, options) {\n    this.type = 'conditional';\n    this.at = void 0;\n    this.key = void 0;\n    this.query = void 0;\n    this.rules = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    this.key = key; // Key might contain a unique suffix in case the `name` passed by user was duplicate.\n\n    this.query = options.name;\n    var atMatch = key.match(atRegExp);\n    this.at = atMatch ? atMatch[1] : 'unknown';\n    this.options = options;\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var name in styles) {\n      this.rules.add(name, styles[name]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Get a rule.\n   */\n\n\n  var _proto = ConditionalRule.prototype;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Create and register rule, run plugins.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, style, options) {\n    var rule = this.rules.add(name, style, options);\n    if (!rule) return null;\n    this.options.jss.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    if (options === void 0) {\n      options = defaultToStringOptions;\n    }\n\n    if (options.indent == null) options.indent = defaultToStringOptions.indent;\n    if (options.children == null) options.children = defaultToStringOptions.children;\n\n    if (options.children === false) {\n      return this.query + \" {}\";\n    }\n\n    var children = this.rules.toString(options);\n    return children ? this.query + \" {\\n\" + children + \"\\n}\" : '';\n  };\n\n  return ConditionalRule;\n}();\nvar keyRegExp = /@media|@supports\\s+/;\nvar pluginConditionalRule = {\n  onCreateRule: function onCreateRule(key, styles, options) {\n    return keyRegExp.test(key) ? new ConditionalRule(key, styles, options) : null;\n  }\n};\n\nvar defaultToStringOptions$1 = {\n  indent: 1,\n  children: true\n};\nvar nameRegExp = /@keyframes\\s+([\\w-]+)/;\n/**\n * Rule for @keyframes\n */\n\nvar KeyframesRule =\n/*#__PURE__*/\nfunction () {\n  function KeyframesRule(key, frames, options) {\n    this.type = 'keyframes';\n    this.at = '@keyframes';\n    this.key = void 0;\n    this.name = void 0;\n    this.id = void 0;\n    this.rules = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    var nameMatch = key.match(nameRegExp);\n\n    if (nameMatch && nameMatch[1]) {\n      this.name = nameMatch[1];\n    } else {\n      this.name = 'noname';\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Bad keyframes name \" + key) : void 0;\n    }\n\n    this.key = this.type + \"-\" + this.name;\n    this.options = options;\n    var scoped = options.scoped,\n        sheet = options.sheet,\n        generateId = options.generateId;\n    this.id = scoped === false ? this.name : escape(generateId(this, sheet));\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var name in frames) {\n      this.rules.add(name, frames[name], _extends({}, options, {\n        parent: this\n      }));\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = KeyframesRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (options === void 0) {\n      options = defaultToStringOptions$1;\n    }\n\n    if (options.indent == null) options.indent = defaultToStringOptions$1.indent;\n    if (options.children == null) options.children = defaultToStringOptions$1.children;\n\n    if (options.children === false) {\n      return this.at + \" \" + this.id + \" {}\";\n    }\n\n    var children = this.rules.toString(options);\n    if (children) children = \"\\n\" + children + \"\\n\";\n    return this.at + \" \" + this.id + \" {\" + children + \"}\";\n  };\n\n  return KeyframesRule;\n}();\nvar keyRegExp$1 = /@keyframes\\s+/;\nvar refRegExp = /\\$([\\w-]+)/g;\n\nvar findReferencedKeyframe = function findReferencedKeyframe(val, keyframes) {\n  if (typeof val === 'string') {\n    return val.replace(refRegExp, function (match, name) {\n      if (name in keyframes) {\n        return keyframes[name];\n      }\n\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Referenced keyframes rule \\\"\" + name + \"\\\" is not defined.\") : void 0;\n      return match;\n    });\n  }\n\n  return val;\n};\n/**\n * Replace the reference for a animation name.\n */\n\n\nvar replaceRef = function replaceRef(style, prop, keyframes) {\n  var value = style[prop];\n  var refKeyframe = findReferencedKeyframe(value, keyframes);\n\n  if (refKeyframe !== value) {\n    style[prop] = refKeyframe;\n  }\n};\n\nvar plugin = {\n  onCreateRule: function onCreateRule(key, frames, options) {\n    return typeof key === 'string' && keyRegExp$1.test(key) ? new KeyframesRule(key, frames, options) : null;\n  },\n  // Animation name ref replacer.\n  onProcessStyle: function onProcessStyle(style, rule, sheet) {\n    if (rule.type !== 'style' || !sheet) return style;\n    if ('animation-name' in style) replaceRef(style, 'animation-name', sheet.keyframes);\n    if ('animation' in style) replaceRef(style, 'animation', sheet.keyframes);\n    return style;\n  },\n  onChangeValue: function onChangeValue(val, prop, rule) {\n    var sheet = rule.options.sheet;\n\n    if (!sheet) {\n      return val;\n    }\n\n    switch (prop) {\n      case 'animation':\n        return findReferencedKeyframe(val, sheet.keyframes);\n\n      case 'animation-name':\n        return findReferencedKeyframe(val, sheet.keyframes);\n\n      default:\n        return val;\n    }\n  }\n};\n\nvar KeyframeRule =\n/*#__PURE__*/\nfunction (_BaseStyleRule) {\n  _inheritsLoose(KeyframeRule, _BaseStyleRule);\n\n  function KeyframeRule() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _BaseStyleRule.call.apply(_BaseStyleRule, [this].concat(args)) || this;\n    _this.renderable = void 0;\n    return _this;\n  }\n\n  var _proto = KeyframeRule.prototype;\n\n  /**\n   * Generates a CSS string.\n   */\n  _proto.toString = function toString(options) {\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n    var opts = link ? _extends({}, options, {\n      allowEmpty: true\n    }) : options;\n    return toCss(this.key, this.style, opts);\n  };\n\n  return KeyframeRule;\n}(BaseStyleRule);\nvar pluginKeyframeRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    if (options.parent && options.parent.type === 'keyframes') {\n      return new KeyframeRule(key, style, options);\n    }\n\n    return null;\n  }\n};\n\nvar FontFaceRule =\n/*#__PURE__*/\nfunction () {\n  function FontFaceRule(key, style, options) {\n    this.type = 'font-face';\n    this.at = '@font-face';\n    this.key = void 0;\n    this.style = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    this.key = key;\n    this.style = style;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = FontFaceRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (Array.isArray(this.style)) {\n      var str = '';\n\n      for (var index = 0; index < this.style.length; index++) {\n        str += toCss(this.key, this.style[index]);\n        if (this.style[index + 1]) str += '\\n';\n      }\n\n      return str;\n    }\n\n    return toCss(this.key, this.style, options);\n  };\n\n  return FontFaceRule;\n}();\nvar pluginFontFaceRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    return key === '@font-face' ? new FontFaceRule(key, style, options) : null;\n  }\n};\n\nvar ViewportRule =\n/*#__PURE__*/\nfunction () {\n  function ViewportRule(key, style, options) {\n    this.type = 'viewport';\n    this.at = '@viewport';\n    this.key = void 0;\n    this.style = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    this.key = key;\n    this.style = style;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = ViewportRule.prototype;\n\n  _proto.toString = function toString(options) {\n    return toCss(this.key, this.style, options);\n  };\n\n  return ViewportRule;\n}();\nvar pluginViewportRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    return key === '@viewport' || key === '@-ms-viewport' ? new ViewportRule(key, style, options) : null;\n  }\n};\n\nvar SimpleRule =\n/*#__PURE__*/\nfunction () {\n  function SimpleRule(key, value, options) {\n    this.type = 'simple';\n    this.key = void 0;\n    this.value = void 0;\n    this.options = void 0;\n    this.isProcessed = false;\n    this.renderable = void 0;\n    this.key = key;\n    this.value = value;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  // eslint-disable-next-line no-unused-vars\n\n\n  var _proto = SimpleRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (Array.isArray(this.value)) {\n      var str = '';\n\n      for (var index = 0; index < this.value.length; index++) {\n        str += this.key + \" \" + this.value[index] + \";\";\n        if (this.value[index + 1]) str += '\\n';\n      }\n\n      return str;\n    }\n\n    return this.key + \" \" + this.value + \";\";\n  };\n\n  return SimpleRule;\n}();\nvar keysMap = {\n  '@charset': true,\n  '@import': true,\n  '@namespace': true\n};\nvar pluginSimpleRule = {\n  onCreateRule: function onCreateRule(key, value, options) {\n    return key in keysMap ? new SimpleRule(key, value, options) : null;\n  }\n};\n\nvar plugins = [pluginStyleRule, pluginConditionalRule, plugin, pluginKeyframeRule, pluginFontFaceRule, pluginViewportRule, pluginSimpleRule];\n\nvar defaultUpdateOptions = {\n  process: true\n};\nvar forceUpdateOptions = {\n  force: true,\n  process: true\n  /**\n   * Contains rules objects and allows adding/removing etc.\n   * Is used for e.g. by `StyleSheet` or `ConditionalRule`.\n   */\n\n};\n\nvar RuleList =\n/*#__PURE__*/\nfunction () {\n  // Rules registry for access by .get() method.\n  // It contains the same rule registered by name and by selector.\n  // Original styles object.\n  // Used to ensure correct rules order.\n  function RuleList(options) {\n    this.map = {};\n    this.raw = {};\n    this.index = [];\n    this.counter = 0;\n    this.options = void 0;\n    this.classes = void 0;\n    this.keyframes = void 0;\n    this.options = options;\n    this.classes = options.classes;\n    this.keyframes = options.keyframes;\n  }\n  /**\n   * Create and register rule.\n   *\n   * Will not render after Style Sheet was rendered the first time.\n   */\n\n\n  var _proto = RuleList.prototype;\n\n  _proto.add = function add(name, decl, ruleOptions) {\n    var _this$options = this.options,\n        parent = _this$options.parent,\n        sheet = _this$options.sheet,\n        jss = _this$options.jss,\n        Renderer = _this$options.Renderer,\n        generateId = _this$options.generateId,\n        scoped = _this$options.scoped;\n\n    var options = _extends({\n      classes: this.classes,\n      parent: parent,\n      sheet: sheet,\n      jss: jss,\n      Renderer: Renderer,\n      generateId: generateId,\n      scoped: scoped,\n      name: name\n    }, ruleOptions); // When user uses .createStyleSheet(), duplicate names are not possible, but\n    // `sheet.addRule()` opens the door for any duplicate rule name. When this happens\n    // we need to make the key unique within this RuleList instance scope.\n\n\n    var key = name;\n\n    if (name in this.raw) {\n      key = name + \"-d\" + this.counter++;\n    } // We need to save the original decl before creating the rule\n    // because cache plugin needs to use it as a key to return a cached rule.\n\n\n    this.raw[key] = decl;\n\n    if (key in this.classes) {\n      // E.g. rules inside of @media container\n      options.selector = \".\" + escape(this.classes[key]);\n    }\n\n    var rule = createRule(key, decl, options);\n    if (!rule) return null;\n    this.register(rule);\n    var index = options.index === undefined ? this.index.length : options.index;\n    this.index.splice(index, 0, rule);\n    return rule;\n  }\n  /**\n   * Get a rule.\n   */\n  ;\n\n  _proto.get = function get(name) {\n    return this.map[name];\n  }\n  /**\n   * Delete a rule.\n   */\n  ;\n\n  _proto.remove = function remove(rule) {\n    this.unregister(rule);\n    delete this.raw[rule.key];\n    this.index.splice(this.index.indexOf(rule), 1);\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.index.indexOf(rule);\n  }\n  /**\n   * Run `onProcessRule()` plugins on every rule.\n   */\n  ;\n\n  _proto.process = function process() {\n    var plugins$$1 = this.options.jss.plugins; // We need to clone array because if we modify the index somewhere else during a loop\n    // we end up with very hard-to-track-down side effects.\n\n    this.index.slice(0).forEach(plugins$$1.onProcessRule, plugins$$1);\n  }\n  /**\n   * Register a rule in `.map`, `.classes` and `.keyframes` maps.\n   */\n  ;\n\n  _proto.register = function register(rule) {\n    this.map[rule.key] = rule;\n\n    if (rule instanceof StyleRule) {\n      this.map[rule.selector] = rule;\n      if (rule.id) this.classes[rule.key] = rule.id;\n    } else if (rule instanceof KeyframesRule && this.keyframes) {\n      this.keyframes[rule.name] = rule.id;\n    }\n  }\n  /**\n   * Unregister a rule.\n   */\n  ;\n\n  _proto.unregister = function unregister(rule) {\n    delete this.map[rule.key];\n\n    if (rule instanceof StyleRule) {\n      delete this.map[rule.selector];\n      delete this.classes[rule.key];\n    } else if (rule instanceof KeyframesRule) {\n      delete this.keyframes[rule.name];\n    }\n  }\n  /**\n   * Update the function values with a new data.\n   */\n  ;\n\n  _proto.update = function update() {\n    var name;\n    var data;\n    var options;\n\n    if (typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'string') {\n      name = arguments.length <= 0 ? undefined : arguments[0]; // $FlowFixMe\n\n      data = arguments.length <= 1 ? undefined : arguments[1]; // $FlowFixMe\n\n      options = arguments.length <= 2 ? undefined : arguments[2];\n    } else {\n      data = arguments.length <= 0 ? undefined : arguments[0]; // $FlowFixMe\n\n      options = arguments.length <= 1 ? undefined : arguments[1];\n      name = null;\n    }\n\n    if (name) {\n      this.updateOne(this.map[name], data, options);\n    } else {\n      for (var index = 0; index < this.index.length; index++) {\n        this.updateOne(this.index[index], data, options);\n      }\n    }\n  }\n  /**\n   * Execute plugins, update rule props.\n   */\n  ;\n\n  _proto.updateOne = function updateOne(rule, data, options) {\n    if (options === void 0) {\n      options = defaultUpdateOptions;\n    }\n\n    var _this$options2 = this.options,\n        plugins$$1 = _this$options2.jss.plugins,\n        sheet = _this$options2.sheet; // It is a rules container like for e.g. ConditionalRule.\n\n    if (rule.rules instanceof RuleList) {\n      rule.rules.update(data, options);\n      return;\n    }\n\n    var styleRule = rule;\n    var style = styleRule.style;\n    plugins$$1.onUpdate(data, rule, sheet, options); // We rely on a new `style` ref in case it was mutated during onUpdate hook.\n\n    if (options.process && style && style !== styleRule.style) {\n      // We need to run the plugins in case new `style` relies on syntax plugins.\n      plugins$$1.onProcessStyle(styleRule.style, styleRule, sheet); // Update and add props.\n\n      for (var prop in styleRule.style) {\n        var nextValue = styleRule.style[prop];\n        var prevValue = style[prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.\n        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.\n\n        if (nextValue !== prevValue) {\n          styleRule.prop(prop, nextValue, forceUpdateOptions);\n        }\n      } // Remove props.\n\n\n      for (var _prop in style) {\n        var _nextValue = styleRule.style[_prop];\n        var _prevValue = style[_prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.\n        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.\n\n        if (_nextValue == null && _nextValue !== _prevValue) {\n          styleRule.prop(_prop, null, forceUpdateOptions);\n        }\n      }\n    }\n  }\n  /**\n   * Convert rules to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    var str = '';\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n\n    for (var index = 0; index < this.index.length; index++) {\n      var rule = this.index[index];\n      var css = rule.toString(options); // No need to render an empty rule.\n\n      if (!css && !link) continue;\n      if (str) str += '\\n';\n      str += css;\n    }\n\n    return str;\n  };\n\n  return RuleList;\n}();\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(styles, options) {\n    this.options = void 0;\n    this.deployed = void 0;\n    this.attached = void 0;\n    this.rules = void 0;\n    this.renderer = void 0;\n    this.classes = void 0;\n    this.keyframes = void 0;\n    this.queue = void 0;\n    this.attached = false;\n    this.deployed = false;\n    this.classes = {};\n    this.keyframes = {};\n    this.options = _extends({}, options, {\n      sheet: this,\n      parent: this,\n      classes: this.classes,\n      keyframes: this.keyframes\n    });\n\n    if (options.Renderer) {\n      this.renderer = new options.Renderer(this);\n    }\n\n    this.rules = new RuleList(this.options);\n\n    for (var name in styles) {\n      this.rules.add(name, styles[name]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Attach renderable to the render tree.\n   */\n\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.attach = function attach() {\n    if (this.attached) return this;\n    if (this.renderer) this.renderer.attach();\n    this.attached = true; // Order is important, because we can't use insertRule API if style element is not attached.\n\n    if (!this.deployed) this.deploy();\n    return this;\n  }\n  /**\n   * Remove renderable from render tree.\n   */\n  ;\n\n  _proto.detach = function detach() {\n    if (!this.attached) return this;\n    if (this.renderer) this.renderer.detach();\n    this.attached = false;\n    return this;\n  }\n  /**\n   * Add a rule to the current stylesheet.\n   * Will insert a rule also after the stylesheet has been rendered first time.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, decl, options) {\n    var queue = this.queue; // Plugins can create rules.\n    // In order to preserve the right order, we need to queue all `.addRule` calls,\n    // which happen after the first `rules.add()` call.\n\n    if (this.attached && !queue) this.queue = [];\n    var rule = this.rules.add(name, decl, options);\n    if (!rule) return null;\n    this.options.jss.plugins.onProcessRule(rule);\n\n    if (this.attached) {\n      if (!this.deployed) return rule; // Don't insert rule directly if there is no stringified version yet.\n      // It will be inserted all together when .attach is called.\n\n      if (queue) queue.push(rule);else {\n        this.insertRule(rule);\n\n        if (this.queue) {\n          this.queue.forEach(this.insertRule, this);\n          this.queue = undefined;\n        }\n      }\n      return rule;\n    } // We can't add rules to a detached style node.\n    // We will redeploy the sheet once user will attach it.\n\n\n    this.deployed = false;\n    return rule;\n  }\n  /**\n   * Insert rule into the StyleSheet\n   */\n  ;\n\n  _proto.insertRule = function insertRule(rule) {\n    if (this.renderer) {\n      this.renderer.insertRule(rule);\n    }\n  }\n  /**\n   * Create and add rules.\n   * Will render also after Style Sheet was rendered the first time.\n   */\n  ;\n\n  _proto.addRules = function addRules(styles, options) {\n    var added = [];\n\n    for (var name in styles) {\n      var rule = this.addRule(name, styles[name], options);\n      if (rule) added.push(rule);\n    }\n\n    return added;\n  }\n  /**\n   * Get a rule by name.\n   */\n  ;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Delete a rule by name.\n   * Returns `true`: if rule has been deleted from the DOM.\n   */\n  ;\n\n  _proto.deleteRule = function deleteRule(name) {\n    var rule = typeof name === 'object' ? name : this.rules.get(name);\n    if (!rule) return false;\n    this.rules.remove(rule);\n\n    if (this.attached && rule.renderable && this.renderer) {\n      return this.renderer.deleteRule(rule.renderable);\n    }\n\n    return true;\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Deploy pure CSS string to a renderable.\n   */\n  ;\n\n  _proto.deploy = function deploy() {\n    if (this.renderer) this.renderer.deploy();\n    this.deployed = true;\n    return this;\n  }\n  /**\n   * Update the function values with a new data.\n   */\n  ;\n\n  _proto.update = function update() {\n    var _this$rules;\n\n    (_this$rules = this.rules).update.apply(_this$rules, arguments);\n\n    return this;\n  }\n  /**\n   * Updates a single rule.\n   */\n  ;\n\n  _proto.updateOne = function updateOne(rule, data, options) {\n    this.rules.updateOne(rule, data, options);\n    return this;\n  }\n  /**\n   * Convert rules to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    return this.rules.toString(options);\n  };\n\n  return StyleSheet;\n}();\n\nvar PluginsRegistry =\n/*#__PURE__*/\nfunction () {\n  function PluginsRegistry() {\n    this.plugins = {\n      internal: [],\n      external: []\n    };\n    this.registry = void 0;\n  }\n\n  var _proto = PluginsRegistry.prototype;\n\n  /**\n   * Call `onCreateRule` hooks and return an object if returned by a hook.\n   */\n  _proto.onCreateRule = function onCreateRule(name, decl, options) {\n    for (var i = 0; i < this.registry.onCreateRule.length; i++) {\n      var rule = this.registry.onCreateRule[i](name, decl, options);\n      if (rule) return rule;\n    }\n\n    return null;\n  }\n  /**\n   * Call `onProcessRule` hooks.\n   */\n  ;\n\n  _proto.onProcessRule = function onProcessRule(rule) {\n    if (rule.isProcessed) return;\n    var sheet = rule.options.sheet;\n\n    for (var i = 0; i < this.registry.onProcessRule.length; i++) {\n      this.registry.onProcessRule[i](rule, sheet);\n    }\n\n    if (rule.style) this.onProcessStyle(rule.style, rule, sheet);\n    rule.isProcessed = true;\n  }\n  /**\n   * Call `onProcessStyle` hooks.\n   */\n  ;\n\n  _proto.onProcessStyle = function onProcessStyle(style, rule, sheet) {\n    for (var i = 0; i < this.registry.onProcessStyle.length; i++) {\n      // $FlowFixMe\n      rule.style = this.registry.onProcessStyle[i](rule.style, rule, sheet);\n    }\n  }\n  /**\n   * Call `onProcessSheet` hooks.\n   */\n  ;\n\n  _proto.onProcessSheet = function onProcessSheet(sheet) {\n    for (var i = 0; i < this.registry.onProcessSheet.length; i++) {\n      this.registry.onProcessSheet[i](sheet);\n    }\n  }\n  /**\n   * Call `onUpdate` hooks.\n   */\n  ;\n\n  _proto.onUpdate = function onUpdate(data, rule, sheet, options) {\n    for (var i = 0; i < this.registry.onUpdate.length; i++) {\n      this.registry.onUpdate[i](data, rule, sheet, options);\n    }\n  }\n  /**\n   * Call `onChangeValue` hooks.\n   */\n  ;\n\n  _proto.onChangeValue = function onChangeValue(value, prop, rule) {\n    var processedValue = value;\n\n    for (var i = 0; i < this.registry.onChangeValue.length; i++) {\n      processedValue = this.registry.onChangeValue[i](processedValue, prop, rule);\n    }\n\n    return processedValue;\n  }\n  /**\n   * Register a plugin.\n   */\n  ;\n\n  _proto.use = function use(newPlugin, options) {\n    if (options === void 0) {\n      options = {\n        queue: 'external'\n      };\n    }\n\n    var plugins = this.plugins[options.queue]; // Avoids applying same plugin twice, at least based on ref.\n\n    if (plugins.indexOf(newPlugin) !== -1) {\n      return;\n    }\n\n    plugins.push(newPlugin);\n    this.registry = [].concat(this.plugins.external, this.plugins.internal).reduce(function (registry, plugin) {\n      for (var name in plugin) {\n        if (name in registry) {\n          registry[name].push(plugin[name]);\n        } else {\n          process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Unknown hook \\\"\" + name + \"\\\".\") : void 0;\n        }\n      }\n\n      return registry;\n    }, {\n      onCreateRule: [],\n      onProcessRule: [],\n      onProcessStyle: [],\n      onProcessSheet: [],\n      onChangeValue: [],\n      onUpdate: []\n    });\n  };\n\n  return PluginsRegistry;\n}();\n\n/**\n * Sheets registry to access them all at one place.\n */\nvar SheetsRegistry =\n/*#__PURE__*/\nfunction () {\n  function SheetsRegistry() {\n    this.registry = [];\n  }\n\n  var _proto = SheetsRegistry.prototype;\n\n  /**\n   * Register a Style Sheet.\n   */\n  _proto.add = function add(sheet) {\n    var registry = this.registry;\n    var index = sheet.options.index;\n    if (registry.indexOf(sheet) !== -1) return;\n\n    if (registry.length === 0 || index >= this.index) {\n      registry.push(sheet);\n      return;\n    } // Find a position.\n\n\n    for (var i = 0; i < registry.length; i++) {\n      if (registry[i].options.index > index) {\n        registry.splice(i, 0, sheet);\n        return;\n      }\n    }\n  }\n  /**\n   * Reset the registry.\n   */\n  ;\n\n  _proto.reset = function reset() {\n    this.registry = [];\n  }\n  /**\n   * Remove a Style Sheet.\n   */\n  ;\n\n  _proto.remove = function remove(sheet) {\n    var index = this.registry.indexOf(sheet);\n    this.registry.splice(index, 1);\n  }\n  /**\n   * Convert all attached sheets to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        attached = _ref.attached,\n        options = _objectWithoutPropertiesLoose(_ref, [\"attached\"]);\n\n    var css = '';\n\n    for (var i = 0; i < this.registry.length; i++) {\n      var sheet = this.registry[i];\n\n      if (attached != null && sheet.attached !== attached) {\n        continue;\n      }\n\n      if (css) css += '\\n';\n      css += sheet.toString(options);\n    }\n\n    return css;\n  };\n\n  _createClass(SheetsRegistry, [{\n    key: \"index\",\n\n    /**\n     * Current highest index number.\n     */\n    get: function get() {\n      return this.registry.length === 0 ? 0 : this.registry[this.registry.length - 1].options.index;\n    }\n  }]);\n\n  return SheetsRegistry;\n}();\n\n/**\n * This is a global sheets registry. Only DomRenderer will add sheets to it.\n * On the server one should use an own SheetsRegistry instance and add the\n * sheets to it, because you need to make sure to create a new registry for\n * each request in order to not leak sheets across requests.\n */\n\nvar sheets = new SheetsRegistry();\n\n/* eslint-disable */\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar globalThis = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\nvar ns = '2f1acc6c3a606b082e5eef5e54414ffb';\nif (globalThis[ns] == null) globalThis[ns] = 0; // Bundle may contain multiple JSS versions at the same time. In order to identify\n// the current version with just one short number and use it for classes generation\n// we use a counter. Also it is more accurate, because user can manually reevaluate\n// the module.\n\nvar moduleId = globalThis[ns]++;\n\nvar maxRules = 1e10;\n\n/**\n * Returns a function which generates unique class names based on counters.\n * When new generator function is created, rule counter is reseted.\n * We need to reset the rule counter for SSR for each request.\n */\nvar createGenerateId = function createGenerateId(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var ruleCounter = 0;\n  return function (rule, sheet) {\n    ruleCounter += 1;\n\n    if (ruleCounter > maxRules) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] You might have a memory leak. Rule counter is at \" + ruleCounter + \".\") : void 0;\n    }\n\n    var jssId = '';\n    var prefix = '';\n\n    if (sheet) {\n      if (sheet.options.classNamePrefix) {\n        prefix = sheet.options.classNamePrefix;\n      }\n\n      if (sheet.options.jss.id != null) {\n        jssId = String(sheet.options.jss.id);\n      }\n    }\n\n    if (options.minify) {\n      // Using \"c\" because a number can't be the first char in a class name.\n      return \"\" + (prefix || 'c') + moduleId + jssId + ruleCounter;\n    }\n\n    return prefix + rule.key + \"-\" + moduleId + (jssId ? \"-\" + jssId : '') + \"-\" + ruleCounter;\n  };\n};\n\n/**\n * Cache the value from the first time a function is called.\n */\nvar memoize = function memoize(fn) {\n  var value;\n  return function () {\n    if (!value) value = fn();\n    return value;\n  };\n};\n/**\n * Get a style property value.\n */\n\n\nfunction getPropertyValue(cssRule, prop) {\n  try {\n    // Support CSSTOM.\n    if (cssRule.attributeStyleMap) {\n      return cssRule.attributeStyleMap.get(prop);\n    }\n\n    return cssRule.style.getPropertyValue(prop);\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return '';\n  }\n}\n/**\n * Set a style property.\n */\n\n\nfunction setProperty(cssRule, prop, value) {\n  try {\n    var cssValue = value;\n\n    if (Array.isArray(value)) {\n      cssValue = toCssValue(value, true);\n\n      if (value[value.length - 1] === '!important') {\n        cssRule.style.setProperty(prop, cssValue, 'important');\n        return true;\n      }\n    } // Support CSSTOM.\n\n\n    if (cssRule.attributeStyleMap) {\n      cssRule.attributeStyleMap.set(prop, cssValue);\n    } else {\n      cssRule.style.setProperty(prop, cssValue);\n    }\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return false;\n  }\n\n  return true;\n}\n/**\n * Remove a style property.\n */\n\n\nfunction removeProperty(cssRule, prop) {\n  try {\n    // Support CSSTOM.\n    if (cssRule.attributeStyleMap) {\n      cssRule.attributeStyleMap.delete(prop);\n    } else {\n      cssRule.style.removeProperty(prop);\n    }\n  } catch (err) {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] DOMException \\\"\" + err.message + \"\\\" was thrown. Tried to remove property \\\"\" + prop + \"\\\".\") : void 0;\n  }\n}\n/**\n * Set the selector.\n */\n\n\nfunction setSelector(cssRule, selectorText) {\n  cssRule.selectorText = selectorText; // Return false if setter was not successful.\n  // Currently works in chrome only.\n\n  return cssRule.selectorText === selectorText;\n}\n/**\n * Gets the `head` element upon the first call and caches it.\n * We assume it can't be null.\n */\n\n\nvar getHead = memoize(function () {\n  return document.querySelector('head');\n});\n/**\n * Find attached sheet with an index higher than the passed one.\n */\n\nfunction findHigherSheet(registry, options) {\n  for (var i = 0; i < registry.length; i++) {\n    var sheet = registry[i];\n\n    if (sheet.attached && sheet.options.index > options.index && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet;\n    }\n  }\n\n  return null;\n}\n/**\n * Find attached sheet with the highest index.\n */\n\n\nfunction findHighestSheet(registry, options) {\n  for (var i = registry.length - 1; i >= 0; i--) {\n    var sheet = registry[i];\n\n    if (sheet.attached && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet;\n    }\n  }\n\n  return null;\n}\n/**\n * Find a comment with \"jss\" inside.\n */\n\n\nfunction findCommentNode(text) {\n  var head = getHead();\n\n  for (var i = 0; i < head.childNodes.length; i++) {\n    var node = head.childNodes[i];\n\n    if (node.nodeType === 8 && node.nodeValue.trim() === text) {\n      return node;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Find a node before which we can insert the sheet.\n */\nfunction findPrevNode(options) {\n  var registry = sheets.registry;\n\n  if (registry.length > 0) {\n    // Try to insert before the next higher sheet.\n    var sheet = findHigherSheet(registry, options);\n\n    if (sheet && sheet.renderer) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element\n      };\n    } // Otherwise insert after the last attached.\n\n\n    sheet = findHighestSheet(registry, options);\n\n    if (sheet && sheet.renderer) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element.nextSibling\n      };\n    }\n  } // Try to find a comment placeholder if registry is empty.\n\n\n  var insertionPoint = options.insertionPoint;\n\n  if (insertionPoint && typeof insertionPoint === 'string') {\n    var comment = findCommentNode(insertionPoint);\n\n    if (comment) {\n      return {\n        parent: comment.parentNode,\n        node: comment.nextSibling\n      };\n    } // If user specifies an insertion point and it can't be found in the document -\n    // bad specificity issues may appear.\n\n\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Insertion point \\\"\" + insertionPoint + \"\\\" not found.\") : void 0;\n  }\n\n  return false;\n}\n/**\n * Insert style element into the DOM.\n */\n\n\nfunction insertStyle(style, options) {\n  var insertionPoint = options.insertionPoint;\n  var nextNode = findPrevNode(options);\n\n  if (nextNode !== false && nextNode.parent) {\n    nextNode.parent.insertBefore(style, nextNode.node);\n    return;\n  } // Works with iframes and any node types.\n\n\n  if (insertionPoint && typeof insertionPoint.nodeType === 'number') {\n    // https://stackoverflow.com/questions/41328728/force-casting-in-flow\n    var insertionPointElement = insertionPoint;\n    var parentNode = insertionPointElement.parentNode;\n    if (parentNode) parentNode.insertBefore(style, insertionPointElement.nextSibling);else process.env.NODE_ENV !== \"production\" ? warning(false, '[JSS] Insertion point is not in the DOM.') : void 0;\n    return;\n  }\n\n  getHead().appendChild(style);\n}\n/**\n * Read jss nonce setting from the page if the user has set it.\n */\n\n\nvar getNonce = memoize(function () {\n  var node = document.querySelector('meta[property=\"csp-nonce\"]');\n  return node ? node.getAttribute('content') : null;\n});\n\nvar _insertRule = function insertRule(container, rule, index) {\n  var maxIndex = container.cssRules.length; // In case previous insertion fails, passed index might be wrong\n\n  if (index === undefined || index > maxIndex) {\n    // eslint-disable-next-line no-param-reassign\n    index = maxIndex;\n  }\n\n  try {\n    if ('insertRule' in container) {\n      var c = container;\n      c.insertRule(rule, index);\n    } // Keyframes rule.\n    else if ('appendRule' in container) {\n        var _c = container;\n\n        _c.appendRule(rule);\n      }\n  } catch (err) {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] \" + err.message) : void 0;\n    return false;\n  }\n\n  return container.cssRules[index];\n};\n\nvar createStyle = function createStyle() {\n  var el = document.createElement('style'); // Without it, IE will have a broken source order specificity if we\n  // insert rules after we insert the style tag.\n  // It seems to kick-off the source order specificity algorithm.\n\n  el.textContent = '\\n';\n  return el;\n};\n\nvar DomRenderer =\n/*#__PURE__*/\nfunction () {\n  // HTMLStyleElement needs fixing https://github.com/facebook/flow/issues/2696\n  function DomRenderer(sheet) {\n    this.getPropertyValue = getPropertyValue;\n    this.setProperty = setProperty;\n    this.removeProperty = removeProperty;\n    this.setSelector = setSelector;\n    this.element = void 0;\n    this.sheet = void 0;\n    this.hasInsertedRules = false;\n    // There is no sheet when the renderer is used from a standalone StyleRule.\n    if (sheet) sheets.add(sheet);\n    this.sheet = sheet;\n\n    var _ref = this.sheet ? this.sheet.options : {},\n        media = _ref.media,\n        meta = _ref.meta,\n        element = _ref.element;\n\n    this.element = element || createStyle();\n    this.element.setAttribute('data-jss', '');\n    if (media) this.element.setAttribute('media', media);\n    if (meta) this.element.setAttribute('data-meta', meta);\n    var nonce = getNonce();\n    if (nonce) this.element.setAttribute('nonce', nonce);\n  }\n  /**\n   * Insert style element into render tree.\n   */\n\n\n  var _proto = DomRenderer.prototype;\n\n  _proto.attach = function attach() {\n    // In the case the element node is external and it is already in the DOM.\n    if (this.element.parentNode || !this.sheet) return;\n    insertStyle(this.element, this.sheet.options); // When rules are inserted using `insertRule` API, after `sheet.detach().attach()`\n    // most browsers create a new CSSStyleSheet, except of all IEs.\n\n    var deployed = Boolean(this.sheet && this.sheet.deployed);\n\n    if (this.hasInsertedRules && deployed) {\n      this.hasInsertedRules = false;\n      this.deploy();\n    }\n  }\n  /**\n   * Remove style element from render tree.\n   */\n  ;\n\n  _proto.detach = function detach() {\n    var parentNode = this.element.parentNode;\n    if (parentNode) parentNode.removeChild(this.element);\n  }\n  /**\n   * Inject CSS string into element.\n   */\n  ;\n\n  _proto.deploy = function deploy() {\n    var sheet = this.sheet;\n    if (!sheet) return;\n\n    if (sheet.options.link) {\n      this.insertRules(sheet.rules);\n      return;\n    }\n\n    this.element.textContent = \"\\n\" + sheet.toString() + \"\\n\";\n  }\n  /**\n   * Insert RuleList into an element.\n   */\n  ;\n\n  _proto.insertRules = function insertRules(rules, nativeParent) {\n    for (var i = 0; i < rules.index.length; i++) {\n      this.insertRule(rules.index[i], i, nativeParent);\n    }\n  }\n  /**\n   * Insert a rule into element.\n   */\n  ;\n\n  _proto.insertRule = function insertRule(rule, index, nativeParent) {\n    if (nativeParent === void 0) {\n      nativeParent = this.element.sheet;\n    }\n\n    if (rule.rules) {\n      var parent = rule;\n      var latestNativeParent = nativeParent;\n\n      if (rule.type === 'conditional' || rule.type === 'keyframes') {\n        // We need to render the container without children first.\n        latestNativeParent = _insertRule(nativeParent, parent.toString({\n          children: false\n        }), index);\n\n        if (latestNativeParent === false) {\n          return false;\n        }\n      }\n\n      this.insertRules(parent.rules, latestNativeParent);\n      return latestNativeParent;\n    } // IE keeps the CSSStyleSheet after style node has been reattached,\n    // so we need to check if the `renderable` reference the right style sheet and not\n    // rerender those rules.\n\n\n    if (rule.renderable && rule.renderable.parentStyleSheet === this.element.sheet) {\n      return rule.renderable;\n    }\n\n    var ruleStr = rule.toString();\n    if (!ruleStr) return false;\n\n    var nativeRule = _insertRule(nativeParent, ruleStr, index);\n\n    if (nativeRule === false) {\n      return false;\n    }\n\n    this.hasInsertedRules = true;\n    rule.renderable = nativeRule;\n    return nativeRule;\n  }\n  /**\n   * Delete a rule.\n   */\n  ;\n\n  _proto.deleteRule = function deleteRule(cssRule) {\n    var sheet = this.element.sheet;\n    var index = this.indexOf(cssRule);\n    if (index === -1) return false;\n    sheet.deleteRule(index);\n    return true;\n  }\n  /**\n   * Get index of a CSS Rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(cssRule) {\n    var cssRules = this.element.sheet.cssRules;\n\n    for (var index = 0; index < cssRules.length; index++) {\n      if (cssRule === cssRules[index]) return index;\n    }\n\n    return -1;\n  }\n  /**\n   * Generate a new CSS rule and replace the existing one.\n   *\n   * Only used for some old browsers because they can't set a selector.\n   */\n  ;\n\n  _proto.replaceRule = function replaceRule(cssRule, rule) {\n    var index = this.indexOf(cssRule);\n    if (index === -1) return false;\n    this.element.sheet.deleteRule(index);\n    return this.insertRule(rule, index);\n  }\n  /**\n   * Get all rules elements.\n   */\n  ;\n\n  _proto.getRules = function getRules() {\n    return this.element.sheet.cssRules;\n  };\n\n  return DomRenderer;\n}();\n\nvar instanceCounter = 0;\n\nvar Jss =\n/*#__PURE__*/\nfunction () {\n  function Jss(options) {\n    this.id = instanceCounter++;\n    this.version = \"10.0.4\";\n    this.plugins = new PluginsRegistry();\n    this.options = {\n      id: {\n        minify: false\n      },\n      createGenerateId: createGenerateId,\n      Renderer: isInBrowser ? DomRenderer : null,\n      plugins: []\n    };\n    this.generateId = createGenerateId({\n      minify: false\n    });\n\n    for (var i = 0; i < plugins.length; i++) {\n      this.plugins.use(plugins[i], {\n        queue: 'internal'\n      });\n    }\n\n    this.setup(options);\n  }\n  /**\n   * Prepares various options, applies plugins.\n   * Should not be used twice on the same instance, because there is no plugins\n   * deduplication logic.\n   */\n\n\n  var _proto = Jss.prototype;\n\n  _proto.setup = function setup(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (options.createGenerateId) {\n      this.options.createGenerateId = options.createGenerateId;\n    }\n\n    if (options.id) {\n      this.options.id = _extends({}, this.options.id, options.id);\n    }\n\n    if (options.createGenerateId || options.id) {\n      this.generateId = this.options.createGenerateId(this.options.id);\n    }\n\n    if (options.insertionPoint != null) this.options.insertionPoint = options.insertionPoint;\n\n    if ('Renderer' in options) {\n      this.options.Renderer = options.Renderer;\n    } // eslint-disable-next-line prefer-spread\n\n\n    if (options.plugins) this.use.apply(this, options.plugins);\n    return this;\n  }\n  /**\n   * Create a Style Sheet.\n   */\n  ;\n\n  _proto.createStyleSheet = function createStyleSheet(styles, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _options = options,\n        index = _options.index;\n\n    if (typeof index !== 'number') {\n      index = sheets.index === 0 ? 0 : sheets.index + 1;\n    }\n\n    var sheet = new StyleSheet(styles, _extends({}, options, {\n      jss: this,\n      generateId: options.generateId || this.generateId,\n      insertionPoint: this.options.insertionPoint,\n      Renderer: this.options.Renderer,\n      index: index\n    }));\n    this.plugins.onProcessSheet(sheet);\n    return sheet;\n  }\n  /**\n   * Detach the Style Sheet and remove it from the registry.\n   */\n  ;\n\n  _proto.removeStyleSheet = function removeStyleSheet(sheet) {\n    sheet.detach();\n    sheets.remove(sheet);\n    return this;\n  }\n  /**\n   * Create a rule without a Style Sheet.\n   * [Deprecated] will be removed in the next major version.\n   */\n  ;\n\n  _proto.createRule = function createRule$$1(name, style, options) {\n    if (style === void 0) {\n      style = {};\n    }\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    // Enable rule without name for inline styles.\n    if (typeof name === 'object') {\n      return this.createRule(undefined, name, style);\n    }\n\n    var ruleOptions = _extends({}, options, {\n      name: name,\n      jss: this,\n      Renderer: this.options.Renderer\n    });\n\n    if (!ruleOptions.generateId) ruleOptions.generateId = this.generateId;\n    if (!ruleOptions.classes) ruleOptions.classes = {};\n    if (!ruleOptions.keyframes) ruleOptions.keyframes = {};\n\n    var rule = createRule(name, style, ruleOptions);\n\n    if (rule) this.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Register plugin. Passed function will be invoked with a rule instance.\n   */\n  ;\n\n  _proto.use = function use() {\n    var _this = this;\n\n    for (var _len = arguments.length, plugins$$1 = new Array(_len), _key = 0; _key < _len; _key++) {\n      plugins$$1[_key] = arguments[_key];\n    }\n\n    plugins$$1.forEach(function (plugin) {\n      _this.plugins.use(plugin);\n    });\n    return this;\n  };\n\n  return Jss;\n}();\n\n/**\n * Extracts a styles object with only props that contain function values.\n */\nfunction getDynamicStyles(styles) {\n  var to = null;\n\n  for (var key in styles) {\n    var value = styles[key];\n    var type = typeof value;\n\n    if (type === 'function') {\n      if (!to) to = {};\n      to[key] = value;\n    } else if (type === 'object' && value !== null && !Array.isArray(value)) {\n      var extracted = getDynamicStyles(value);\n\n      if (extracted) {\n        if (!to) to = {};\n        to[key] = extracted;\n      }\n    }\n  }\n\n  return to;\n}\n\n/**\n * SheetsManager is like a WeakMap which is designed to count StyleSheet\n * instances and attach/detach automatically.\n */\nvar SheetsManager =\n/*#__PURE__*/\nfunction () {\n  function SheetsManager() {\n    this.length = 0;\n    this.sheets = new WeakMap();\n  }\n\n  var _proto = SheetsManager.prototype;\n\n  _proto.get = function get(key) {\n    var entry = this.sheets.get(key);\n    return entry && entry.sheet;\n  };\n\n  _proto.add = function add(key, sheet) {\n    if (this.sheets.has(key)) return;\n    this.length++;\n    this.sheets.set(key, {\n      sheet: sheet,\n      refs: 0\n    });\n  };\n\n  _proto.manage = function manage(key) {\n    var entry = this.sheets.get(key);\n\n    if (entry) {\n      if (entry.refs === 0) {\n        entry.sheet.attach();\n      }\n\n      entry.refs++;\n      return entry.sheet;\n    }\n\n    warning(false, \"[JSS] SheetsManager: can't find sheet to manage\");\n    return undefined;\n  };\n\n  _proto.unmanage = function unmanage(key) {\n    var entry = this.sheets.get(key);\n\n    if (entry) {\n      if (entry.refs > 0) {\n        entry.refs--;\n        if (entry.refs === 0) entry.sheet.detach();\n      }\n    } else {\n      warning(false, \"SheetsManager: can't find sheet to unmanage\");\n    }\n  };\n\n  _createClass(SheetsManager, [{\n    key: \"size\",\n    get: function get() {\n      return this.length;\n    }\n  }]);\n\n  return SheetsManager;\n}();\n\n/**\n * A better abstraction over CSS.\n *\n * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present\n * @website https://github.com/cssinjs/jss\n * @license MIT\n */\n\n/**\n * Export a constant indicating if this browser has CSSTOM support.\n * https://developers.google.com/web/updates/2018/03/cssom\n */\nvar hasCSSTOMSupport = typeof CSS !== 'undefined' && CSS && 'number' in CSS;\n/**\n * Creates a new instance of Jss.\n */\n\nvar create = function create(options) {\n  return new Jss(options);\n};\n/**\n * A global Jss instance.\n */\n\nvar index = create();\n\nexport default index;\nexport { hasCSSTOMSupport, create, getDynamicStyles, toCssValue, createRule, SheetsRegistry, SheetsManager, RuleList, sheets, createGenerateId };\n","import { createRule } from 'jss';\n\nvar now = Date.now();\nvar fnValuesNs = \"fnValues\" + now;\nvar fnRuleNs = \"fnStyle\" + ++now;\nfunction functionPlugin() {\n  return {\n    onCreateRule: function onCreateRule(name, decl, options) {\n      if (typeof decl !== 'function') return null;\n      var rule = createRule(name, {}, options);\n      rule[fnRuleNs] = decl;\n      return rule;\n    },\n    onProcessStyle: function onProcessStyle(style, rule) {\n      // We need to extract function values from the declaration, so that we can keep core unaware of them.\n      // We need to do that only once.\n      // We don't need to extract functions on each style update, since this can happen only once.\n      // We don't support function values inside of function rules.\n      if (fnValuesNs in rule || fnRuleNs in rule) return style;\n      var fnValues = {};\n\n      for (var prop in style) {\n        var value = style[prop];\n        if (typeof value !== 'function') continue;\n        delete style[prop];\n        fnValues[prop] = value;\n      } // $FlowFixMe\n\n\n      rule[fnValuesNs] = fnValues;\n      return style;\n    },\n    onUpdate: function onUpdate(data, rule, sheet, options) {\n      var styleRule = rule;\n      var fnRule = styleRule[fnRuleNs]; // If we have a style function, the entire rule is dynamic and style object\n      // will be returned from that function.\n\n      if (fnRule) {\n        // Empty object will remove all currently defined props\n        // in case function rule returns a falsy value.\n        styleRule.style = fnRule(data) || {};\n      }\n\n      var fnValues = styleRule[fnValuesNs]; // If we have a fn values map, it is a rule with function values.\n\n      if (fnValues) {\n        for (var prop in fnValues) {\n          styleRule.prop(prop, fnValues[prop](data), options);\n        }\n      }\n    }\n  };\n}\n\nexport default functionPlugin;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import $$observable from 'symbol-observable';\nimport { createRule } from 'jss';\n\nvar isObservable = function isObservable(value) {\n  return value && value[$$observable] && value === value[$$observable]();\n};\n\nfunction observablePlugin(updateOptions) {\n  return {\n    onCreateRule: function onCreateRule(name, decl, options) {\n      if (!isObservable(decl)) return null; // Cast `decl` to `Observable`, since it passed the type guard.\n\n      var style$ = decl;\n      var rule = createRule(name, {}, options); // TODO\n      // Call `stream.subscribe()` returns a subscription, which should be explicitly\n      // unsubscribed from when we know this sheet is no longer needed.\n\n      style$.subscribe(function (style) {\n        for (var prop in style) {\n          rule.prop(prop, style[prop], updateOptions);\n        }\n      });\n      return rule;\n    },\n    onProcessRule: function onProcessRule(rule) {\n      if (rule && rule.type !== 'style') return;\n      var styleRule = rule;\n      var style = styleRule.style;\n\n      var _loop = function _loop(prop) {\n        var value = style[prop];\n        if (!isObservable(value)) return \"continue\";\n        delete style[prop];\n        value.subscribe({\n          next: function next(nextValue) {\n            styleRule.prop(prop, nextValue, updateOptions);\n          }\n        });\n      };\n\n      for (var prop in style) {\n        var _ret = _loop(prop);\n\n        if (_ret === \"continue\") continue;\n      }\n    }\n  };\n}\n\nexport default observablePlugin;\n","import warning from 'tiny-warning';\n\nvar semiWithNl = /;\\n/;\n/**\n * Naive CSS parser.\n * - Supports only rule body (no selectors)\n * - Requires semicolon and new line after the value (except of last line)\n * - No nested rules support\n */\n\nvar parse = (function (cssText) {\n  var style = {};\n  var split = cssText.split(semiWithNl);\n\n  for (var i = 0; i < split.length; i++) {\n    var decl = (split[i] || '').trim();\n    if (!decl) continue;\n    var colonIndex = decl.indexOf(':');\n\n    if (colonIndex === -1) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Malformed CSS string \\\"\" + decl + \"\\\"\") : void 0;\n      continue;\n    }\n\n    var prop = decl.substr(0, colonIndex).trim();\n    var value = decl.substr(colonIndex + 1).trim();\n    style[prop] = value;\n  }\n\n  return style;\n});\n\nvar onProcessRule = function onProcessRule(rule) {\n  if (typeof rule.style === 'string') {\n    // $FlowFixMe: We can safely assume that rule has the style property\n    rule.style = parse(rule.style);\n  }\n};\n\nfunction templatePlugin() {\n  return {\n    onProcessRule: onProcessRule\n  };\n}\n\nexport default templatePlugin;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { RuleList } from 'jss';\n\nvar at = '@global';\nvar atPrefix = '@global ';\n\nvar GlobalContainerRule =\n/*#__PURE__*/\nfunction () {\n  function GlobalContainerRule(key, styles, options) {\n    this.type = 'global';\n    this.at = at;\n    this.rules = void 0;\n    this.options = void 0;\n    this.key = void 0;\n    this.isProcessed = false;\n    this.key = key;\n    this.options = options;\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var selector in styles) {\n      this.rules.add(selector, styles[selector]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Get a rule.\n   */\n\n\n  var _proto = GlobalContainerRule.prototype;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Create and register rule, run plugins.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, style, options) {\n    var rule = this.rules.add(name, style, options);\n    this.options.jss.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString() {\n    return this.rules.toString();\n  };\n\n  return GlobalContainerRule;\n}();\n\nvar GlobalPrefixedRule =\n/*#__PURE__*/\nfunction () {\n  function GlobalPrefixedRule(key, style, options) {\n    this.type = 'global';\n    this.at = at;\n    this.options = void 0;\n    this.rule = void 0;\n    this.isProcessed = false;\n    this.key = void 0;\n    this.key = key;\n    this.options = options;\n    var selector = key.substr(atPrefix.length);\n    this.rule = options.jss.createRule(selector, style, _extends({}, options, {\n      parent: this\n    }));\n  }\n\n  var _proto2 = GlobalPrefixedRule.prototype;\n\n  _proto2.toString = function toString(options) {\n    return this.rule ? this.rule.toString(options) : '';\n  };\n\n  return GlobalPrefixedRule;\n}();\n\nvar separatorRegExp = /\\s*,\\s*/g;\n\nfunction addScope(selector, scope) {\n  var parts = selector.split(separatorRegExp);\n  var scoped = '';\n\n  for (var i = 0; i < parts.length; i++) {\n    scoped += scope + \" \" + parts[i].trim();\n    if (parts[i + 1]) scoped += ', ';\n  }\n\n  return scoped;\n}\n\nfunction handleNestedGlobalContainerRule(rule) {\n  var options = rule.options,\n      style = rule.style;\n  var rules = style ? style[at] : null;\n  if (!rules) return;\n\n  for (var name in rules) {\n    options.sheet.addRule(name, rules[name], _extends({}, options, {\n      selector: addScope(name, rule.selector)\n    }));\n  }\n\n  delete style[at];\n}\n\nfunction handlePrefixedGlobalRule(rule) {\n  var options = rule.options,\n      style = rule.style;\n\n  for (var prop in style) {\n    if (prop[0] !== '@' || prop.substr(0, at.length) !== at) continue;\n    var selector = addScope(prop.substr(at.length), rule.selector);\n    options.sheet.addRule(selector, style[prop], _extends({}, options, {\n      selector: selector\n    }));\n    delete style[prop];\n  }\n}\n/**\n * Convert nested rules to separate, remove them from original styles.\n *\n * @param {Rule} rule\n * @api public\n */\n\n\nfunction jssGlobal() {\n  function onCreateRule(name, styles, options) {\n    if (!name) return null;\n\n    if (name === at) {\n      return new GlobalContainerRule(name, styles, options);\n    }\n\n    if (name[0] === '@' && name.substr(0, atPrefix.length) === atPrefix) {\n      return new GlobalPrefixedRule(name, styles, options);\n    }\n\n    var parent = options.parent;\n\n    if (parent) {\n      if (parent.type === 'global' || parent.options.parent && parent.options.parent.type === 'global') {\n        options.scoped = false;\n      }\n    }\n\n    if (options.scoped === false) {\n      options.selector = name;\n    }\n\n    return null;\n  }\n\n  function onProcessRule(rule) {\n    if (rule.type !== 'style') return;\n    handleNestedGlobalContainerRule(rule);\n    handlePrefixedGlobalRule(rule);\n  }\n\n  return {\n    onCreateRule: onCreateRule,\n    onProcessRule: onProcessRule\n  };\n}\n\nexport default jssGlobal;\n","import warning from 'tiny-warning';\n\n/* eslint-disable no-use-before-define */\n\nvar isObject = function isObject(obj) {\n  return obj && typeof obj === 'object' && !Array.isArray(obj);\n};\n\nvar valueNs = \"extendCurrValue\" + Date.now();\n\nfunction mergeExtend(style, rule, sheet, newStyle) {\n  var extendType = typeof style.extend; // Extend using a rule name.\n\n  if (extendType === 'string') {\n    if (!sheet) return;\n    var refRule = sheet.getRule(style.extend);\n    if (!refRule) return;\n\n    if (refRule === rule) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] A rule tries to extend itself \\n\" + rule.toString()) : void 0;\n      return;\n    }\n\n    var parent = refRule.options.parent;\n\n    if (parent) {\n      var originalStyle = parent.rules.raw[style.extend];\n      extend(originalStyle, rule, sheet, newStyle);\n    }\n\n    return;\n  } // Extend using an array of objects.\n\n\n  if (Array.isArray(style.extend)) {\n    for (var index = 0; index < style.extend.length; index++) {\n      extend(style.extend[index], rule, sheet, newStyle);\n    }\n\n    return;\n  } // Extend is a style object.\n\n\n  for (var prop in style.extend) {\n    if (prop === 'extend') {\n      extend(style.extend.extend, rule, sheet, newStyle);\n      continue;\n    }\n\n    if (isObject(style.extend[prop])) {\n      if (!(prop in newStyle)) newStyle[prop] = {};\n      extend(style.extend[prop], rule, sheet, newStyle[prop]);\n      continue;\n    }\n\n    newStyle[prop] = style.extend[prop];\n  }\n}\n\nfunction mergeRest(style, rule, sheet, newStyle) {\n  // Copy base style.\n  for (var prop in style) {\n    if (prop === 'extend') continue;\n\n    if (isObject(newStyle[prop]) && isObject(style[prop])) {\n      extend(style[prop], rule, sheet, newStyle[prop]);\n      continue;\n    }\n\n    if (isObject(style[prop])) {\n      newStyle[prop] = extend(style[prop], rule, sheet);\n      continue;\n    }\n\n    newStyle[prop] = style[prop];\n  }\n}\n/**\n * Recursively extend styles.\n */\n\n\nfunction extend(style, rule, sheet, newStyle) {\n  if (newStyle === void 0) {\n    newStyle = {};\n  }\n\n  mergeExtend(style, rule, sheet, newStyle);\n  mergeRest(style, rule, sheet, newStyle);\n  return newStyle;\n}\n/**\n * Handle `extend` property.\n *\n * @param {Rule} rule\n * @api public\n */\n\n\nfunction jssExtend() {\n  function onProcessStyle(style, rule, sheet) {\n    if ('extend' in style) return extend(style, rule, sheet);\n    return style;\n  }\n\n  function onChangeValue(value, prop, rule) {\n    if (prop !== 'extend') return value; // Value is empty, remove properties set previously.\n\n    if (value == null || value === false) {\n      // $FlowFixMe: Flow complains because there is no indexer property in StyleRule\n      for (var key in rule[valueNs]) {\n        rule.prop(key, null);\n      } // $FlowFixMe: Flow complains because there is no indexer property in StyleRule\n\n\n      rule[valueNs] = null;\n      return null;\n    }\n\n    if (typeof value === 'object') {\n      // $FlowFixMe: This will be an object\n      for (var _key in value) {\n        rule.prop(_key, value[_key]);\n      } // $FlowFixMe: Flow complains because there is no indexer property in StyleRule\n\n\n      rule[valueNs] = value;\n    } // Make sure we don't set the value in the core.\n\n\n    return null;\n  }\n\n  return {\n    onProcessStyle: onProcessStyle,\n    onChangeValue: onChangeValue\n  };\n}\n\nexport default jssExtend;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport warning from 'tiny-warning';\n\nvar separatorRegExp = /\\s*,\\s*/g;\nvar parentRegExp = /&/g;\nvar refRegExp = /\\$([\\w-]+)/g;\n/**\n * Convert nested rules to separate, remove them from original styles.\n *\n * @param {Rule} rule\n * @api public\n */\n\nfunction jssNested() {\n  // Get a function to be used for $ref replacement.\n  function getReplaceRef(container, sheet) {\n    return function (match, key) {\n      var rule = container.getRule(key) || sheet && sheet.getRule(key);\n\n      if (rule) {\n        rule = rule;\n        return rule.selector;\n      }\n\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Could not find the referenced rule \\\"\" + key + \"\\\" in \\\"\" + (container.options.meta || container.toString()) + \"\\\".\") : void 0;\n      return key;\n    };\n  }\n\n  function replaceParentRefs(nestedProp, parentProp) {\n    var parentSelectors = parentProp.split(separatorRegExp);\n    var nestedSelectors = nestedProp.split(separatorRegExp);\n    var result = '';\n\n    for (var i = 0; i < parentSelectors.length; i++) {\n      var parent = parentSelectors[i];\n\n      for (var j = 0; j < nestedSelectors.length; j++) {\n        var nested = nestedSelectors[j];\n        if (result) result += ', '; // Replace all & by the parent or prefix & with the parent.\n\n        result += nested.indexOf('&') !== -1 ? nested.replace(parentRegExp, parent) : parent + \" \" + nested;\n      }\n    }\n\n    return result;\n  }\n\n  function getOptions(rule, container, prevOptions) {\n    // Options has been already created, now we only increase index.\n    if (prevOptions) return _extends({}, prevOptions, {\n      index: prevOptions.index + 1\n    });\n    var nestingLevel = rule.options.nestingLevel;\n    nestingLevel = nestingLevel === undefined ? 1 : nestingLevel + 1;\n\n    var options = _extends({}, rule.options, {\n      nestingLevel: nestingLevel,\n      index: container.indexOf(rule) + 1 // We don't need the parent name to be set options for chlid.\n\n    });\n\n    delete options.name;\n    return options;\n  }\n\n  function onProcessStyle(style, rule, sheet) {\n    if (rule.type !== 'style') return style;\n    var styleRule = rule;\n    var container = styleRule.options.parent;\n    var options;\n    var replaceRef;\n\n    for (var prop in style) {\n      var isNested = prop.indexOf('&') !== -1;\n      var isNestedConditional = prop[0] === '@';\n      if (!isNested && !isNestedConditional) continue;\n      options = getOptions(styleRule, container, options);\n\n      if (isNested) {\n        var selector = replaceParentRefs(prop, styleRule.selector); // Lazily create the ref replacer function just once for\n        // all nested rules within the sheet.\n\n        if (!replaceRef) replaceRef = getReplaceRef(container, sheet); // Replace all $refs.\n\n        selector = selector.replace(refRegExp, replaceRef);\n        container.addRule(selector, style[prop], _extends({}, options, {\n          selector: selector\n        }));\n      } else if (isNestedConditional) {\n        // Place conditional right after the parent rule to ensure right ordering.\n        container.addRule(prop, {}, options) // Flow expects more options but they aren't required\n        // And flow doesn't know this will always be a StyleRule which has the addRule method\n        // $FlowFixMe\n        .addRule(styleRule.key, style[prop], {\n          selector: styleRule.selector\n        });\n      }\n\n      delete style[prop];\n    }\n\n    return style;\n  }\n\n  return {\n    onProcessStyle: onProcessStyle\n  };\n}\n\nexport default jssNested;\n","import warning from 'tiny-warning';\n\n/**\n * Set selector.\n *\n * @param {Object} original rule\n * @param {String} className class string\n * @return {Boolean} flag, indicating function was successfull or not\n */\nfunction registerClass(rule, className) {\n  // Skip falsy values\n  if (!className) return true; // Support array of class names `{composes: ['foo', 'bar']}`\n\n  if (Array.isArray(className)) {\n    for (var index = 0; index < className.length; index++) {\n      var isSetted = registerClass(rule, className[index]);\n      if (!isSetted) return false;\n    }\n\n    return true;\n  } // Support space separated class names `{composes: 'foo bar'}`\n\n\n  if (className.indexOf(' ') > -1) {\n    return registerClass(rule, className.split(' '));\n  }\n\n  var _ref = rule.options,\n      parent = _ref.parent; // It is a ref to a local rule.\n\n  if (className[0] === '$') {\n    var refRule = parent.getRule(className.substr(1));\n\n    if (!refRule) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Referenced rule is not defined. \\n\" + rule.toString()) : void 0;\n      return false;\n    }\n\n    if (refRule === rule) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Cyclic composition detected. \\n\" + rule.toString()) : void 0;\n      return false;\n    }\n\n    parent.classes[rule.key] += \" \" + parent.classes[refRule.key];\n    return true;\n  }\n\n  parent.classes[rule.key] += \" \" + className;\n  return true;\n}\n/**\n * Convert compose property to additional class, remove property from original styles.\n *\n * @param {Rule} rule\n * @api public\n */\n\n\nfunction jssCompose() {\n  function onProcessStyle(style, rule) {\n    if (!('composes' in style)) return style;\n    registerClass(rule, style.composes); // Remove composes property to prevent infinite loop.\n\n    delete style.composes;\n    return style;\n  }\n\n  return {\n    onProcessStyle: onProcessStyle\n  };\n}\n\nexport default jssCompose;\n","/* eslint-disable no-var, prefer-template */\nvar uppercasePattern = /[A-Z]/g\nvar msPattern = /^ms-/\nvar cache = {}\n\nfunction toHyphenLower(match) {\n  return '-' + match.toLowerCase()\n}\n\nfunction hyphenateStyleName(name) {\n  if (cache.hasOwnProperty(name)) {\n    return cache[name]\n  }\n\n  var hName = name.replace(uppercasePattern, toHyphenLower)\n  return (cache[name] = msPattern.test(hName) ? '-' + hName : hName)\n}\n\nexport default hyphenateStyleName\n","import hyphenate from 'hyphenate-style-name';\n\n/**\n * Convert camel cased property names to dash separated.\n *\n * @param {Object} style\n * @return {Object}\n */\n\nfunction convertCase(style) {\n  var converted = {};\n\n  for (var prop in style) {\n    var key = prop.indexOf('--') === 0 ? prop : hyphenate(prop);\n    converted[key] = style[prop];\n  }\n\n  if (style.fallbacks) {\n    if (Array.isArray(style.fallbacks)) converted.fallbacks = style.fallbacks.map(convertCase);else converted.fallbacks = convertCase(style.fallbacks);\n  }\n\n  return converted;\n}\n/**\n * Allow camel cased property names by converting them back to dasherized.\n *\n * @param {Rule} rule\n */\n\n\nfunction camelCase() {\n  function onProcessStyle(style) {\n    if (Array.isArray(style)) {\n      // Handle rules like @font-face, which can have multiple styles in an array\n      for (var index = 0; index < style.length; index++) {\n        style[index] = convertCase(style[index]);\n      }\n\n      return style;\n    }\n\n    return convertCase(style);\n  }\n\n  function onChangeValue(value, prop, rule) {\n    if (prop.indexOf('--') === 0) {\n      return value;\n    }\n\n    var hyphenatedProp = hyphenate(prop); // There was no camel case in place\n\n    if (prop === hyphenatedProp) return value;\n    rule.prop(hyphenatedProp, value); // Core will ignore that property value we set the proper one above.\n\n    return null;\n  }\n\n  return {\n    onProcessStyle: onProcessStyle,\n    onChangeValue: onChangeValue\n  };\n}\n\nexport default camelCase;\n","import { hasCSSTOMSupport } from 'jss';\n\nvar px = hasCSSTOMSupport && CSS ? CSS.px : 'px';\nvar ms = hasCSSTOMSupport && CSS ? CSS.ms : 'ms';\nvar percent = hasCSSTOMSupport && CSS ? CSS.percent : '%';\n/**\n * Generated jss-plugin-default-unit CSS property units\n *\n * @type object\n */\n\nvar defaultUnits = {\n  // Animation properties\n  'animation-delay': ms,\n  'animation-duration': ms,\n  // Background properties\n  'background-position': px,\n  'background-position-x': px,\n  'background-position-y': px,\n  'background-size': px,\n  // Border Properties\n  border: px,\n  'border-bottom': px,\n  'border-bottom-left-radius': px,\n  'border-bottom-right-radius': px,\n  'border-bottom-width': px,\n  'border-left': px,\n  'border-left-width': px,\n  'border-radius': px,\n  'border-right': px,\n  'border-right-width': px,\n  'border-top': px,\n  'border-top-left-radius': px,\n  'border-top-right-radius': px,\n  'border-top-width': px,\n  'border-width': px,\n  // Margin properties\n  margin: px,\n  'margin-bottom': px,\n  'margin-left': px,\n  'margin-right': px,\n  'margin-top': px,\n  // Padding properties\n  padding: px,\n  'padding-bottom': px,\n  'padding-left': px,\n  'padding-right': px,\n  'padding-top': px,\n  // Mask properties\n  'mask-position-x': px,\n  'mask-position-y': px,\n  'mask-size': px,\n  // Width and height properties\n  height: px,\n  width: px,\n  'min-height': px,\n  'max-height': px,\n  'min-width': px,\n  'max-width': px,\n  // Position properties\n  bottom: px,\n  left: px,\n  top: px,\n  right: px,\n  // Shadow properties\n  'box-shadow': px,\n  'text-shadow': px,\n  // Column properties\n  'column-gap': px,\n  'column-rule': px,\n  'column-rule-width': px,\n  'column-width': px,\n  // Font and text properties\n  'font-size': px,\n  'font-size-delta': px,\n  'letter-spacing': px,\n  'text-indent': px,\n  'text-stroke': px,\n  'text-stroke-width': px,\n  'word-spacing': px,\n  // Motion properties\n  motion: px,\n  'motion-offset': px,\n  // Outline properties\n  outline: px,\n  'outline-offset': px,\n  'outline-width': px,\n  // Perspective properties\n  perspective: px,\n  'perspective-origin-x': percent,\n  'perspective-origin-y': percent,\n  // Transform properties\n  'transform-origin': percent,\n  'transform-origin-x': percent,\n  'transform-origin-y': percent,\n  'transform-origin-z': percent,\n  // Transition properties\n  'transition-delay': ms,\n  'transition-duration': ms,\n  // Alignment properties\n  'vertical-align': px,\n  'flex-basis': px,\n  // Some random properties\n  'shape-margin': px,\n  size: px,\n  // Grid properties\n  grid: px,\n  'grid-gap': px,\n  'grid-row-gap': px,\n  'grid-column-gap': px,\n  'grid-template-rows': px,\n  'grid-template-columns': px,\n  'grid-auto-rows': px,\n  'grid-auto-columns': px,\n  // Not existing properties.\n  // Used to avoid issues with jss-plugin-expand integration.\n  'box-shadow-x': px,\n  'box-shadow-y': px,\n  'box-shadow-blur': px,\n  'box-shadow-spread': px,\n  'font-line-height': px,\n  'text-shadow-x': px,\n  'text-shadow-y': px,\n  'text-shadow-blur': px\n};\n\n/**\n * Clones the object and adds a camel cased property version.\n */\nfunction addCamelCasedVersion(obj) {\n  var regExp = /(-[a-z])/g;\n\n  var replace = function replace(str) {\n    return str[1].toUpperCase();\n  };\n\n  var newObj = {};\n\n  for (var _key in obj) {\n    newObj[_key] = obj[_key];\n    newObj[_key.replace(regExp, replace)] = obj[_key];\n  }\n\n  return newObj;\n}\n\nvar units = addCamelCasedVersion(defaultUnits);\n/**\n * Recursive deep style passing function\n */\n\nfunction iterate(prop, value, options) {\n  if (!value) return value;\n\n  if (Array.isArray(value)) {\n    for (var i = 0; i < value.length; i++) {\n      value[i] = iterate(prop, value[i], options);\n    }\n  } else if (typeof value === 'object') {\n    if (prop === 'fallbacks') {\n      for (var innerProp in value) {\n        value[innerProp] = iterate(innerProp, value[innerProp], options);\n      }\n    } else {\n      for (var _innerProp in value) {\n        value[_innerProp] = iterate(prop + \"-\" + _innerProp, value[_innerProp], options);\n      }\n    }\n  } else if (typeof value === 'number') {\n    if (options[prop]) {\n      return \"\" + value + options[prop];\n    }\n\n    if (units[prop]) {\n      return typeof units[prop] === 'function' ? units[prop](value).toString() : \"\" + value + units[prop];\n    }\n\n    return value.toString();\n  }\n\n  return value;\n}\n/**\n * Add unit to numeric values.\n */\n\n\nfunction defaultUnit(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var camelCasedOptions = addCamelCasedVersion(options);\n\n  function onProcessStyle(style, rule) {\n    if (rule.type !== 'style') return style;\n\n    for (var prop in style) {\n      style[prop] = iterate(prop, style[prop], camelCasedOptions);\n    }\n\n    return style;\n  }\n\n  function onChangeValue(value, prop) {\n    return iterate(prop, value, camelCasedOptions);\n  }\n\n  return {\n    onProcessStyle: onProcessStyle,\n    onChangeValue: onChangeValue\n  };\n}\n\nexport default defaultUnit;\n","/**\n * A scheme for converting properties from array to regular style.\n * All properties listed below will be transformed to a string separated by space.\n */\nvar propArray = {\n  'background-size': true,\n  'background-position': true,\n  border: true,\n  'border-bottom': true,\n  'border-left': true,\n  'border-top': true,\n  'border-right': true,\n  'border-radius': true,\n  'border-image': true,\n  'border-width': true,\n  'border-style': true,\n  'border-color': true,\n  'box-shadow': true,\n  flex: true,\n  margin: true,\n  padding: true,\n  outline: true,\n  'transform-origin': true,\n  transform: true,\n  transition: true\n  /**\n   * A scheme for converting arrays to regular styles inside of objects.\n   * For e.g.: \"{position: [0, 0]}\" => \"background-position: 0 0;\".\n   */\n\n};\nvar propArrayInObj = {\n  position: true,\n  // background-position\n  size: true // background-size\n\n  /**\n   * A scheme for parsing and building correct styles from passed objects.\n   */\n\n};\nvar propObj = {\n  padding: {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  },\n  margin: {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  },\n  background: {\n    attachment: null,\n    color: null,\n    image: null,\n    position: null,\n    repeat: null\n  },\n  border: {\n    width: null,\n    style: null,\n    color: null\n  },\n  'border-top': {\n    width: null,\n    style: null,\n    color: null\n  },\n  'border-right': {\n    width: null,\n    style: null,\n    color: null\n  },\n  'border-bottom': {\n    width: null,\n    style: null,\n    color: null\n  },\n  'border-left': {\n    width: null,\n    style: null,\n    color: null\n  },\n  outline: {\n    width: null,\n    style: null,\n    color: null\n  },\n  'list-style': {\n    type: null,\n    position: null,\n    image: null\n  },\n  transition: {\n    property: null,\n    duration: null,\n    'timing-function': null,\n    timingFunction: null,\n    // Needed for avoiding comilation issues with jss-plugin-camel-case\n    delay: null\n  },\n  animation: {\n    name: null,\n    duration: null,\n    'timing-function': null,\n    timingFunction: null,\n    // Needed to avoid compilation issues with jss-plugin-camel-case\n    delay: null,\n    'iteration-count': null,\n    iterationCount: null,\n    // Needed to avoid compilation issues with jss-plugin-camel-case\n    direction: null,\n    'fill-mode': null,\n    fillMode: null,\n    // Needed to avoid compilation issues with jss-plugin-camel-case\n    'play-state': null,\n    playState: null // Needed to avoid compilation issues with jss-plugin-camel-case\n\n  },\n  'box-shadow': {\n    x: 0,\n    y: 0,\n    blur: 0,\n    spread: 0,\n    color: null,\n    inset: null\n  },\n  'text-shadow': {\n    x: 0,\n    y: 0,\n    blur: null,\n    color: null\n  }\n  /**\n   * A scheme for converting non-standart properties inside object.\n   * For e.g.: include 'border-radius' property inside 'border' object.\n   */\n\n};\nvar customPropObj = {\n  border: {\n    radius: 'border-radius',\n    image: 'border-image',\n    width: 'border-width',\n    style: 'border-style',\n    color: 'border-color'\n  },\n  'border-bottom': {\n    width: 'border-bottom-width',\n    style: 'border-bottom-style',\n    color: 'border-bottom-color'\n  },\n  'border-top': {\n    width: 'border-top-width',\n    style: 'border-top-style',\n    color: 'border-top-color'\n  },\n  'border-left': {\n    width: 'border-left-width',\n    style: 'border-left-style',\n    color: 'border-left-color'\n  },\n  'border-right': {\n    width: 'border-right-width',\n    style: 'border-right-style',\n    color: 'border-right-color'\n  },\n  background: {\n    size: 'background-size',\n    image: 'background-image'\n  },\n  font: {\n    style: 'font-style',\n    variant: 'font-variant',\n    weight: 'font-weight',\n    stretch: 'font-stretch',\n    size: 'font-size',\n    family: 'font-family',\n    lineHeight: 'line-height',\n    // Needed to avoid compilation issues with jss-plugin-camel-case\n    'line-height': 'line-height'\n  },\n  flex: {\n    grow: 'flex-grow',\n    basis: 'flex-basis',\n    direction: 'flex-direction',\n    wrap: 'flex-wrap',\n    flow: 'flex-flow',\n    shrink: 'flex-shrink'\n  },\n  align: {\n    self: 'align-self',\n    items: 'align-items',\n    content: 'align-content'\n  },\n  grid: {\n    'template-columns': 'grid-template-columns',\n    templateColumns: 'grid-template-columns',\n    'template-rows': 'grid-template-rows',\n    templateRows: 'grid-template-rows',\n    'template-areas': 'grid-template-areas',\n    templateAreas: 'grid-template-areas',\n    template: 'grid-template',\n    'auto-columns': 'grid-auto-columns',\n    autoColumns: 'grid-auto-columns',\n    'auto-rows': 'grid-auto-rows',\n    autoRows: 'grid-auto-rows',\n    'auto-flow': 'grid-auto-flow',\n    autoFlow: 'grid-auto-flow',\n    row: 'grid-row',\n    column: 'grid-column',\n    'row-start': 'grid-row-start',\n    rowStart: 'grid-row-start',\n    'row-end': 'grid-row-end',\n    rowEnd: 'grid-row-end',\n    'column-start': 'grid-column-start',\n    columnStart: 'grid-column-start',\n    'column-end': 'grid-column-end',\n    columnEnd: 'grid-column-end',\n    area: 'grid-area',\n    gap: 'grid-gap',\n    'row-gap': 'grid-row-gap',\n    rowGap: 'grid-row-gap',\n    'column-gap': 'grid-column-gap',\n    columnGap: 'grid-column-gap'\n  }\n};\n\n/* eslint-disable no-use-before-define */\n\n/**\n * Map values by given prop.\n *\n * @param {Array} array of values\n * @param {String} original property\n * @param {String} original rule\n * @return {String} mapped values\n */\nfunction mapValuesByProp(value, prop, rule) {\n  return value.map(function (item) {\n    return objectToArray(item, prop, rule, false, true);\n  });\n}\n/**\n * Convert array to nested array, if needed\n */\n\n\nfunction processArray(value, prop, scheme, rule) {\n  if (scheme[prop] == null) return value;\n  if (value.length === 0) return [];\n  if (Array.isArray(value[0])) return processArray(value[0], prop, scheme, rule);\n\n  if (typeof value[0] === 'object') {\n    return mapValuesByProp(value, prop, rule);\n  }\n\n  return [value];\n}\n/**\n * Convert object to array.\n */\n\n\nfunction objectToArray(value, prop, rule, isFallback, isInArray) {\n  if (!(propObj[prop] || customPropObj[prop])) return [];\n  var result = []; // Check if exists any non-standard property\n\n  if (customPropObj[prop]) {\n    // eslint-disable-next-line no-param-reassign\n    value = customPropsToStyle(value, rule, customPropObj[prop], isFallback);\n  } // Pass throught all standart props\n\n\n  if (Object.keys(value).length) {\n    for (var baseProp in propObj[prop]) {\n      if (value[baseProp]) {\n        if (Array.isArray(value[baseProp])) {\n          result.push(propArrayInObj[baseProp] === null ? value[baseProp] : value[baseProp].join(' '));\n        } else result.push(value[baseProp]);\n\n        continue;\n      } // Add default value from props config.\n\n\n      if (propObj[prop][baseProp] != null) {\n        result.push(propObj[prop][baseProp]);\n      }\n    }\n  }\n\n  if (!result.length || isInArray) return result;\n  return [result];\n}\n/**\n * Convert custom properties values to styles adding them to rule directly\n */\n\n\nfunction customPropsToStyle(value, rule, customProps, isFallback) {\n  for (var prop in customProps) {\n    var propName = customProps[prop]; // If current property doesn't exist already in rule - add new one\n\n    if (typeof value[prop] !== 'undefined' && (isFallback || !rule.prop(propName))) {\n      var _styleDetector;\n\n      var appendedValue = styleDetector((_styleDetector = {}, _styleDetector[propName] = value[prop], _styleDetector), rule)[propName]; // Add style directly in rule\n\n      if (isFallback) rule.style.fallbacks[propName] = appendedValue;else rule.style[propName] = appendedValue;\n    } // Delete converted property to avoid double converting\n\n\n    delete value[prop];\n  }\n\n  return value;\n}\n/**\n * Detect if a style needs to be converted.\n */\n\n\nfunction styleDetector(style, rule, isFallback) {\n  for (var prop in style) {\n    var value = style[prop];\n\n    if (Array.isArray(value)) {\n      // Check double arrays to avoid recursion.\n      if (!Array.isArray(value[0])) {\n        if (prop === 'fallbacks') {\n          for (var index = 0; index < style.fallbacks.length; index++) {\n            style.fallbacks[index] = styleDetector(style.fallbacks[index], rule, true);\n          }\n\n          continue;\n        }\n\n        style[prop] = processArray(value, prop, propArray, rule); // Avoid creating properties with empty values\n\n        if (!style[prop].length) delete style[prop];\n      }\n    } else if (typeof value === 'object') {\n      if (prop === 'fallbacks') {\n        style.fallbacks = styleDetector(style.fallbacks, rule, true);\n        continue;\n      }\n\n      style[prop] = objectToArray(value, prop, rule, isFallback); // Avoid creating properties with empty values\n\n      if (!style[prop].length) delete style[prop];\n    } // Maybe a computed value resulting in an empty string\n    else if (style[prop] === '') delete style[prop];\n  }\n\n  return style;\n}\n/**\n * Adds possibility to write expanded styles.\n */\n\n\nfunction jssExpand() {\n  function onProcessStyle(style, rule) {\n    if (!style || rule.type !== 'style') return style;\n\n    if (Array.isArray(style)) {\n      // Pass rules one by one and reformat them\n      for (var index = 0; index < style.length; index++) {\n        style[index] = styleDetector(style[index], rule);\n      }\n\n      return style;\n    }\n\n    return styleDetector(style, rule);\n  }\n\n  return {\n    onProcessStyle: onProcessStyle\n  };\n}\n\nexport default jssExpand;\n","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","import isInBrowser from 'is-in-browser';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\n\n// Export javascript style and css style vendor prefixes.\nvar js = '';\nvar css = '';\nvar vendor = '';\nvar browser = '';\nvar isTouch = isInBrowser && 'ontouchstart' in document.documentElement; // We should not do anything if required serverside.\n\nif (isInBrowser) {\n  // Order matters. We need to check Webkit the last one because\n  // other vendors use to add Webkit prefixes to some properties\n  var jsCssMap = {\n    Moz: '-moz-',\n    ms: '-ms-',\n    O: '-o-',\n    Webkit: '-webkit-'\n  };\n\n  var _document$createEleme = document.createElement('p'),\n      style = _document$createEleme.style;\n\n  var testProp = 'Transform';\n\n  for (var key in jsCssMap) {\n    if (key + testProp in style) {\n      js = key;\n      css = jsCssMap[key];\n      break;\n    }\n  } // Correctly detect the Edge browser.\n\n\n  if (js === 'Webkit' && 'msHyphens' in style) {\n    js = 'ms';\n    css = jsCssMap.ms;\n    browser = 'edge';\n  } // Correctly detect the Safari browser.\n\n\n  if (js === 'Webkit' && '-apple-trailing-word' in style) {\n    vendor = 'apple';\n  }\n}\n/**\n * Vendor prefix string for the current browser.\n *\n * @type {{js: String, css: String, vendor: String, browser: String}}\n * @api public\n */\n\n\nvar prefix = {\n  js: js,\n  css: css,\n  vendor: vendor,\n  browser: browser,\n  isTouch: isTouch\n};\n\n/**\n * Test if a keyframe at-rule should be prefixed or not\n *\n * @param {String} vendor prefix string for the current browser.\n * @return {String}\n * @api public\n */\n\nfunction supportedKeyframes(key) {\n  // Keyframes is already prefixed. e.g. key = '@-webkit-keyframes a'\n  if (key[1] === '-') return key; // No need to prefix IE/Edge. Older browsers will ignore unsupported rules.\n  // https://caniuse.com/#search=keyframes\n\n  if (prefix.js === 'ms') return key;\n  return \"@\" + prefix.css + \"keyframes\" + key.substr(10);\n}\n\n// https://caniuse.com/#search=appearance\n\nvar appearence = {\n  noPrefill: ['appearance'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'appearance') return false;\n    if (prefix.js === 'ms') return \"-webkit-\" + prop;\n    return prefix.css + prop;\n  }\n};\n\n// https://caniuse.com/#search=color-adjust\n\nvar colorAdjust = {\n  noPrefill: ['color-adjust'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'color-adjust') return false;\n    if (prefix.js === 'Webkit') return prefix.css + \"print-\" + prop;\n    return prop;\n  }\n};\n\nvar regExp = /[-\\s]+(.)?/g;\n/**\n * Replaces the letter with the capital letter\n *\n * @param {String} match\n * @param {String} c\n * @return {String}\n * @api private\n */\n\nfunction toUpper(match, c) {\n  return c ? c.toUpperCase() : '';\n}\n/**\n * Convert dash separated strings to camel-cased.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\n\nfunction camelize(str) {\n  return str.replace(regExp, toUpper);\n}\n\n/**\n * Convert dash separated strings to pascal cased.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction pascalize(str) {\n  return camelize(\"-\" + str);\n}\n\n// but we can use a longhand property instead.\n// https://caniuse.com/#search=mask\n\nvar mask = {\n  noPrefill: ['mask'],\n  supportedProperty: function supportedProperty(prop, style) {\n    if (!/^mask/.test(prop)) return false;\n\n    if (prefix.js === 'Webkit') {\n      var longhand = 'mask-image';\n\n      if (camelize(longhand) in style) {\n        return prop;\n      }\n\n      if (prefix.js + pascalize(longhand) in style) {\n        return prefix.css + prop;\n      }\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=text-orientation\n\nvar textOrientation = {\n  noPrefill: ['text-orientation'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'text-orientation') return false;\n\n    if (prefix.vendor === 'apple' && !prefix.isTouch) {\n      return prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=transform\n\nvar transform = {\n  noPrefill: ['transform'],\n  supportedProperty: function supportedProperty(prop, style, options) {\n    if (prop !== 'transform') return false;\n\n    if (options.transform) {\n      return prop;\n    }\n\n    return prefix.css + prop;\n  }\n};\n\n// https://caniuse.com/#search=transition\n\nvar transition = {\n  noPrefill: ['transition'],\n  supportedProperty: function supportedProperty(prop, style, options) {\n    if (prop !== 'transition') return false;\n\n    if (options.transition) {\n      return prop;\n    }\n\n    return prefix.css + prop;\n  }\n};\n\n// https://caniuse.com/#search=writing-mode\n\nvar writingMode = {\n  noPrefill: ['writing-mode'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'writing-mode') return false;\n\n    if (prefix.js === 'Webkit' || prefix.js === 'ms') {\n      return prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=user-select\n\nvar userSelect = {\n  noPrefill: ['user-select'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'user-select') return false;\n\n    if (prefix.js === 'Moz' || prefix.js === 'ms' || prefix.vendor === 'apple') {\n      return prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=multicolumn\n// https://github.com/postcss/autoprefixer/issues/491\n// https://github.com/postcss/autoprefixer/issues/177\n\nvar breakPropsOld = {\n  supportedProperty: function supportedProperty(prop, style) {\n    if (!/^break-/.test(prop)) return false;\n\n    if (prefix.js === 'Webkit') {\n      var jsProp = \"WebkitColumn\" + pascalize(prop);\n      return jsProp in style ? prefix.css + \"column-\" + prop : false;\n    }\n\n    if (prefix.js === 'Moz') {\n      var _jsProp = \"page\" + pascalize(prop);\n\n      return _jsProp in style ? \"page-\" + prop : false;\n    }\n\n    return false;\n  }\n};\n\n// See https://github.com/postcss/autoprefixer/issues/324.\n\nvar inlineLogicalOld = {\n  supportedProperty: function supportedProperty(prop, style) {\n    if (!/^(border|margin|padding)-inline/.test(prop)) return false;\n    if (prefix.js === 'Moz') return prop;\n    var newProp = prop.replace('-inline', '');\n    return prefix.js + pascalize(newProp) in style ? prefix.css + newProp : false;\n  }\n};\n\n// Camelization is required because we can't test using.\n// CSS syntax for e.g. in FF.\n\nvar unprefixed = {\n  supportedProperty: function supportedProperty(prop, style) {\n    return camelize(prop) in style ? prop : false;\n  }\n};\n\nvar prefixed = {\n  supportedProperty: function supportedProperty(prop, style) {\n    var pascalized = pascalize(prop); // Return custom CSS variable without prefixing.\n\n    if (prop[0] === '-') return prop; // Return already prefixed value without prefixing.\n\n    if (prop[0] === '-' && prop[1] === '-') return prop;\n    if (prefix.js + pascalized in style) return prefix.css + prop; // Try webkit fallback.\n\n    if (prefix.js !== 'Webkit' && \"Webkit\" + pascalized in style) return \"-webkit-\" + prop;\n    return false;\n  }\n};\n\n// https://caniuse.com/#search=scroll-snap\n\nvar scrollSnap = {\n  supportedProperty: function supportedProperty(prop) {\n    if (prop.substring(0, 11) !== 'scroll-snap') return false;\n\n    if (prefix.js === 'ms') {\n      return \"\" + prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=overscroll-behavior\n\nvar overscrollBehavior = {\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'overscroll-behavior') return false;\n\n    if (prefix.js === 'ms') {\n      return prefix.css + \"scroll-chaining\";\n    }\n\n    return prop;\n  }\n};\n\nvar propMap = {\n  'flex-grow': 'flex-positive',\n  'flex-shrink': 'flex-negative',\n  'flex-basis': 'flex-preferred-size',\n  'justify-content': 'flex-pack',\n  order: 'flex-order',\n  'align-items': 'flex-align',\n  'align-content': 'flex-line-pack' // 'align-self' is handled by 'align-self' plugin.\n\n}; // Support old flex spec from 2012.\n\nvar flex2012 = {\n  supportedProperty: function supportedProperty(prop, style) {\n    var newProp = propMap[prop];\n    if (!newProp) return false;\n    return prefix.js + pascalize(newProp) in style ? prefix.css + newProp : false;\n  }\n};\n\nvar propMap$1 = {\n  flex: 'box-flex',\n  'flex-grow': 'box-flex',\n  'flex-direction': ['box-orient', 'box-direction'],\n  order: 'box-ordinal-group',\n  'align-items': 'box-align',\n  'flex-flow': ['box-orient', 'box-direction'],\n  'justify-content': 'box-pack'\n};\nvar propKeys = Object.keys(propMap$1);\n\nvar prefixCss = function prefixCss(p) {\n  return prefix.css + p;\n}; // Support old flex spec from 2009.\n\n\nvar flex2009 = {\n  supportedProperty: function supportedProperty(prop, style, _ref) {\n    var multiple = _ref.multiple;\n\n    if (propKeys.indexOf(prop) > -1) {\n      var newProp = propMap$1[prop];\n\n      if (!Array.isArray(newProp)) {\n        return prefix.js + pascalize(newProp) in style ? prefix.css + newProp : false;\n      }\n\n      if (!multiple) return false;\n\n      for (var i = 0; i < newProp.length; i++) {\n        if (!(prefix.js + pascalize(newProp[0]) in style)) {\n          return false;\n        }\n      }\n\n      return newProp.map(prefixCss);\n    }\n\n    return false;\n  }\n};\n\n// plugins = [\n//   ...plugins,\n//    breakPropsOld,\n//    inlineLogicalOld,\n//    unprefixed,\n//    prefixed,\n//    scrollSnap,\n//    flex2012,\n//    flex2009\n// ]\n// Plugins without 'noPrefill' value, going last.\n// 'flex-*' plugins should be at the bottom.\n// 'flex2009' going after 'flex2012'.\n// 'prefixed' going after 'unprefixed'\n\nvar plugins = [appearence, colorAdjust, mask, textOrientation, transform, transition, writingMode, userSelect, breakPropsOld, inlineLogicalOld, unprefixed, prefixed, scrollSnap, overscrollBehavior, flex2012, flex2009];\nvar propertyDetectors = plugins.filter(function (p) {\n  return p.supportedProperty;\n}).map(function (p) {\n  return p.supportedProperty;\n});\nvar noPrefill = plugins.filter(function (p) {\n  return p.noPrefill;\n}).reduce(function (a, p) {\n  a.push.apply(a, _toConsumableArray(p.noPrefill));\n  return a;\n}, []);\n\nvar el;\nvar cache = {};\n\nif (isInBrowser) {\n  el = document.createElement('p'); // We test every property on vendor prefix requirement.\n  // Once tested, result is cached. It gives us up to 70% perf boost.\n  // http://jsperf.com/element-style-object-access-vs-plain-object\n  //\n  // Prefill cache with known css properties to reduce amount of\n  // properties we need to feature test at runtime.\n  // http://davidwalsh.name/vendor-prefix\n\n  var computed = window.getComputedStyle(document.documentElement, '');\n\n  for (var key$1 in computed) {\n    // eslint-disable-next-line no-restricted-globals\n    if (!isNaN(key$1)) cache[computed[key$1]] = computed[key$1];\n  } // Properties that cannot be correctly detected using the\n  // cache prefill method.\n\n\n  noPrefill.forEach(function (x) {\n    return delete cache[x];\n  });\n}\n/**\n * Test if a property is supported, returns supported property with vendor\n * prefix if required. Returns `false` if not supported.\n *\n * @param {String} prop dash separated\n * @param {Object} [options]\n * @return {String|Boolean}\n * @api public\n */\n\n\nfunction supportedProperty(prop, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  // For server-side rendering.\n  if (!el) return prop; // Remove cache for benchmark tests or return property from the cache.\n\n  if (process.env.NODE_ENV !== 'benchmark' && cache[prop] != null) {\n    return cache[prop];\n  } // Check if 'transition' or 'transform' natively supported in browser.\n\n\n  if (prop === 'transition' || prop === 'transform') {\n    options[prop] = prop in el.style;\n  } // Find a plugin for current prefix property.\n\n\n  for (var i = 0; i < propertyDetectors.length; i++) {\n    cache[prop] = propertyDetectors[i](prop, el.style, options); // Break loop, if value found.\n\n    if (cache[prop]) break;\n  } // Reset styles for current property.\n  // Firefox can even throw an error for invalid properties, e.g., \"0\".\n\n\n  try {\n    el.style[prop] = '';\n  } catch (err) {\n    return false;\n  }\n\n  return cache[prop];\n}\n\nvar cache$1 = {};\nvar transitionProperties = {\n  transition: 1,\n  'transition-property': 1,\n  '-webkit-transition': 1,\n  '-webkit-transition-property': 1\n};\nvar transPropsRegExp = /(^\\s*[\\w-]+)|, (\\s*[\\w-]+)(?![^()]*\\))/g;\nvar el$1;\n/**\n * Returns prefixed value transition/transform if needed.\n *\n * @param {String} match\n * @param {String} p1\n * @param {String} p2\n * @return {String}\n * @api private\n */\n\nfunction prefixTransitionCallback(match, p1, p2) {\n  if (p1 === 'var') return 'var';\n  if (p1 === 'all') return 'all';\n  if (p2 === 'all') return ', all';\n  var prefixedValue = p1 ? supportedProperty(p1) : \", \" + supportedProperty(p2);\n  if (!prefixedValue) return p1 || p2;\n  return prefixedValue;\n}\n\nif (isInBrowser) el$1 = document.createElement('p');\n/**\n * Returns prefixed value if needed. Returns `false` if value is not supported.\n *\n * @param {String} property\n * @param {String} value\n * @return {String|Boolean}\n * @api public\n */\n\nfunction supportedValue(property, value) {\n  // For server-side rendering.\n  var prefixedValue = value;\n  if (!el$1 || property === 'content') return value; // It is a string or a number as a string like '1'.\n  // We want only prefixable values here.\n  // eslint-disable-next-line no-restricted-globals\n\n  if (typeof prefixedValue !== 'string' || !isNaN(parseInt(prefixedValue, 10))) {\n    return prefixedValue;\n  } // Create cache key for current value.\n\n\n  var cacheKey = property + prefixedValue; // Remove cache for benchmark tests or return value from cache.\n\n  if (process.env.NODE_ENV !== 'benchmark' && cache$1[cacheKey] != null) {\n    return cache$1[cacheKey];\n  } // IE can even throw an error in some cases, for e.g. style.content = 'bar'.\n\n\n  try {\n    // Test value as it is.\n    el$1.style[property] = prefixedValue;\n  } catch (err) {\n    // Return false if value not supported.\n    cache$1[cacheKey] = false;\n    return false;\n  } // If 'transition' or 'transition-property' property.\n\n\n  if (transitionProperties[property]) {\n    prefixedValue = prefixedValue.replace(transPropsRegExp, prefixTransitionCallback);\n  } else if (el$1.style[property] === '') {\n    // Value with a vendor prefix.\n    prefixedValue = prefix.css + prefixedValue; // Hardcode test to convert \"flex\" to \"-ms-flexbox\" for IE10.\n\n    if (prefixedValue === '-ms-flex') el$1.style[property] = '-ms-flexbox'; // Test prefixed value.\n\n    el$1.style[property] = prefixedValue; // Return false if value not supported.\n\n    if (el$1.style[property] === '') {\n      cache$1[cacheKey] = false;\n      return false;\n    }\n  } // Reset styles for current property.\n\n\n  el$1.style[property] = ''; // Write current value to cache.\n\n  cache$1[cacheKey] = prefixedValue;\n  return cache$1[cacheKey];\n}\n\nexport { prefix, supportedKeyframes, supportedProperty, supportedValue };\n","import { supportedKeyframes, supportedValue, supportedProperty } from 'css-vendor';\nimport { toCssValue } from 'jss';\n\n/**\n * Add vendor prefix to a property name when needed.\n *\n * @api public\n */\n\nfunction jssVendorPrefixer() {\n  function onProcessRule(rule) {\n    if (rule.type === 'keyframes') {\n      var atRule = rule;\n      atRule.at = supportedKeyframes(atRule.at);\n    }\n  }\n\n  function prefixStyle(style) {\n    for (var prop in style) {\n      var value = style[prop];\n\n      if (prop === 'fallbacks' && Array.isArray(value)) {\n        style[prop] = value.map(prefixStyle);\n        continue;\n      }\n\n      var changeProp = false;\n      var supportedProp = supportedProperty(prop);\n      if (supportedProp && supportedProp !== prop) changeProp = true;\n      var changeValue = false;\n      var supportedValue$$1 = supportedValue(supportedProp, toCssValue(value));\n      if (supportedValue$$1 && supportedValue$$1 !== value) changeValue = true;\n\n      if (changeProp || changeValue) {\n        if (changeProp) delete style[prop];\n        style[supportedProp || prop] = supportedValue$$1 || value;\n      }\n    }\n\n    return style;\n  }\n\n  function onProcessStyle(style, rule) {\n    if (rule.type !== 'style') return style;\n    return prefixStyle(style);\n  }\n\n  function onChangeValue(value, prop) {\n    return supportedValue(prop, toCssValue(value)) || value;\n  }\n\n  return {\n    onProcessRule: onProcessRule,\n    onProcessStyle: onProcessStyle,\n    onChangeValue: onChangeValue\n  };\n}\n\nexport default jssVendorPrefixer;\n","/**\n * Sort props by length.\n */\nfunction jssPropsSort() {\n  var sort = function sort(prop0, prop1) {\n    if (prop0.length === prop1.length) {\n      return prop0 > prop1 ? 1 : -1;\n    }\n\n    return prop0.length - prop1.length;\n  };\n\n  return {\n    onProcessStyle: function onProcessStyle(style, rule) {\n      if (rule.type !== 'style') return style;\n      var newStyle = {};\n      var props = Object.keys(style).sort(sort);\n\n      for (var i = 0; i < props.length; i++) {\n        newStyle[props[i]] = style[props[i]];\n      }\n\n      return newStyle;\n    }\n  };\n}\n\nexport default jssPropsSort;\n","import functions from 'jss-plugin-rule-value-function';\nimport observable from 'jss-plugin-rule-value-observable';\nimport template from 'jss-plugin-template';\nimport global from 'jss-plugin-global';\nimport extend from 'jss-plugin-extend';\nimport nested from 'jss-plugin-nested';\nimport compose from 'jss-plugin-compose';\nimport camelCase from 'jss-plugin-camel-case';\nimport defaultUnit from 'jss-plugin-default-unit';\nimport expand from 'jss-plugin-expand';\nimport vendorPrefixer from 'jss-plugin-vendor-prefixer';\nimport propsSort from 'jss-plugin-props-sort';\n\nvar index = (function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return {\n    plugins: [functions(), observable(options.observable), template(), global(), extend(), nested(), compose(), camelCase(), defaultUnit(options.defaultUnit), expand(), vendorPrefixer(), propsSort()]\n  };\n});\n\nexport default index;\n","import jss from 'jss'\r\nimport preset from 'jss-preset-default';\r\n\r\njss.setup(preset())\r\nexport function createAndAppendStyles(style) {\r\n    const sheet = jss.createStyleSheet(style);\r\n    sheet.attach();\r\n    document.body.classList.add(sheet.classes.themeClass);\r\n}\r\n\r\n\r\n","import {getBotDetails} from \"./bot-details\";\r\nimport {IBotDetailsApiResp} from \"./typings/bot-detaills-api\";\r\nimport {$chatFooter, $loader} from \"./dom\";\r\nimport {getQueryStringValue} from \"./utility\";\r\nimport {sendMessageToBot, socketKey} from \"./send-api\";\r\nimport {environment} from \"./environment\";\r\nimport {ESourceType} from \"./typings/send-api\";\r\nimport {humanMessageHandler, initClientEvents, initEnvironment, sendFeedbackHandler} from \"./main\";\r\nimport {createAndAppendStyles} from \"./rammas.style\";\r\n\r\nlet socket;\r\nlet imiPreviewTemp;\r\n\r\nconst style = {\r\n    themeClass: {\r\n        'font-family': \"'DUBAI-REGULAR', 'IBM Plex Sans', sans-serif\",\r\n        \"message-wrapper\": {},\r\n        \"& .msg-bubble-human\": {\r\n            \"& .content\": {\r\n                \"background-color\": \"#087b36 !important\",\r\n                \"color\": \"#fff\",\r\n                \"border-radius\": \"20px 0 20px 20px !important\",\r\n                \"border-top-left-radius\": \"20px !important\",\r\n            }\r\n        },\r\n        \"& .message-container\": {\r\n            \"& .content\": {\r\n                \"background-color\": \"#fff\",\r\n                \"color\": \"#4e4e4e\",\r\n                \"padding\": \"12px !important\",\r\n                \"borderRadius\": \"0 20px 20px 20px !important\",\r\n                \"box-shadow\": \"0 1px 1px 0 rgba(0,0,0,.2) !important\",\r\n                \"&::after\": {\r\n                    \"display\": \"none !important\"\r\n                }\r\n            },\r\n\r\n            '& .message-wrapper-quick-reply': {\r\n                \"& button\": { /*styles for quick reply button*/\r\n                    \"background\": \"transparent\",\r\n                    \"border\": \"solid 1px #268126\",\r\n                    \"color\": \"#268126\",\r\n                    \"font-weight\": 600,\r\n                    \"border-radius\": \"10px\",\r\n                    \"padding\": \"10px 10px\",\r\n                    \"&:hover\": {\r\n                        \"background\": \"#268126\",\r\n                        \"color\": \"white\",\r\n                        \"transition\": \"color .3s ease,background-color .3s ease\",\r\n                    },\r\n                    \"box-shadow\": \"none !important\",\r\n                }\r\n            },\r\n            \"& .time\": {\r\n                \"display\": \"none\"\r\n            }\r\n        },\r\n\r\n        \"& .imi-preview-grid-container\": {\r\n            \"& .header\": {/*header*/\r\n                \"background-image\": \"-webkit-linear-gradient(left,#065726,#07682d,#087b36) !important\",\r\n                \"& .options\": {\r\n                },\r\n                \"& .bot-intro\": {\r\n                    \"background\": \"none\",\r\n                    \"& #bot-title\": {\r\n                        \"text-transform\": \"uppercase\",\r\n                        \"font-weight\": \"bold !important\",\r\n                    }\r\n                }\r\n            },\r\n            \"& .icon\": {\r\n                \"margin-left\": \"-44px\",\r\n                \"background\": \"none\",\r\n                \"& .fa\": {\r\n                    \"font-size\": \"25px\",\r\n                    \"color\": \"#717173\"\r\n                }\r\n            },\r\n        },\r\n\r\n        \"& .lang-rtl\": {\r\n            \"& #chat-input-icon\": {}\r\n        },\r\n\r\n\r\n        \"& .footer\": {\r\n            \"justify-content\": \"center\",\r\n            \"background\": \"#eee\",\r\n            \"border-top\": \"1px solid #aaa !important\",\r\n            \"box-shadow\": \"0 1px 5px 0 #9b9b9b !important\",\r\n            \"& input\": {\r\n                \"cursor\": \"auto\",\r\n                \"border-radius\": \"30px\",\r\n                \"height\": \"45px\",\r\n                \"background\": \"#fff\",\r\n                \"padding\": \"5px 15px !important\",\r\n                \"padding-right\": \"45px !important\",\r\n\r\n                '@media (min-width: 500px)': {\r\n                    \"max-width\": \"70% !important\",\r\n                    \"min-width\": \"300px !important\",\r\n                }\r\n            }\r\n        },\r\n\r\n        \"& .phone\": {\r\n            \"& .msg-bot-logo\": {\r\n                \"display\": \"none\"\r\n            },\r\n            \"& .footer\": {\r\n                \"justify-content\": \"center\",\r\n                \"background\": \"none\",\r\n                \"border-top\": \"1px solid #aaa !important\",\r\n                \"box-shadow\": \"none !important\",\r\n                \"& input\": {\r\n                    \"cursor\": \"auto\",\r\n                    \"border-radius\": \"30px\",\r\n                    \"height\": \"45px\",\r\n                    \"background\": \"#fff\",\r\n                    \"padding\": \"5px 15px !important\",\r\n                    \"padding-right\": \"45px !important\",\r\n\r\n                    '@media (min-width: 500px)': {\r\n                        \"max-width\": \"100% !important\",\r\n                        \"min-width\": \"00px !important\",\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n}\r\n\r\nfunction changeFavicon(img) {\r\n    (function () {\r\n        var link = document.querySelector(\"link[rel*='icon']\") || document.createElement('link');\r\n        link.type = 'image/x-icon';\r\n        link.rel = 'shortcut icon';\r\n        link.href = img;\r\n        document.getElementsByTagName('head')[0].appendChild(link);\r\n    })();\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', async function () {\r\n    initEnvironment();\r\n    const botDetails = await getBotDetails<IBotDetailsApiResp>();\r\n    initEnvironment(botDetails);\r\n    document.title = botDetails.name || 'IMIBot.ai';\r\n    changeFavicon(botDetails.logo);\r\n    // $chatFooter.classList.add('d-none');\r\n    try {\r\n        $loader && $loader.classList.add('d-none');\r\n        $chatFooter && $chatFooter.classList.remove('d-none');\r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n\r\n    const imiPreview = new ImiPreview();\r\n    imiPreviewTemp = imiPreview;\r\n    imiPreview.setSendHumanMessageCallback((message, quickReplyPayload) => {\r\n        debugger;\r\n        humanMessageHandler(message,ESourceType.human, quickReplyPayload);\r\n    });\r\n    imiPreview.setSendFeedback((val, feedback) => {\r\n        sendFeedbackHandler(val, feedback);\r\n    });\r\n\r\n    const fullBody = true;//getQueryStringValue('fullbody') === \"true\";\r\n    const phoneCasing = getQueryStringValue('phonecasing') === \"true\";\r\n    const brandColor = getQueryStringValue('brandcolor') || \"#087b36\";\r\n    const isRtl = getQueryStringValue('lang') === \"ar\";\r\n    brandColor = brandColor.replace('_', '#');\r\n\r\n    imiPreview.viewInit('.test-container', fullBody, phoneCasing, isRtl);\r\n    const $chatInput = document.getElementById('chat-input') as HTMLInputElement;\r\n    imiPreview.initAdditionalDom({$chatInput});\r\n    // imiPreview.\r\n    // appendMessageInChatBody(data.generated_msg, data);\r\n    // const botDetails = {description: \"dummy description\", logo: \"dummy logo\", title: \"dummy title\"};\r\n    // const languageApi =\r\n    const theme = {\r\n        brandColor: brandColor || 'green',\r\n        showMenu: false,\r\n        feedbackEnabled: botDetails.allow_feedback,\r\n        showOptionsEllipsis: !phoneCasing,\r\n        time24HrFormat: false\r\n    };\r\n\r\n    imiPreview.setOptions(botDetails, theme);\r\n    const firstMessageData = await sendMessageToBot(environment.bot_access_token, environment.enterprise_unique_name, 'hi', ESourceType.bot);\r\n\r\n    imiPreview.appendMessageInChatBody(firstMessageData.generated_msg, null, true);\r\n    initClientEvents();\r\n    const data = {\r\n        'connectionConfig': {\r\n            'namespace': 'BOT',\r\n            'enterprise_id': botDetails.enterprise_id,\r\n            socket_key: socketKey\r\n        },\r\n        'imi_bot_middleware_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjoiVGhpcyBpcyBJTUkgQk9UIG1pZGRsZXdhcmUiLCJpYXQiOjE1Njc4ODc5MTAsImV4cCI6NDE1OTg4NzkxMH0.dYbMaf8HYMD5K532p7DpHN0cmru-JKMjst-WS9zi7u8'\r\n    };\r\n\r\n    // initializeSocketConnection(data);\r\n});\r\n\r\nlet eventInit = false;\r\n\r\nfunction initializeSocketConnection(socketData) {\r\n\r\n    // const url = 'https://rtm.imibot.ai';\r\n    const url = 'https://imi-bot-middleware.herokuapp.com';\r\n    // const url = 'http://localhost:3000';\r\n\r\n    socket = window.io(url, {query: `data=${JSON.stringify(socketData)}`});\r\n    socket.on('connect', () => {\r\n        console.log('Client has CONNECTED to the server!');\r\n        if (eventInit === false) {\r\n            initAllEvents();\r\n            eventInit = true;\r\n        }\r\n    });\r\n    socket.on('disconnect', () => {\r\n        console.log('Client has DISCONNECTED to the server!');\r\n    });\r\n}\r\n\r\nfunction initAllEvents() {\r\n    // socket.on('preview', (data) => {\r\n    //     console.log('preview event preview :-)', data);\r\n    //     imiPreviewTemp.appendMessageInChatBody(data.generated_msg, null, false);\r\n    // });\r\n    //\r\n    // socket.on('previewStyle', (data) => {\r\n    //     if (location.search.includes('test')) {\r\n    //         console.log('chatStyle event preview :-)', data);\r\n    //         const $style = document.querySelector(\"[data-jss]\");\r\n    //         $style.parentElement.removeChild($style);\r\n    //         let style;\r\n    //         try {\r\n    //             style = JSON.parse(data.style);\r\n    //         } catch (e) {\r\n    //             console.log('invalid style, resetting to default');\r\n    //             style = null;\r\n    //         }\r\n    //         createAndAppendStyles(style);\r\n    //     }\r\n    // });\r\n}\r\n\r\ncreateAndAppendStyles(style);\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}