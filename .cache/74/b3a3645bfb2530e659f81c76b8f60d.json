{"id":"MAh6","dependencies":[{"name":"D:\\nodebook\\IMI-CHAT-PREVIEW\\tsconfig.json","includedInParent":true,"mtime":1567169658822},{"name":"D:\\nodebook\\IMI-CHAT-PREVIEW\\package.json","includedInParent":true,"mtime":1569915326222}],"generated":{"js":"\"use strict\";var e,t;Object.defineProperty(exports,\"__esModule\",{value:!0}),function(e){e.WELCOME_BOX=\"WELCOME_BOX\",e.CHAT_LIST=\"CHAT_LIST\",e.CHAT_BOX=\"CHAT_BOX\"}(e=exports.EChatFrame||(exports.EChatFrame={})),function(e){e.image=\"image\",e.text=\"text\",e.quickReply=\"quickReply\",e.bot_thinking=\"bot_thinking\"}(t=exports.EBotMessageMediaType||(exports.EBotMessageMediaType={}));"},"sourceMaps":{"js":{"mappings":[{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":0}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":0},"generated":{"line":1,"column":13}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":12},"generated":{"line":1,"column":17}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":12},"generated":{"line":1,"column":19}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":21}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":28}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":43}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":51}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":64}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":65}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":72}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":0},"generated":{"line":1,"column":76}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":12},"generated":{"line":1,"column":85}},{"source":"typings/send-api.ts","name":null,"original":{"line":253,"column":4},"generated":{"line":1,"column":88}},{"source":"typings/send-api.ts","name":null,"original":{"line":253,"column":4},"generated":{"line":1,"column":90}},{"source":"typings/send-api.ts","name":null,"original":{"line":253,"column":4},"generated":{"line":1,"column":102}},{"source":"typings/send-api.ts","name":null,"original":{"line":254,"column":4},"generated":{"line":1,"column":116}},{"source":"typings/send-api.ts","name":null,"original":{"line":254,"column":4},"generated":{"line":1,"column":118}},{"source":"typings/send-api.ts","name":null,"original":{"line":254,"column":4},"generated":{"line":1,"column":128}},{"source":"typings/send-api.ts","name":null,"original":{"line":255,"column":4},"generated":{"line":1,"column":140}},{"source":"typings/send-api.ts","name":null,"original":{"line":255,"column":4},"generated":{"line":1,"column":142}},{"source":"typings/send-api.ts","name":null,"original":{"line":255,"column":4},"generated":{"line":1,"column":151}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":0},"generated":{"line":1,"column":162}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":12},"generated":{"line":1,"column":163}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":12},"generated":{"line":1,"column":165}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":12},"generated":{"line":1,"column":173}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":12},"generated":{"line":1,"column":186}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":12},"generated":{"line":1,"column":194}},{"source":"typings/send-api.ts","name":null,"original":{"line":252,"column":22},"generated":{"line":1,"column":205}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":210}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":12},"generated":{"line":1,"column":219}},{"source":"typings/send-api.ts","name":null,"original":{"line":259,"column":4},"generated":{"line":1,"column":222}},{"source":"typings/send-api.ts","name":null,"original":{"line":259,"column":4},"generated":{"line":1,"column":224}},{"source":"typings/send-api.ts","name":null,"original":{"line":259,"column":4},"generated":{"line":1,"column":230}},{"source":"typings/send-api.ts","name":null,"original":{"line":260,"column":4},"generated":{"line":1,"column":238}},{"source":"typings/send-api.ts","name":null,"original":{"line":260,"column":4},"generated":{"line":1,"column":240}},{"source":"typings/send-api.ts","name":null,"original":{"line":260,"column":4},"generated":{"line":1,"column":245}},{"source":"typings/send-api.ts","name":null,"original":{"line":261,"column":4},"generated":{"line":1,"column":252}},{"source":"typings/send-api.ts","name":null,"original":{"line":261,"column":4},"generated":{"line":1,"column":254}},{"source":"typings/send-api.ts","name":null,"original":{"line":261,"column":4},"generated":{"line":1,"column":265}},{"source":"typings/send-api.ts","name":null,"original":{"line":262,"column":4},"generated":{"line":1,"column":278}},{"source":"typings/send-api.ts","name":null,"original":{"line":262,"column":4},"generated":{"line":1,"column":280}},{"source":"typings/send-api.ts","name":null,"original":{"line":262,"column":4},"generated":{"line":1,"column":293}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":0},"generated":{"line":1,"column":308}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":12},"generated":{"line":1,"column":309}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":12},"generated":{"line":1,"column":311}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":12},"generated":{"line":1,"column":319}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":12},"generated":{"line":1,"column":342}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":12},"generated":{"line":1,"column":350}},{"source":"typings/send-api.ts","name":null,"original":{"line":258,"column":32},"generated":{"line":1,"column":371}}],"sources":{"typings/send-api.ts":"export interface ISendApiReq {\r\n    \"consumer\": {\r\n        \"uid\": string\r\n    },\r\n    \"type\": \"human\" | \"bot\",\r\n    \"msg\": string,\r\n    \"platform\": \"web\",\r\n    \"is_test\": false\r\n}\r\n\r\nexport interface ISendApiResp {\r\n    \"TimeStamp\": 1567167604976,\r\n    \"bot_message_id\": 750126,\r\n    \"bot_msg\": \"\",\r\n    \"extra_params\": {},\r\n    \"extras\": {},\r\n    \"generated_msg\": IGeneratedMessageItem,\r\n    \"messageStore\": {\r\n        \"agent_handover_by_rules\": true,\r\n        \"corpus_id\": 183,\r\n        \"n_sections\": [\r\n            {\r\n                \"first_question\": \"What can you do?\",\r\n                \"score\": 0,\r\n                \"section_id\": \"help\"\r\n            },\r\n            {\r\n                \"first_question\": \"Talk to an agent\",\r\n                \"score\": 0,\r\n                \"section_id\": \"agent\"\r\n            },\r\n            {\r\n                \"first_question\": \"hi\",\r\n                \"score\": 0,\r\n                \"section_id\": \"3\"\r\n            }\r\n        ],\r\n        \"partial_match_sections\": [],\r\n        \"response_type\": \"\",\r\n        \"sendtoagent\": true,\r\n        \"thresholding_scores\": {\r\n            \"n_results\": 3,\r\n            \"threshold_diff_score\": 0.05,\r\n            \"threshold_min_score\": 0.3\r\n        },\r\n        \"top_match_section\": {\r\n            \"first_question\": \"Fallback Message\",\r\n            \"score\": 0,\r\n            \"section_id\": \"fallback\"\r\n        }\r\n    },\r\n    \"partial_match\": false,\r\n    \"platform\": \"web\",\r\n    \"progressive\": false,\r\n    \"response_flag\": true,\r\n    \"room\": {\r\n        \"_id\": \"5d6914615f6218003a58df90\",\r\n        \"agent_handover\": false,\r\n        \"agent_handover_rules_count\": {\r\n            \"consecutive_count\": 0,\r\n            \"fallback_count\": 0,\r\n            \"last_triggered\": \"\",\r\n            \"partial_match_count\": 0\r\n        },\r\n        \"allow_anonymization\": false,\r\n        \"bot_disabled\": false,\r\n        \"bot_id\": 579,\r\n        \"callback\": false,\r\n        \"channels\": [\r\n            \"web\"\r\n        ],\r\n        \"consent_permissions\": [],\r\n        \"consumer_id\": 51598,\r\n        \"created_at\": 1567167585592,\r\n        \"cross_retention_period\": false,\r\n        \"data_store\": {},\r\n        \"df_state\": {},\r\n        \"downvoted_message_count\": 0,\r\n        \"error_message_count\": 0,\r\n        \"feedback_count\": {\r\n            \"downvote\": 0,\r\n            \"upvote\": 0\r\n        },\r\n        \"id\": 178123,\r\n        \"imichat_agent\": {},\r\n        \"imiconnect_conversation_id\": \"\",\r\n        \"is_anonymized\": false,\r\n        \"is_test\": true,\r\n        \"last_message_time\": \"2019-08-30T12:20:04.972483\",\r\n        \"last_updated_job_id\": \"5d6914745d2301cf1b2f3e22\",\r\n        \"manager_bot_room_id\": 0,\r\n        \"message_count\": {\r\n            \"agent\": 0,\r\n            \"bot\": 3,\r\n            \"total\": 5,\r\n            \"user\": 2\r\n        },\r\n        \"room_state_closed\": false,\r\n        \"selected_avatar\": {},\r\n        \"sendtoagent_count\": 1,\r\n        \"session_id\": \"\",\r\n        \"total_message_count\": 5,\r\n        \"updated_at\": 1567167604972,\r\n        \"upvoted_message_count\": 0\r\n    },\r\n    \"section_matched\": [\r\n        {\r\n            \"first_question\": \"Fallback Message\",\r\n            \"score\": 0,\r\n            \"section_id\": \"fallback\"\r\n        }\r\n    ],\r\n    \"sendtoagent\": true,\r\n    \"thresholding_scores\": {\r\n        \"n_results\": 3,\r\n        \"threshold_diff_score\": 0.05,\r\n        \"threshold_min_score\": 0.3\r\n    },\r\n    \"transaction_id\": \"27095eaec4624e63bab672d9e9002771\"\r\n}\r\n\r\n/*from bot project*/\r\n\r\n\r\nexport interface ISendApiRequestPayload {\r\n    'bot_id': string;\r\n    'consumer': {\r\n        '_id'?: string,\r\n        'botId': string,\r\n        'consentAcknowledged': boolean,\r\n        'consentPermissions': any[],\r\n        'consumerDataStore': object,\r\n        'created_at': string,\r\n        'email': string,\r\n        'extra_params': string,\r\n        'facebookId': string,\r\n        'lineId': string,\r\n        'name': string,\r\n        'phone': string,\r\n        'skypeId': string,\r\n        'uid': string,\r\n        'updated_at': string\r\n    };\r\n\r\n    'type': string;\r\n    'msg': string;\r\n    'platform': string;\r\n}\r\n\r\nexport interface IGeneratedMessageItem {\r\n    'text'?: string;\r\n    bot_message_id: number;\r\n    'media'?: any;\r\n    // {\r\n    //   'buttons': [\r\n    //     {\r\n    //       'title': 'URL Button',\r\n    //       'type': 'web_url', //title\r\n    //       'url': 'https://www.messenger.com/'/*TODO: we are not getting payload*/\r\n    //     }\r\n    //     ],\r\n    //   'title': 'this is sample text for image ,it is optional', //use this\r\n    //   'type': EBotMessageMediaType//\"image\",//use this\r\n    //   'url': 'https://wallpaperbrowse.com/media/images/soap-bubble-1958650_960_720.jpg'//use this\r\n    //   'video_url': string\r\n    //   'audio_url': string\r\n    //   'image_url': string\r\n    // }[],\r\n\r\n    quick_reply?: {\r\n        'quick_replies': [\r\n            {\r\n                'content_type': 'text',\r\n                'payload': 'Play Game',\r\n                'title': 'Play Game'\r\n            }],\r\n        'text': 'Do you want to play game or validate coupon?<br>Select any'\r\n    };\r\n\r\n}\r\n\r\nexport interface ISendApiResponsePayload {\r\n    'TimeStamp': 1533902788.0;\r\n    'bot_msg': string;\r\n    bot_message_id: number;\r\n    'generated_msg': IGeneratedMessageItem[];\r\n    'messageStore': { 'endflow': true, 'templateKey': 'A1', response_language:string };\r\n    'room': {\r\n        'agent_handover': false,\r\n        'allow_anonymization': false,\r\n        'bot_id': number// 1,\r\n        'consent_permissions': any[],\r\n        'consumer_id': number, // 43,\r\n        'cross_retention_period': false,\r\n        'data_store': {},\r\n        'df_state': {\r\n            'answer': 'hi', 'question': 'hi'\r\n        },\r\n        'id': number,\r\n        'imichat_agent': {},\r\n        'is_anonymized': false,\r\n        'last_updated_job_id': '5b6d7fc4736453000587246a',\r\n        'manager_bot_room_id': 0,\r\n        'resource_uri': '/api/v1/room/64/',\r\n        'room_state_closed': false,\r\n        'selected_avatar': any\r\n    };\r\n    'sendtoagent': false;\r\n    'templateKey': 'A1';\r\n    'transaction_id': '79f2707b0d2c419198febf0ccaaa4b99';\r\n    // 'generated_msg': [{\r\n    //     'text': string\r\n    //   }],\r\n    // 'room': {\r\n    //   '_id': string,\r\n    //   'agentHandOver': false,\r\n    //   'botId': number,\r\n    //   'consentAcknowledged': true,\r\n    //   'consumerId': {\r\n    //     '_id': string,\r\n    //     'botId': string,\r\n    //     'consentAcknowledged': true,\r\n    //     'consentPermissions': {\r\n    //         'permission': string,\r\n    //         'status': string\r\n    //       }[],\r\n    //     'consumerDataStore': {},\r\n    //     'created_at': string,\r\n    //     'email': string,\r\n    //     'extra_params': string,\r\n    //     'facebookId': string,\r\n    //     'lineId': string,\r\n    //     'name': string,\r\n    //     'phone': string,\r\n    //     'skypeId': string,\r\n    //     'uid': string,\r\n    //     'updated_at': string\r\n    //   },\r\n    //   'created_at': string,\r\n    //   'managerBotRoomId': null,\r\n    //   'room_state_closed': false,\r\n    //   'bot': {\r\n    //     'roomId': 1,\r\n    //     'imageUrl': string,\r\n    //     'name': string\r\n    //   },\r\n    //   'updated_at': string\r\n    // },\r\n    // 'transaction_id': string\r\n}\r\n\r\nexport enum EChatFrame {\r\n    WELCOME_BOX = 'WELCOME_BOX',\r\n    CHAT_LIST = 'CHAT_LIST',\r\n    CHAT_BOX = 'CHAT_BOX',\r\n}\r\n\r\nexport enum EBotMessageMediaType {\r\n    image = 'image',\r\n    text = 'text',\r\n    quickReply = 'quickReply',\r\n    bot_thinking = 'bot_thinking'\r\n}\r\n\r\nexport interface IMessageData extends IGeneratedMessageItem {\r\n    /*custom fields*/\r\n    sourceType: string; // TODO: \"timePeriod\" ||\"human\", gives error, see why\r\n    time: number;\r\n    messageMediatype: EBotMessageMediaType;\r\n    bot_message_id: number;\r\n    feedback?: any;\r\n    isLast?: boolean;\r\n    response_language?: string;\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"bc531e2033e556628799b0fb1b195d96","cacheData":{"env":{}}}